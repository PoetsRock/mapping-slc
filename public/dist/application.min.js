"use strict";var ApplicationConfiguration=function(){var applicationModuleName="mean",applicationModuleVendorDependencies=["ngResource","ngAnimate","ngSanitize","ngMessages","ngCookies","ngMaterial","ui.router","ui.bootstrap","ui.utils","ngCkeditor","bootstrapLightbox","cgNotify","ngFileUpload","angular-redactor"],registerModule=function(moduleName,dependencies){angular.module(moduleName,dependencies||[]),angular.module(applicationModuleName).requires.push(moduleName)};return{applicationModuleName:applicationModuleName,applicationModuleVendorDependencies:applicationModuleVendorDependencies,registerModule:registerModule}}();
"use strict";angular.module(ApplicationConfiguration.applicationModuleName,ApplicationConfiguration.applicationModuleVendorDependencies),angular.module(ApplicationConfiguration.applicationModuleName).config(["$locationProvider","$httpProvider",function($locationProvider,$httpProvider){$locationProvider.html5Mode(!0).hashPrefix("!"),$httpProvider.interceptors.push("authInterceptor")}]),angular.module(ApplicationConfiguration.applicationModuleName).run(["$rootScope","$state","Authentication",function($rootScope,$state,Authentication){function storePreviousState(state,params){state.data&&state.data.ignoreState||($state.previous={state:state,params:params,href:$state.href(state,params)})}$rootScope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams){if(toState.data&&toState.data.roles&&toState.data.roles.length>0){var allowed=!1;toState.data.roles.forEach(function(role){return"guest"===role||Authentication.user&&void 0!==Authentication.user.roles&&-1!==Authentication.user.roles.indexOf(role)?(allowed=!0,!0):void 0}),allowed||(event.preventDefault(),void 0!==Authentication.user&&"object"==typeof Authentication.user?$state.go("forbidden"):$state.go("authentication.signin").then(function(){storePreviousState(toState,toParams)}))}}),$rootScope.$on("$stateChangeSuccess",function(event,toState,toParams,fromState,fromParams){storePreviousState(fromState,fromParams)})}]),angular.element(document).ready(function(){if(window.location.hash&&"#_=_"===window.location.hash)if(window.history&&history.pushState)window.history.pushState("",document.title,window.location.pathname);else{var scroll={top:document.body.scrollTop,left:document.body.scrollLeft};window.location.hash="",document.body.scrollTop=scroll.top,document.body.scrollLeft=scroll.left}angular.bootstrap(document,[ApplicationConfiguration.applicationModuleName])});
"use strict";ApplicationConfiguration.registerModule("admins");
"use strict";ApplicationConfiguration.registerModule("contacts");
"use strict";ApplicationConfiguration.registerModule("core");
"use strict";ApplicationConfiguration.registerModule("projects");
"use strict";ApplicationConfiguration.registerModule("angular-redactor");
!function($){"use strict";function Redactor(el,options){return new Redactor.prototype.init(el,options)}Function.prototype.bind||(Function.prototype.bind=function(scope){var fn=this;return function(){return fn.apply(scope)}});var uuid=0;$.fn.redactor=function(options){var val=[],args=Array.prototype.slice.call(arguments,1);return"string"==typeof options?this.each(function(){var func,instance=$.data(this,"redactor");if("-1"!==options.search(/\./)?(func=options.split("."),"undefined"!=typeof instance[func[0]]&&(func=instance[func[0]][func[1]])):func=instance[options],"undefined"!=typeof instance&&$.isFunction(func)){var methodVal=func.apply(instance,args);void 0!==methodVal&&methodVal!==instance&&val.push(methodVal)}else $.error('No such method "'+options+'" for Redactor')}):this.each(function(){$.data(this,"redactor",{}),$.data(this,"redactor",Redactor(this,options))}),0===val.length?this:1===val.length?val[0]:val},$.Redactor=Redactor,$.Redactor.VERSION="1.2.2",$.Redactor.modules=["air","autosave","block","buffer","build","button","caret","clean","code","core","detect","dropdown","events","file","focus","image","indent","inline","insert","keydown","keyup","lang","line","link","linkify","list","marker","modal","observe","offset","paragraphize","paste","placeholder","progress","selection","shortcuts","storage","toolbar","upload","uploads3","utils","browser"],$.Redactor.settings={},$.Redactor.opts={animation:!1,lang:"en",direction:"ltr",focus:!1,focusEnd:!1,clickToEdit:!1,structure:!1,tabindex:!1,minHeight:!1,maxHeight:!1,maxWidth:!1,plugins:!1,callbacks:{},placeholder:!1,linkify:!0,enterKey:!0,pastePlainText:!1,pasteImages:!0,pasteLinks:!0,pasteBlockTags:["h1","h2","h3","h4","h5","h6","table","tbody","thead","tfoot","th","tr","td","ul","ol","li","blockquote","pre","figure","figcaption"],pasteInlineTags:["strong","b","u","em","i","code","del","ins","samp","kbd","sup","sub","mark","var","cite","small"],preClass:!1,preSpaces:4,tabAsSpaces:!1,tabKey:!0,autosave:!1,autosaveName:!1,autosaveFields:!1,imageUpload:null,imageUploadParam:"file",imageUploadFields:!1,imageUploadForms:!1,imageCaption:!0,dragImageUpload:!0,multipleImageUpload:!0,clipboardImageUpload:!0,fileUpload:null,fileUploadParam:"file",fileUploadFields:!1,fileUploadForms:!1,dragFileUpload:!0,s3:!1,linkTooltip:!0,linkNofollow:!1,linkSize:30,videoContainerClass:"video-container",toolbar:!0,toolbarFixed:!0,toolbarFixedTarget:document,toolbarFixedTopOffset:0,toolbarExternal:!1,air:!1,airWidth:!1,formatting:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],formattingAdd:!1,buttons:["format","bold","italic","deleted","lists","image","file","link","horizontalrule"],buttonsHide:[],buttonsHideOnMobile:[],script:!0,shortcuts:{"ctrl+shift+m, meta+shift+m":{func:"inline.removeFormat"},"ctrl+b, meta+b":{func:"inline.format",params:["bold"]},"ctrl+i, meta+i":{func:"inline.format",params:["italic"]},"ctrl+h, meta+h":{func:"inline.format",params:["superscript"]},"ctrl+l, meta+l":{func:"inline.format",params:["subscript"]},"ctrl+k, meta+k":{func:"link.show"},"ctrl+shift+7":{func:"list.toggle",params:["orderedlist"]},"ctrl+shift+8":{func:"list.toggle",params:["unorderedlist"]}},shortcutsAdd:!1,activeButtons:["deleted","italic","bold"],activeButtonsStates:{b:"bold",strong:"bold",i:"italic",em:"italic",del:"deleted",strike:"deleted"},langs:{en:{format:"Format",image:"Image",file:"File",link:"Link",bold:"Bold",italic:"Italic",deleted:"Strikethrough",underline:"Underline","bold-abbr":"B","italic-abbr":"I","deleted-abbr":"S","underline-abbr":"U",lists:"Lists","link-insert":"Insert link","link-edit":"Edit link","link-in-new-tab":"Open link in new tab",unlink:"Unlink",cancel:"Cancel",close:"Close",insert:"Insert",save:"Save","delete":"Delete",text:"Text",edit:"Edit",title:"Title",paragraph:"Normal text",quote:"Quote",code:"Code",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",filename:"Name",optional:"optional",unorderedlist:"Unordered List",orderedlist:"Ordered List",outdent:"Outdent",indent:"Indent",horizontalrule:"Line","upload-label":"Drop file here or ",caption:"Caption",bulletslist:"Bullets",numberslist:"Numbers","accessibility-help-label":"Rich text editor"}},type:"textarea",inline:!1,buffer:[],rebuffer:[],inlineTags:["a","span","strong","strike","b","u","em","i","code","del","ins","samp","kbd","sup","sub","mark","var","cite","small"],blockTags:["pre","ul","ol","li","p","h1","h2","h3","h4","h5","h6","dl","dt","dd","div","td","blockquote","output","figcaption","figure","address","section","header","footer","aside","article","iframe"],paragraphize:!0,paragraphizeBlocks:["table","div","pre","form","ul","ol","h1","h2","h3","h4","h5","h6","dl","blockquote","figcaption","address","section","header","footer","aside","article","object","style","script","iframe","select","input","textarea","button","option","map","area","math","hr","fieldset","legend","hgroup","nav","figure","details","menu","summary","p"],emptyHtml:"<p>&#x200b;</p>",invisibleSpace:"&#x200b;",imageTypes:["image/png","image/jpeg","image/gif"],userAgent:navigator.userAgent.toLowerCase(),observe:{dropdowns:[]},regexps:{linkyoutube:/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.\-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,linkvimeo:/https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,linkimage:/((https?|www)[^\s]+\.)(jpe?g|png|gif)(\?[^\s-]+)?/gi,url:/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/gi}},Redactor.fn=$.Redactor.prototype={keyCode:{BACKSPACE:8,DELETE:46,UP:38,DOWN:40,ENTER:13,SPACE:32,ESC:27,TAB:9,CTRL:17,META:91,SHIFT:16,ALT:18,RIGHT:39,LEFT:37,LEFT_WIN:91},init:function(el,options){return this.$element=$(el),this.uuid=uuid++,this.loadOptions(options),this.loadModules(),this.opts.clickToEdit&&!this.$element.hasClass("redactor-click-to-edit")?this.loadToEdit(options):(this.$element.hasClass("redactor-click-to-edit")&&this.$element.removeClass("redactor-click-to-edit"),this.reIsBlock=new RegExp("^("+this.opts.blockTags.join("|").toUpperCase()+")$","i"),this.reIsInline=new RegExp("^("+this.opts.inlineTags.join("|").toUpperCase()+")$","i"),this.opts.dragImageUpload=null===this.opts.imageUpload?!1:this.opts.dragImageUpload,this.opts.dragFileUpload=null===this.opts.fileUpload?!1:this.opts.dragFileUpload,this.formatting={},this.lang.load(),$.extend(this.opts.shortcuts,this.opts.shortcutsAdd),this.$editor=this.$element,this.detectType(),this.core.callback("start"),this.core.callback("startToEdit"),this.start=!0,void this.build.start())},detectType:function(){this.build.isInline()||this.opts.inline?this.opts.type="inline":this.build.isTag("DIV")?this.opts.type="div":this.build.isTag("PRE")&&(this.opts.type="pre")},loadToEdit:function(options){this.$element.on("click.redactor-click-to-edit",$.proxy(function(){this.initToEdit(options)},this)),this.$element.addClass("redactor-click-to-edit")},initToEdit:function(options){$.extend(options.callbacks,{startToEdit:function(){this.insert.node(this.marker.get(),!1)},initToEdit:function(){this.selection.restore(),this.clickToCancelStorage=this.code.get(),$(this.opts.clickToCancel).off(".redactor-click-to-edit"),$(this.opts.clickToCancel).show().on("click.redactor-click-to-edit",$.proxy(function(e){e.preventDefault(),this.core.destroy(),this.events.syncFire=!1,this.$element.html(this.clickToCancelStorage),this.core.callback("cancel",this.clickToCancelStorage),this.events.syncFire=!0,this.clickToCancelStorage="",$(this.opts.clickToCancel).hide(),$(this.opts.clickToSave).hide(),this.$element.on("click.redactor-click-to-edit",$.proxy(function(){this.initToEdit(options)},this)),this.$element.addClass("redactor-click-to-edit")},this)),$(this.opts.clickToSave).off(".redactor-click-to-edit"),$(this.opts.clickToSave).show().on("click.redactor-click-to-edit",$.proxy(function(e){e.preventDefault(),this.core.destroy(),this.core.callback("save",this.code.get()),$(this.opts.clickToCancel).hide(),$(this.opts.clickToSave).hide(),this.$element.on("click.redactor-click-to-edit",$.proxy(function(){this.initToEdit(options)},this)),this.$element.addClass("redactor-click-to-edit")},this))}}),this.$element.redactor(options),this.$element.off(".redactor-click-to-edit")},loadOptions:function(options){var settings={};"undefined"!=typeof $.Redactor.settings.namespace?this.$element.hasClass($.Redactor.settings.namespace)&&(settings=$.Redactor.settings):settings=$.Redactor.settings,this.opts=$.extend({},$.extend(!0,{},$.Redactor.opts),$.extend(!0,{},settings),this.$element.data(),options)},getModuleMethods:function(object){return Object.getOwnPropertyNames(object).filter(function(property){return"function"==typeof object[property]})},loadModules:function(){for(var len=$.Redactor.modules.length,i=0;len>i;i++)this.bindModuleMethods($.Redactor.modules[i])},bindModuleMethods:function(module){if("undefined"!=typeof this[module]){this[module]=this[module]();for(var methods=this.getModuleMethods(this[module]),len=methods.length,z=0;len>z;z++)this[module][methods[z]]=this[module][methods[z]].bind(this)}},air:function(){return{enabled:!1,collapsed:function(){this.opts.air&&this.selection.get().collapseToStart()},collapsedEnd:function(){this.opts.air&&this.selection.get().collapseToEnd()},build:function(){this.detect.isMobile()||(this.button.hideButtons(),this.button.hideButtonsOnMobile(),0!==this.opts.buttons.length&&(this.$air=this.air.createContainer(),this.opts.airWidth!==!1&&this.$air.css("width",this.opts.airWidth),this.air.append(),this.button.$toolbar=this.$air,this.button.setFormatting(),this.button.load(this.$air),this.core.editor().on("mouseup.redactor",this,$.proxy(function(e){""!==this.selection.text()&&this.air.show(e)},this))))},append:function(){this.$air.appendTo("body")},createContainer:function(){return $("<ul>").addClass("redactor-air").attr({id:"redactor-air-"+this.uuid,role:"toolbar"}).hide()},show:function(e){this.marker.remove(),this.selection.save(),this.selection.restore(!1),$(".redactor-air").hide();var leftFix=0,width=this.$air.innerWidth();$(window).width()<e.clientX+width&&(leftFix=200),this.$air.css({left:e.clientX-leftFix+"px",top:e.clientY+10+$(document).scrollTop()+"px"}).show(),this.air.enabled=!0,this.air.bindHide()},bindHide:function(){$(document).on("mousedown.redactor-air."+this.uuid,$.proxy(function(e){var dropdown=$(e.target).closest(".redactor-dropdown").length;if(0===$(e.target).closest(this.$air).length&&0===dropdown){var hide=this.air.hide(e);hide!==!1&&this.marker.remove()}},this)).on("keydown.redactor-air."+this.uuid,$.proxy(function(e){var key=e.which;if((this.utils.isRedactorParent(e.target)||$(e.target).hasClass("redactor-in"))&&0===$(e.target).closest("#redactor-modal").length){if(key===this.keyCode.ESC)this.selection.get().collapseToStart(),this.marker.remove();else if(key===this.keyCode.BACKSPACE||key===this.keyCode.DELETE){var sel=this.selection.get(),range=this.selection.range(sel);range.deleteContents(),this.marker.remove()}else key===this.keyCode.ENTER&&(this.selection.get().collapseToEnd(),this.marker.remove());this.air.enabled?this.air.hide(e):(this.selection.get().collapseToStart(),this.marker.remove())}},this))},hide:function(e){var ctrl=e.ctrlKey||e.metaKey||e.shiftKey&&e.altKey;return ctrl?!1:(this.button.setInactiveAll(),this.$air.fadeOut(100),this.air.enabled=!1,void $(document).off("mousedown.redactor-air."+this.uuid))}}},autosave:function(){return{enabled:!1,html:!1,init:function(){this.opts.autosave&&(this.autosave.enabled=!0,this.autosave.name=this.opts.autosaveName?this.opts.autosaveName:this.$textarea.attr("name"))},is:function(){return this.autosave.enabled},send:function(){if(this.opts.autosave&&(this.autosave.source=this.code.get(),this.autosave.html!==this.autosave.source)){var data={};data.name=this.autosave.name,data[this.autosave.name]=this.autosave.source,data=this.autosave.getHiddenFields(data);var jsxhr=$.ajax({url:this.opts.autosave,type:"post",data:data});jsxhr.done(this.autosave.success)}},getHiddenFields:function(data){return this.opts.autosaveFields===!1||"object"!=typeof this.opts.autosaveFields?data:($.each(this.opts.autosaveFields,$.proxy(function(k,v){null!==v&&0===v.toString().indexOf("#")&&(v=$(v).val()),data[k]=v},this)),data)},success:function(data){var json;try{json=$.parseJSON(data)}catch(e){json=data}var callbackName="undefined"==typeof json.error?"autosave":"autosaveError";this.core.callback(callbackName,this.autosave.name,json),this.autosave.html=this.autosave.source},disable:function(){this.autosave.enabled=!1,clearInterval(this.autosaveTimeout)}}},block:function(){return{format:function(tag,attr,value,type){return tag="quote"===tag?"blockquote":tag,this.block.tags=["p","blockquote","pre","h1","h2","h3","h4","h5","h6","div","figure"],-1!==$.inArray(tag,this.block.tags)?("p"===tag&&"undefined"==typeof attr&&(attr="class"),this.placeholder.hide(),this.buffer.set(),this.utils.isCollapsed()?this.block.formatCollapsed(tag,attr,value,type):this.block.formatUncollapsed(tag,attr,value,type)):void 0},formatCollapsed:function(tag,attr,value,type){this.selection.save();var block=this.selection.block(),currentTag=block.tagName.toLowerCase();if(-1===$.inArray(currentTag,this.block.tags))return void this.selection.restore();currentTag===tag&&(tag="p");var replaced=this.utils.replaceToTag(block,tag);if("object"==typeof attr){type=value;for(var key in attr)replaced=this.block.setAttr(replaced,key,attr[key],type)}else replaced=this.block.setAttr(replaced,attr,value,type);return"pre"===tag&&1===replaced.length&&$(replaced).html($.trim($(replaced).html())),this.selection.restore(),this.block.removeInlineTags(replaced),replaced},formatUncollapsed:function(tag,attr,value,type){this.selection.save();for(var replaced=[],blocks=this.selection.blocks(),len=blocks.length,i=0;len>i;i++){var currentTag=blocks[i].tagName.toLowerCase();if(-1!==$.inArray(currentTag,this.block.tags)){var block=this.utils.replaceToTag(blocks[i],tag);if("object"==typeof attr){type=value;for(var key in attr)block=this.block.setAttr(block,key,attr[key],type)}else block=this.block.setAttr(block,attr,value,type);replaced.push(block),this.block.removeInlineTags(block)}}if(this.selection.restore(),"pre"===tag&&0!==replaced.length){var first=replaced[0];$.each(replaced,function(i,s){0!==i&&($(first).append("\n"+$.trim(s.html())),$(s).remove())}),replaced=[],replaced.push(first)}return replaced},removeInlineTags:function(node){node=node[0]||node;var tags=this.opts.inlineTags,blocks=["PRE","H1","H2","H3","H4","H5","H6"];if(-1!==$.inArray(node.tagName,blocks)){if("PRE"!==node.tagName){var index=tags.indexOf("a");tags.splice(index,1)}$(node).find(tags.join(",")).not(".redactor-selection-marker").contents().unwrap()}},setAttr:function(block,attr,value,type){if("undefined"==typeof attr)return block;var func="undefined"==typeof type?"replace":type;return block="class"===attr?this.block[func+"Class"](value,block):"remove"===func?this.block[func+"Attr"](attr,block):"removeAll"===func?this.block[func+"Attr"](attr,block):this.block[func+"Attr"](attr,value,block)},getBlocks:function(block){return"undefined"==typeof block?this.selection.blocks():block},replaceClass:function(value,block){return $(this.block.getBlocks(block)).removeAttr("class").addClass(value)[0]},toggleClass:function(value,block){return $(this.block.getBlocks(block)).toggleClass(value)[0]},addClass:function(value,block){return $(this.block.getBlocks(block)).addClass(value)[0]},removeClass:function(value,block){return $(this.block.getBlocks(block)).removeClass(value)[0]},removeAllClass:function(block){return $(this.block.getBlocks(block)).removeAttr("class")[0]},replaceAttr:function(attr,value,block){return block=this.block.removeAttr(attr,block),$(block).attr(attr,value)[0]},toggleAttr:function(attr,value,block){block=this.block.getBlocks(block);var self=this,returned=[];return $.each(block,function(i,s){var $el=$(s);$el.attr(attr)?returned.push(self.block.removeAttr(attr,s)):returned.push(self.block.addAttr(attr,value,s))}),returned},addAttr:function(attr,value,block){return $(this.block.getBlocks(block)).attr(attr,value)[0]},removeAttr:function(attr,block){return $(this.block.getBlocks(block)).removeAttr(attr)[0]},removeAllAttr:function(block){block=this.block.getBlocks(block);var returned=[];return $.each(block,function(i,s){"undefined"==typeof s.attributes&&returned.push(s);for(var $el=$(s),len=s.attributes.length,z=0;len>z;z++)$el.removeAttr(s.attributes[z].name);returned.push($el[0])}),returned}}},buffer:function(){return{set:function(type){"undefined"==typeof type||"undo"===type?this.buffer.setUndo():this.buffer.setRedo()},setUndo:function(){this.selection.save();var last=this.opts.buffer[this.opts.buffer.length-1],current=this.core.editor().html();last!==current&&this.opts.buffer.push(current),this.selection.restore()},setRedo:function(){this.selection.save(),this.opts.rebuffer.push(this.core.editor().html()),this.selection.restore()},getUndo:function(){this.core.editor().html(this.opts.buffer.pop())},getRedo:function(){this.core.editor().html(this.opts.rebuffer.pop())},add:function(){this.opts.buffer.push(this.core.editor().html())},undo:function(){0!==this.opts.buffer.length&&(this.buffer.set("redo"),this.buffer.getUndo(),this.selection.restore())},redo:function(){0!==this.opts.rebuffer.length&&(this.buffer.set("undo"),this.buffer.getRedo(),this.selection.restore())}}},build:function(){return{start:function(){if("inline"===this.opts.type)this.opts.type="inline";else if("div"===this.opts.type){var html=$.trim(this.$editor.html());""===html&&this.$editor.html(this.opts.emptyHtml)}else"textarea"===this.opts.type&&this.build.startTextarea();this.build.setIn(),this.build.setId(),this.build.enableEditor(),this.build.setOptions(),this.build.callEditor()},createContainerBox:function(){this.$box=$('<div class="redactor-box" role="application" />')},setIn:function(){this.core.editor().addClass("redactor-in")},setId:function(){var id="textarea"===this.opts.type?"redactor-uuid-"+this.uuid:this.$element.attr("id");this.core.editor().attr("id","undefined"==typeof id?"redactor-uuid-"+this.uuid:id)},getName:function(){var name=this.$element.attr("name");return"undefined"==typeof name?"content-"+this.uuid:name},loadFromTextarea:function(){this.$editor=$("<div />"),this.$textarea=this.$element,this.$element.attr("name",this.build.getName()),this.$box.insertAfter(this.$element).append(this.$editor).append(this.$element),this.$editor.addClass("redactor-editor"),this.$element.hide(),this.$box.prepend('<span class="redactor-voice-label" id="redactor-voice-'+this.uuid+'" aria-hidden="false">'+this.lang.get("accessibility-help-label")+"</span>"),this.$editor.attr({"aria-labelledby":"redactor-voice-"+this.uuid,role:"presentation"})},startTextarea:function(){this.build.createContainerBox(),this.build.loadFromTextarea(),this.code.start(this.core.textarea().val()),this.core.textarea().val(this.clean.onSync(this.$editor.html()))},isTag:function(tag){return this.$element[0].tagName===tag},isInline:function(){return!this.build.isTag("TEXTAREA")&&!this.build.isTag("DIV")&&!this.build.isTag("PRE")},enableEditor:function(){this.core.editor().attr({contenteditable:!0})},setOptions:function(){"inline"===this.opts.type&&(this.opts.enterKey=!1),("inline"===this.opts.type||"pre"===this.opts.type)&&(this.opts.toolbarMobile=!1,this.opts.toolbar=!1,this.opts.air=!1,this.opts.linkify=!1),this.opts.structure&&this.core.editor().addClass("redactor-structure"),"textarea"===this.opts.type&&(this.core.box().attr("dir",this.opts.direction),this.core.editor().attr("dir",this.opts.direction),this.opts.tabindex&&this.core.editor().attr("tabindex",this.opts.tabindex),this.opts.minHeight?this.core.editor().css("min-height",this.opts.minHeight):this.core.editor().css("min-height","40px"),this.opts.maxHeight&&this.core.editor().css("max-height",this.opts.maxHeight),this.opts.maxWidth&&this.core.editor().css({"max-width":this.opts.maxWidth,margin:"auto"}))},callEditor:function(){this.build.disableBrowsersEditing(),this.events.init(),this.build.setHelpers(),(this.opts.toolbar||this.opts.air)&&(this.toolbarsButtons=this.button.init()),this.opts.air?this.air.build():this.opts.toolbar&&this.toolbar.build(),this.detect.isMobile()&&this.opts.toolbarMobile&&this.opts.air&&(this.opts.toolbar=!0,this.toolbar.build()),(this.opts.air||this.opts.toolbar)&&(this.core.editor().on("mouseup.redactor-observe."+this.uuid+" keyup.redactor-observe."+this.uuid+" focus.redactor-observe."+this.uuid+" touchstart.redactor-observe."+this.uuid,$.proxy(this.observe.toolbar,this)),this.core.element().on("blur.callback.redactor",$.proxy(function(){this.button.setInactiveAll()},this))),this.modal.templates(),this.build.plugins(),this.autosave.init(),this.code.html=this.code.cleaned(this.core.editor().html()),this.core.callback("init"),this.core.callback("initToEdit"),this.storage.observe(),this.start=!1},setHelpers:function(){this.opts.linkify&&this.linkify.format(),this.placeholder.init(),this.opts.focus?setTimeout(this.focus.start,100):this.opts.focusEnd&&setTimeout(this.focus.end,100)},disableBrowsersEditing:function(){try{document.execCommand("enableObjectResizing",!1,!1),document.execCommand("enableInlineTableEditing",!1,!1),document.execCommand("AutoUrlDetect",!1,!1)}catch(e){}},plugins:function(){this.opts.plugins&&$.each(this.opts.plugins,$.proxy(function(i,s){var func="undefined"!=typeof RedactorPlugins&&"undefined"!=typeof RedactorPlugins[s]?RedactorPlugins:Redactor.fn;if($.isFunction(func[s])){this[s]=func[s]();for(var methods=this.getModuleMethods(this[s]),len=methods.length,z=0;len>z;z++)this[s][methods[z]]=this[s][methods[z]].bind(this);if("undefined"!=typeof this[s].langs){var lang={};"undefined"!=typeof this[s].langs[this.opts.lang]?lang=this[s].langs[this.opts.lang]:"undefined"==typeof this[s].langs[this.opts.lang]&&"undefined"!=typeof this[s].langs.en&&(lang=this[s].langs.en);var self=this;$.each(lang,function(i,s){"undefined"==typeof self.opts.curLang[i]&&(self.opts.curLang[i]=s)})}$.isFunction(this[s].init)&&this[s].init()}},this))}}},button:function(){return{toolbar:function(){return"undefined"!=typeof this.button.$toolbar&&this.button.$toolbar?this.button.$toolbar:this.$toolbar},init:function(){return{format:{title:this.lang.get("format"),dropdown:{p:{title:this.lang.get("paragraph"),func:"block.format"},blockquote:{title:this.lang.get("quote"),func:"block.format"},pre:{title:this.lang.get("code"),func:"block.format"},h1:{title:this.lang.get("heading1"),func:"block.format"},h2:{title:this.lang.get("heading2"),func:"block.format"},h3:{title:this.lang.get("heading3"),func:"block.format"},h4:{title:this.lang.get("heading4"),func:"block.format"},h5:{title:this.lang.get("heading5"),func:"block.format"},h6:{title:this.lang.get("heading6"),func:"block.format"}}},bold:{title:this.lang.get("bold-abbr"),label:this.lang.get("bold"),func:"inline.format"},italic:{title:this.lang.get("italic-abbr"),label:this.lang.get("italic"),func:"inline.format"},deleted:{title:this.lang.get("deleted-abbr"),label:this.lang.get("deleted"),func:"inline.format"},underline:{title:this.lang.get("underline-abbr"),label:this.lang.get("underline"),func:"inline.format"},lists:{title:this.lang.get("lists"),dropdown:{unorderedlist:{title:"&bull; "+this.lang.get("unorderedlist"),func:"list.toggle"},orderedlist:{title:"1. "+this.lang.get("orderedlist"),func:"list.toggle"},outdent:{title:"< "+this.lang.get("outdent"),func:"indent.decrease",observe:{element:"li",out:{attr:{"class":"redactor-dropdown-link-inactive","aria-disabled":!0}}}},indent:{title:"> "+this.lang.get("indent"),func:"indent.increase",observe:{element:"li",out:{attr:{"class":"redactor-dropdown-link-inactive","aria-disabled":!0}}}}}},ul:{title:"&bull; "+this.lang.get("bulletslist"),func:"list.toggle"},ol:{title:"1. "+this.lang.get("numberslist"),func:"list.toggle"},outdent:{title:this.lang.get("outdent"),func:"indent.decrease"},indent:{title:this.lang.get("indent"),func:"indent.increase"},image:{title:this.lang.get("image"),func:"image.show"},file:{title:this.lang.get("file"),func:"file.show"},link:{title:this.lang.get("link"),dropdown:{link:{title:this.lang.get("link-insert"),func:"link.show",observe:{element:"a","in":{title:this.lang.get("link-edit")},out:{title:this.lang.get("link-insert")}}},unlink:{title:this.lang.get("unlink"),func:"link.unlink",observe:{element:"a",out:{attr:{"class":"redactor-dropdown-link-inactive","aria-disabled":!0}}}}}},horizontalrule:{title:this.lang.get("horizontalrule"),func:"line.insert"}}},setFormatting:function(){$.each(this.toolbarsButtons.format.dropdown,$.proxy(function(i,s){-1===$.inArray(i,this.opts.formatting)&&delete this.toolbarsButtons.format.dropdown[i]},this))},hideButtons:function(){0!==this.opts.buttonsHide.length&&this.button.hideButtonsSlicer(this.opts.buttonsHide)},hideButtonsOnMobile:function(){this.detect.isMobile()&&0!==this.opts.buttonsHideOnMobile.length&&this.button.hideButtonsSlicer(this.opts.buttonsHideOnMobile)},hideButtonsSlicer:function(buttons){$.each(buttons,$.proxy(function(i,s){var index=this.opts.buttons.indexOf(s);this.opts.buttons.splice(index,1)},this))},load:function($toolbar){this.button.buttons=[],$.each(this.opts.buttons,$.proxy(function(i,btnName){!this.toolbarsButtons[btnName]||"file"===btnName&&!this.file.is()||"image"===btnName&&!this.image.is()||$toolbar.append($("<li>").append(this.button.build(btnName,this.toolbarsButtons[btnName])))},this))},build:function(btnName,btnObject){if(this.opts.toolbar!==!1){var $button=$('<a href="javascript:void(null);" class="re-button re-'+btnName+'" title="'+btnObject.title+'" rel="'+btnName+'" />').html(btnObject.title);if($button.attr({role:"button","aria-label":btnObject.title,tabindex:"-1"}),"undefined"!=typeof btnObject.label&&($button.attr("aria-label",btnObject.label),$button.attr("title",btnObject.label)),(btnObject.func||btnObject.command||btnObject.dropdown)&&this.button.setEvent($button,btnName,btnObject),btnObject.dropdown){$button.addClass("redactor-toolbar-link-dropdown").attr("aria-haspopup",!0);var $dropdown=$('<ul class="redactor-dropdown redactor-dropdown-'+this.uuid+" redactor-dropdown-box-"+btnName+'" style="display: none;">');$button.data("dropdown",$dropdown),this.dropdown.build(btnName,$dropdown,btnObject.dropdown)}return this.button.buttons.push($button),$button}},getButtons:function(){return this.button.toolbar().find("a.re-button")},getButtonsKeys:function(){return this.button.buttons},setEvent:function($button,btnName,btnObject){$button.on("mousedown",$.proxy(function(e){if(e.preventDefault(),$button.hasClass("redactor-button-disabled"))return!1;var type="func",callback=btnObject.func;return btnObject.command?(type="command",callback=btnObject.command):btnObject.dropdown&&(type="dropdown",callback=!1),this.button.toggle(e,btnName,type,callback),!1},this))},toggle:function(e,btnName,type,callback,args){(this.detect.isIe()||!this.detect.isDesktop())&&(this.utils.freezeScroll(),e.returnValue=!1),"command"===type?this.inline.format(callback):"dropdown"===type?this.dropdown.show(e,btnName):this.button.clickCallback(e,callback,btnName,args),"dropdown"!==type&&this.dropdown.hideAll(!1),this.opts.air&&"dropdown"!==type&&this.air.hide(e),(this.detect.isIe()||!this.detect.isDesktop())&&this.utils.unfreezeScroll()},clickCallback:function(e,callback,btnName,args){var func;if(args="undefined"==typeof args?btnName:args,$.isFunction(callback))callback.call(this,btnName);else if("-1"!==callback.search(/\./)){if(func=callback.split("."),"undefined"==typeof this[func[0]])return;"object"==typeof args?this[func[0]][func[1]].apply(this,args):this[func[0]][func[1]].call(this,args)}else"object"==typeof args?this[callback].apply(this,args):this[callback].call(this,args);this.observe.buttons(e,btnName)},all:function(){return this.button.buttons},get:function(key){return this.opts.toolbar!==!1?this.button.toolbar().find("a.re-"+key):void 0},set:function(key,title){if(this.opts.toolbar!==!1){var $btn=this.button.toolbar().find("a.re-"+key);return $btn.html(title).attr("aria-label",title),$btn}},add:function(key,title){if(this.opts.toolbar!==!1){var btn=this.button.build(key,{title:title});return this.button.toolbar().append($("<li>").append(btn)),btn}},addFirst:function(key,title){if(this.opts.toolbar!==!1){var btn=this.button.build(key,{title:title});return this.button.toolbar().prepend($("<li>").append(btn)),btn}},addAfter:function(afterkey,key,title){if(this.opts.toolbar!==!1){var btn=this.button.build(key,{title:title}),$btn=this.button.get(afterkey);return 0!==$btn.length?$btn.parent().after($("<li>").append(btn)):this.button.toolbar().append($("<li>").append(btn)),btn}},addBefore:function(beforekey,key,title){if(this.opts.toolbar!==!1){var btn=this.button.build(key,{title:title}),$btn=this.button.get(beforekey);return 0!==$btn.length?$btn.parent().before($("<li>").append(btn)):this.button.toolbar().append($("<li>").append(btn)),btn}},setIcon:function($btn,icon){$btn.html(icon)},addCallback:function($btn,callback){if("undefined"!=typeof $btn&&this.opts.toolbar!==!1){var type="dropdown"===callback?"dropdown":"func",key=$btn.attr("rel");$btn.on("mousedown",$.proxy(function(e){return $btn.hasClass("redactor-button-disabled")?!1:void this.button.toggle(e,key,type,callback)},this))}},addDropdown:function($btn,dropdown){if(this.opts.toolbar!==!1){$btn.addClass("redactor-toolbar-link-dropdown").attr("aria-haspopup",!0);var key=$btn.attr("rel");this.button.addCallback($btn,"dropdown");var $dropdown=$('<div class="redactor-dropdown redactor-dropdown-'+this.uuid+" redactor-dropdown-box-"+key+'" style="display: none;">');return $btn.data("dropdown",$dropdown),dropdown&&this.dropdown.build(key,$dropdown,dropdown),$dropdown}},setActive:function(key){this.button.get(key).addClass("redactor-act")},setInactive:function(key){this.button.get(key).removeClass("redactor-act")},setInactiveAll:function(key){var $btns=this.button.toolbar().find("a.re-button");"undefined"!=typeof key&&($btns=$btns.not(".re-"+key)),$btns.removeClass("redactor-act")},disable:function(key){this.button.get(key).addClass("redactor-button-disabled")},enable:function(key){this.button.get(key).removeClass("redactor-button-disabled")},disableAll:function(key){var $btns=this.button.toolbar().find("a.re-button");"undefined"!=typeof key&&($btns=$btns.not(".re-"+key)),$btns.addClass("redactor-button-disabled")},enableAll:function(){this.button.toolbar().find("a.re-button").removeClass("redactor-button-disabled")},remove:function(key){this.button.get(key).remove()}}},caret:function(){return{set:function(node1,node2,end){this.core.editor().focus(),end="undefined"==typeof end?0:1,node1=node1[0]||node1,node2=node2[0]||node2;var sel=this.selection.get(),range=this.selection.range(sel);try{range.setStart(node1,0),range.setEnd(node2,end)}catch(e){}this.selection.update(sel,range)},prepare:function(node){return this.detect.isFirefox()&&"undefined"!=typeof this.start&&this.core.editor().focus(),node[0]||node},start:function(node){var sel,range;if(node=this.caret.prepare(node)){if("BR"===node.tagName)return this.caret.before(node);var inline=this.utils.isInlineTag(node.tagName);if(""===node.innerHTML||inline){range=document.createRange();var textNode=document.createTextNode("​");range.setStart(node,0),range.insertNode(textNode),range.setStartAfter(textNode),range.collapse(!0),sel=window.getSelection(),sel.removeAllRanges(),sel.addRange(range),inline||this.core.editor().on("keydown.redactor-remove-textnode",function(){$(textNode).remove(),$(this).off("keydown.redactor-remove-textnode")})}else sel=window.getSelection(),sel.removeAllRanges(),range=document.createRange(),range.selectNodeContents(node),range.collapse(!0),sel.addRange(range)}},end:function(node){var sel,range;if(node=this.caret.prepare(node)){if("BR"!==node.tagName&&""===node.innerHTML)return this.caret.start(node);if("BR"===node.tagName){var space=document.createElement("span");
return space.className="redactor-invisible-space",space.innerHTML="&#x200b;",$(node).after(space),sel=window.getSelection(),sel.removeAllRanges(),range=document.createRange(),range.setStartBefore(space),range.setEndBefore(space),sel.addRange(range),void $(space).replaceWith(function(){return $(this).contents()})}if(node.lastChild&&1===node.lastChild.nodeType)return this.caret.after(node.lastChild);sel=window.getSelection(),sel.removeAllRanges(),range=document.createRange(),range.selectNodeContents(node),range.collapse(!1),sel.addRange(range)}},after:function(node){var sel,range;if(node=this.caret.prepare(node)){if("BR"===node.tagName)return this.caret.end(node);if(this.utils.isBlockTag(node.tagName)){var next=this.caret.next(node);return void("undefined"==typeof next?this.caret.end(node):("TABLE"===next.tagName?next=$(next).find("th, td").first()[0]:("UL"===next.tagName||"OL"===next.tagName)&&(next=$(next).find("li").first()[0]),this.caret.start(next)))}var textNode=document.createTextNode("​");sel=window.getSelection(),sel.removeAllRanges(),range=document.createRange(),range.setStartAfter(node),range.insertNode(textNode),range.setStartAfter(textNode),range.collapse(!0),sel.addRange(range)}},before:function(node){var sel,range;if(node=this.caret.prepare(node)){if(this.utils.isBlockTag(node.tagName)){var prev=this.caret.prev(node);return void("undefined"==typeof prev?this.caret.start(node):("TABLE"===prev.tagName?prev=$(prev).find("th, td").last()[0]:("UL"===prev.tagName||"OL"===prev.tagName)&&(prev=$(prev).find("li").last()[0]),this.caret.end(prev)))}sel=window.getSelection(),sel.removeAllRanges(),range=document.createRange(),range.setStartBefore(node),range.collapse(!0),sel.addRange(range)}},next:function(node){var $next=$(node).next();return $next.hasClass("redactor-script-tag, redactor-selection-marker")?$next.next()[0]:$next[0]},prev:function(node){var $prev=$(node).prev();return $prev.hasClass("redactor-script-tag, redactor-selection-marker")?$prev.prev()[0]:$prev[0]},offset:function(node){return this.offset.get(node)}}},clean:function(){return{onSet:function(html){html=this.clean.savePreCode(html),html=this.clean.saveFormTags(html),this.opts.script&&(html=html.replace(/<script(.*?[^>]?)>([\w\W]*?)<\/script>/gi,'<pre class="redactor-script-tag" $1>$2</pre>')),html=html.replace(/\$/g,"&#36;"),html=html.replace(/&amp;/g,"&"),html=html.replace(/<a href="(.*?[^>]?)®(.*?[^>]?)">/gi,'<a href="$1&reg$2">'),html=html.replace(/<span(.*?[^>]?)id="selection-marker-1"(.*?[^>]?)>​<\/span>/gi,"[[[marker1]]]"),html=html.replace(/<span(.*?[^>]?)id="selection-marker-2"(.*?[^>]?)>​<\/span>/gi,"[[[marker2]]]");var self=this,$div=$("<div/>").html($.parseHTML(html,document,!0)),replacement={b:"strong",i:"em",strike:"del"};$div.find("b, i, strike").each(function(i,s){self.utils.replaceToTag(s,replacement[s.tagName.toLowerCase()])}),html=$div.html();var tags=["font","html","head","link","body","meta","applet","span"];return this.opts.script||tags.push("script"),html=this.clean.stripTags(html,tags),html=html.replace(/<!--[\s\S]*?-->/gi,""),html=this.paragraphize.load(html),html=html.replace("[[[marker1]]]",'<span id="selection-marker-1" class="redactor-selection-marker">​</span>'),html=html.replace("[[[marker2]]]",'<span id="selection-marker-2" class="redactor-selection-marker">​</span>'),-1!==html.search(/^(||\s||<br\s?\/?>||&nbsp;)$/i)?this.opts.emptyHtml:html},onGet:function(html){return this.clean.onSync(html)},onSync:function(html){if(html=html.replace(/\u200B/g,""),html=html.replace(/&#x200b;/gi,""),-1!==html.search(/^<p>(||\s||<br\s?\/?>||&nbsp;)<\/p>$/i))return"";var $div=$("<div/>").html($.parseHTML(html,document,!0));$div.find('*[style=""]').removeAttr("style"),$div.find('*[class=""]').removeAttr("class"),$div.find('*[rel=""]').removeAttr("rel"),$div.find(".redactor-invisible-space").each(function(){$(this).contents().unwrap()}),$div.find("span").each(function(){$(this).contents().unwrap()}),$div.find(".redactor-selection-marker, #redactor-insert-marker").remove(),html=$div.html(),this.opts.script&&(html=html.replace(/<pre class="redactor-script-tag"(.*?[^>]?)>([\w\W]*?)<\/pre>/gi,"<script$1>$2</script>")),html=this.clean.restoreFormTags(html),html=html.replace(new RegExp("<br\\s?/?></h","gi"),"</h"),html=html.replace(new RegExp("<br\\s?/?></li>","gi"),"</li>"),html=html.replace(new RegExp("</li><br\\s?/?>","gi"),"</li>"),html=html.replace(/<pre>/gi,"<pre>\n"),this.opts.preClass&&(html=html.replace(/<pre>/gi,'<pre class="'+this.opts.preClass+'">')),this.opts.linkNofollow&&(html=html.replace(/<a(.*?)rel="nofollow"(.*?[^>])>/gi,"<a$1$2>"),html=html.replace(/<a(.*?[^>])>/gi,'<a$1 rel="nofollow">'));var chars={"™":"&trade;","©":"&copy;","…":"&hellip;","—":"&mdash;","‐":"&dash;"};return $.each(chars,function(i,s){html=html.replace(new RegExp(i,"g"),s)}),html=html.replace(/&amp;/g,"&"),html=html.replace(/<p><\/p>/gi,"")},onPaste:function(html,data,insert){if(insert!==!0){var msword=this.clean.isHtmlMsWord(html);msword&&(html=this.clean.cleanMsWord(html))}return html=$.trim(html),data.pre?this.opts.preSpaces&&(html=html.replace(/\t/g,new Array(this.opts.preSpaces+1).join(" "))):(html=this.clean.replaceBrToNl(html),html=this.clean.removeTagsInsidePre(html)),insert!==!0&&(html=this.clean.removeSpans(html),html=this.clean.removeEmptyInlineTags(html),data.encode===!1&&(html=html.replace(/&/g,"&amp;"),html=this.clean.convertTags(html,data),html=this.clean.getPlainText(html),html=this.clean.reconvertTags(html,data))),data.text&&(html=this.clean.replaceNbspToSpaces(html),html=this.clean.getPlainText(html)),data.lists&&(html=html.replace("\n","<br>")),data.encode&&(html=this.clean.encodeHtml(html)),data.paragraphize&&(html=this.paragraphize.load(html)),html},getCurrentType:function(html,insert){var blocks=this.selection.blocks(),data={text:!1,encode:!1,paragraphize:!0,line:this.clean.isHtmlLine(html),blocks:this.clean.isHtmlBlocked(html),pre:!1,lists:!1,block:!0,inline:!0,links:!0,images:!0};return 1===blocks.length&&this.utils.isCurrentOrParent(["h1","h2","h3","h4","h5","h6","a","figcaption"])?(data.text=!0,data.paragraphize=!1,data.inline=!1,data.images=!1,data.links=!1,data.line=!0):"inline"===this.opts.type||this.opts.enterKey===!1?(data.paragraphize=!1,data.block=!1,data.line=!0):1===blocks.length&&this.utils.isCurrentOrParent(["li"])?(data.lists=!0,data.block=!1,data.paragraphize=!1,data.images=!1):1===blocks.length&&this.utils.isCurrentOrParent(["th","td","blockquote"])?(data.block=!1,data.paragraphize=!1):("pre"===this.opts.type||1===blocks.length&&this.utils.isCurrentOrParent("pre"))&&(data.inline=!1,data.block=!1,data.encode=!0,data.pre=!0,data.paragraphize=!1,data.images=!1,data.links=!1),data.line===!0&&(data.paragraphize=!1),insert===!0&&(data.text=!1),data},isHtmlBlocked:function(html){var match1=html.match(new RegExp("</("+this.opts.blockTags.join("|").toUpperCase()+")>","gi")),match2=html.match(new RegExp("<hr(.*?[^>])>","gi"));return null===match1&&null===match2?!1:!0},isHtmlLine:function(html){if(this.clean.isHtmlBlocked(html))return!1;var matchBR=html.match(/<br\s?\/?>/gi),matchNL=html.match(/\n/gi);return matchBR||matchNL?!1:!0},isHtmlMsWord:function(html){return html.match(/class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i)},removeEmptyInlineTags:function(html){for(var tags=this.opts.inlineTags,len=tags.length,i=0;len>i;i++)html=html.replace(new RegExp("<"+tags[i]+"[^>]*>(s\n|	)?</"+tags[i]+">","gi"),"");return html},removeSpans:function(html){return html=html.replace(/<\/span>/gi,""),html=html.replace(/<span[^>]*>/gi,"")},cleanMsWord:function(html){return html=html.replace(/\n/g," "),html=html.replace(/<br\s?\/?>|<\/p>|<\/div>|<\/li>|<\/td>/gi,"\n\n")},replaceNbspToSpaces:function(html){return html.replace("&nbsp;"," ")},replaceBrToNl:function(html){return html.replace(/<br\s?\/?>/gi,"\n")},replaceNlToBr:function(html){return html.replace(/\n/g,"<br />")},convertTags:function(html,data){if(data.links&&this.opts.pasteLinks&&(html=html.replace(/<a(.*?)href="(.*?)"(.*?)>(.*?)<\/a>/gi,'###a href="$2"###$4###/a###')),data.images&&this.opts.pasteImages&&(html=html.replace(/<img src="(.*?)"(.*?[^>])>/gi,'###img src="$1"###')),this.opts.pastePlainText)return html;var tags,blockTags=data.lists?["ul","ol","li"]:this.opts.pasteBlockTags;tags=data.block||data.lists?data.inline?blockTags.concat(this.opts.pasteInlineTags):blockTags:data.inline?this.opts.pasteInlineTags:[];for(var len=tags.length,i=0;len>i;i++)html=html.replace(new RegExp("</"+tags[i]+">","gi"),"###/"+tags[i]+"###"),html="td"===tags[i]||"th"===tags[i]?html.replace(new RegExp("<"+tags[i]+'(.*?[^>])((colspan|rowspan)="(.*?[^>])")?(.*?[^>])>',"gi"),"###"+tags[i]+" $2###"):html.replace(new RegExp("<"+tags[i]+"[^>]*>","gi"),"###"+tags[i]+"###");return html},reconvertTags:function(html,data){if(data.links&&this.opts.pasteLinks&&(html=html.replace(/###a href="(.*?)"###(.*?)###\/a###/gi,'<a href="$1">$2</a>')),data.images&&this.opts.pasteImages&&(html=html.replace(/###img src="(.*?)"###/gi,'<img src="$1">')),this.opts.pastePlainText)return html;var tags,blockTags=data.lists?["ul","ol","li"]:this.opts.pasteBlockTags;tags=data.block||data.lists?data.inline?blockTags.concat(this.opts.pasteInlineTags):blockTags:data.inline?this.opts.pasteInlineTags:[];for(var len=tags.length,i=0;len>i;i++)html=html.replace(new RegExp("###/"+tags[i]+"###","gi"),"</"+tags[i]+">"),html="td"===tags[i]||"th"===tags[i]?html.replace(new RegExp("###"+tags[i]+"s?(.*?[^#])###","gi"),"<"+tags[i]+"$1>"):html.replace(new RegExp("###"+tags[i]+"###","gi"),"<"+tags[i]+">");return html},cleanPre:function(block){block="undefined"==typeof block?$(this.selection.block()).closest("pre",this.core.editor()[0]):block,$(block).find("br").replaceWith(function(){return document.createTextNode("\n")}),$(block).find("p").replaceWith(function(){return $(this).contents()})},removeTagsInsidePre:function(html){var $div=$("<div />").append(html);return $div.find("pre").replaceWith(function(){var str=$(this).html();return str=str.replace(/<br\s?\/?>|<\/p>|<\/div>|<\/li>|<\/td>/gi,"\n"),str=str.replace(/(<([^>]+)>)/gi,""),$("<pre />").append(str)}),html=$div.html(),$div.remove(),html},getPlainText:function(html){html=html.replace(/<!--[\s\S]*?-->/gi,""),html=html.replace(/<style[\s\S]*?style>/gi,""),html=html.replace(/<\/p>|<\/div>|<\/li>|<\/td>/gi,"\n"),html=html.replace(/<\/H[1-6]>/gi,"\n\n");var tmp=document.createElement("div");return tmp.innerHTML=html,html=tmp.textContent||tmp.innerText,$.trim(html)},savePreCode:function(html){return html=this.clean.savePreFormatting(html),html=this.clean.saveCodeFormatting(html),html=this.clean.restoreSelectionMarkers(html)},savePreFormatting:function(html){var pre=html.match(/<pre(.*?)>([\w\W]*?)<\/pre>/gi);return null===pre?html:($.each(pre,$.proxy(function(i,s){var arr=s.match(/<pre(.*?)>([\w\W]*?)<\/pre>/i);arr[2]=arr[2].replace(/<br\s?\/?>/g,"\n"),arr[2]=arr[2].replace(/&nbsp;/g," "),this.opts.preSpaces&&(arr[2]=arr[2].replace(/\t/g,new Array(this.opts.preSpaces+1).join(" "))),arr[2]=this.clean.encodeEntities(arr[2]),arr[2]=arr[2].replace(/\$/g,"&#36;"),html=html.replace(s,"<pre"+arr[1]+">"+arr[2]+"</pre>")},this)),html)},saveCodeFormatting:function(html){var code=html.match(/<code(.*?)>([\w\W]*?)<\/code>/gi);return null===code?html:($.each(code,$.proxy(function(i,s){var arr=s.match(/<code(.*?)>([\w\W]*?)<\/code>/i);arr[2]=arr[2].replace(/&nbsp;/g," "),arr[2]=this.clean.encodeEntities(arr[2]),arr[2]=arr[2].replace(/\$/g,"&#36;"),html=html.replace(s,"<code"+arr[1]+">"+arr[2]+"</code>")},this)),html)},restoreSelectionMarkers:function(html){return html=html.replace(/&lt;span id=&quot;selection-marker-([0-9])&quot; class=&quot;redactor-selection-marker&quot;&gt;​&lt;\/span&gt;/g,'<span id="selection-marker-$1" class="redactor-selection-marker">​</span>')},saveFormTags:function(html){return html.replace(/<form(.*?)>([\w\W]*?)<\/form>/gi,'<section$1 rel="redactor-form-tag">$2</section>')},restoreFormTags:function(html){return html.replace(/<section(.*?) rel="redactor-form-tag"(.*?)>([\w\W]*?)<\/section>/gi,"<form$1$2>$3</form>")},encodeHtml:function(html){return html=html.replace(/”/g,'"'),html=html.replace(/“/g,'"'),html=html.replace(/‘/g,"'"),html=html.replace(/’/g,"'"),html=this.clean.encodeEntities(html)},encodeEntities:function(str){return str=String(str).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),str=str.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},stripTags:function(input,denied){if("undefined"==typeof denied)return input.replace(/(<([^>]+)>)/gi,"");var tags=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return input.replace(tags,function($0,$1){return-1===denied.indexOf($1.toLowerCase())?$0:""})},removeMarkers:function(html){return html.replace(/<span(.*?[^>]?)class="redactor-selection-marker"(.*?[^>]?)>([\w\W]*?)<\/span>/gi,"")},removeSpaces:function(html){return html=$.trim(html),html=html.replace(/\n/g,""),html=html.replace(/[\t]*/g,""),html=html.replace(/\n\s*\n/g,"\n"),html=html.replace(/^[\s\n]*/g," "),html=html.replace(/[\s\n]*$/g," "),html=html.replace(/>\s{2,}</g,"> <"),html=html.replace(/\n\n/g,"\n"),html=html.replace(/\u200B/g,"")},removeSpacesHard:function(html){return html=$.trim(html),html=html.replace(/\n/g,""),html=html.replace(/[\t]*/g,""),html=html.replace(/\n\s*\n/g,"\n"),html=html.replace(/^[\s\n]*/g,""),html=html.replace(/[\s\n]*$/g,""),html=html.replace(/>\s{2,}</g,"><"),html=html.replace(/\n\n/g,"\n"),html=html.replace(/\u200B/g,"")},normalizeCurrentHeading:function(){var heading=this.selection.block();this.utils.isCurrentOrParentHeader()&&heading&&heading.normalize()}}},code:function(){return{syncFire:!0,html:!1,start:function(html){html=$.trim(html),"textarea"===this.opts.type?html=this.clean.onSet(html):"div"===this.opts.type&&""===html&&(html=this.opts.emptyHtml),this.events.stopDetectChanges(),this.core.editor().html(html),this.observe.load(),this.events.startDetectChanges()},set:function(html){html=$.trim(html),"textarea"===this.opts.type?html=this.clean.onSet(html):"div"===this.opts.type&&""===html&&(html=this.opts.emptyHtml),this.core.editor().html(html),"textarea"===this.opts.type&&this.core.textarea().val(this.clean.onSync(html)),this.placeholder.enable()},get:function(){if("textarea"===this.opts.type)return this.core.textarea().val();var html=this.core.editor().html();return html=this.clean.onGet(html)},sync:function(){if(this.code.syncFire){var html=this.core.editor().html(),htmlCleaned=this.code.cleaned(html);if(!this.code.isSync(htmlCleaned))return this.code.html=htmlCleaned,"textarea"!==this.opts.type?(this.core.callback("sync",html),void this.core.callback("change",html)):void("textarea"===this.opts.type&&setTimeout($.proxy(function(){this.code.startSync(html)},this),10))}},startSync:function(html){html=this.core.callback("syncBefore",html),html=this.clean.onSync(html),this.core.textarea().val(html),this.core.callback("sync",html),this.start===!1&&this.core.callback("change",html),this.start=!1},isSync:function(htmlCleaned){var html=this.code.html!==!1?this.code.html:!1;return html!==!1&&html===htmlCleaned},cleaned:function(html){return html=html.replace(/\u200B/g,""),this.clean.removeMarkers(html)}}},core:function(){return{id:function(){return this.$editor.attr("id")},element:function(){return this.$element},editor:function(){return"undefined"==typeof this.$editor?$():this.$editor},textarea:function(){return this.$textarea},box:function(){return"textarea"===this.opts.type?this.$box:this.$element},toolbar:function(){return this.$toolbar?this.$toolbar:!1},air:function(){return this.$air?this.$air:!1},object:function(){return $.extend({},this)},structure:function(){this.core.editor().toggleClass("redactor-structure")},addEvent:function(name){this.core.event=name},getEvent:function(){return this.core.event},callback:function(type,e,data){var eventNamespace="redactor",returnValue=!1,events=$._data(this.core.element()[0],"events");if("undefined"!=typeof events&&"undefined"!=typeof events[type])for(var len=events[type].length,i=0;len>i;i++){var namespace=events[type][i].namespace;if(namespace==="callback."+eventNamespace){var handler=events[type][i].handler,args="undefined"==typeof data?[e]:[e,data];returnValue="undefined"==typeof args?handler.call(this,e):handler.call(this,e,args)}}if(returnValue)return returnValue;if("undefined"==typeof this.opts.callbacks[type])return"undefined"==typeof data?e:data;var callback=this.opts.callbacks[type];return $.isFunction(callback)?"undefined"==typeof data?callback.call(this,e):callback.call(this,e,data):"undefined"==typeof data?e:data},destroy:function(){this.opts.destroyed=!0,this.core.callback("destroy"),this.placeholder.destroy(),this.progress.destroy(),$("#redactor-voice-"+this.uuid).remove(),this.core.editor().removeClass("redactor-in redactor-structure"),this.core.editor().off("keydown.redactor-remove-textnode"),this.core.editor().off(".redactor-observe."+this.uuid),this.$element.off(".redactor").removeData("redactor"),this.core.editor().off(".redactor"),$(document).off(".redactor-dropdown"),$(document).off(".redactor-air."+this.uuid),$(document).off("mousedown.redactor-blur."+this.uuid),$(document).off("mousedown.redactor."+this.uuid),$(document).off("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid),$(window).off(".redactor-toolbar."+this.uuid),$(window).off("touchmove.redactor."+this.uuid),$("body").off("scroll.redactor."+this.uuid),$(this.opts.toolbarFixedTarget).off("scroll.redactor."+this.uuid);var self=this;this.opts.plugins!==!1&&$.each(this.opts.plugins,function(i,s){$(window).off(".redactor-plugin-"+s),$(document).off(".redactor-plugin-"+s),$("body").off(".redactor-plugin-"+s),self.core.editor().off(".redactor-plugin-"+s)}),this.$element.off("click.redactor-click-to-edit"),this.$element.removeClass("redactor-click-to-edit"),this.core.editor().removeClass("redactor-editor"),this.core.editor().removeAttr("contenteditable");var html=this.code.get();this.opts.toolbar&&this.$toolbar&&this.$toolbar.find("a").each(function(){var $el=$(this);$el.data("dropdown")&&($el.data("dropdown").remove(),$el.data("dropdown",{}))}),"textarea"===this.opts.type&&(this.$box.after(this.$element),this.$box.remove(),this.$element.val(html).show()),this.opts.air&&this.$air.remove(),this.opts.toolbar&&this.$toolbar&&this.$toolbar.remove(),this.$modalBox&&this.$modalBox.remove(),this.$modalOverlay&&this.$modalOverlay.remove(),$(".redactor-link-tooltip").remove(),clearInterval(this.autosaveTimeout)}}},detect:function(){return{isWebkit:function(){return/webkit/.test(this.opts.userAgent)},isFirefox:function(){return this.opts.userAgent.indexOf("firefox")>-1},isIe:function(v){var ie;return ie=RegExp("msie"+(isNaN(v)?"":"\\s"+v),"i").test(navigator.userAgent),ie||(ie=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./)),ie},isMobile:function(){return/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)},isDesktop:function(){return!/(iPhone|iPod|iPad|BlackBerry|Android)/.test(navigator.userAgent)},isIpad:function(){return/iPad/.test(navigator.userAgent)}}},dropdown:function(){return{active:!1,button:!1,key:!1,position:[],getDropdown:function(){return this.dropdown.active},build:function(name,$dropdown,dropdownObject){dropdownObject=this.dropdown.buildFormatting(name,dropdownObject),$.each(dropdownObject,$.proxy(function(btnName,btnObject){var $item=this.dropdown.buildItem(btnName,btnObject);this.observe.addDropdown($item,btnName,btnObject),$dropdown.attr("rel",name).append($item)},this))},buildFormatting:function(name,dropdownObject){return"format"!==name||this.opts.formattingAdd===!1?dropdownObject:($.each(this.opts.formattingAdd,$.proxy(function(i,s){var type=this.utils.isBlockTag(s.args[0])?"block":"inline";dropdownObject[i]={func:"block"===type?"block.format":"inline.format",args:s.args,title:s.title}},this)),dropdownObject)},buildItem:function(btnName,btnObject){var $itemContainer=$("<li />");if("undefined"!=typeof btnObject.classname&&$itemContainer.addClass(btnObject.classname),-1!==btnName.search(/^divider/i))return $itemContainer.addClass("redactor-dropdown-divider"),$itemContainer;var $item=$('<a href="#" class="redactor-dropdown-'+btnName+'" role="button" />'),$itemSpan=$("<span />").html(btnObject.title);return $item.append($itemSpan),$item.on("mousedown",$.proxy(function(e){e.preventDefault(),this.dropdown.buildClick(e,btnName,btnObject)},this)),$itemContainer.append($item),$itemContainer},buildClick:function(e,btnName,btnObject){if(!$(e.target).hasClass("redactor-dropdown-link-inactive")){var command=this.dropdown.buildCommand(btnObject);" undefined"!=typeof btnObject.args?this.button.toggle(e,btnName,command.type,command.callback,btnObject.args):this.button.toggle(e,btnName,command.type,command.callback)}},buildCommand:function(btnObject){var command={};return command.type="func",command.callback=btnObject.func,btnObject.command?(command.type="command",command.callback=btnObject.command):btnObject.dropdown&&(command.type="dropdown",command.callback=btnObject.dropdown),command},show:function(e,key){return this.detect.isDesktop()&&this.core.editor().focus(),this.dropdown.hideAll(!1,key),this.dropdown.key=key,this.dropdown.button=this.button.get(this.dropdown.key),this.dropdown.button.hasClass("dropact")?void this.dropdown.hide():(this.dropdown.active=this.dropdown.button.data("dropdown").appendTo(document.body),this.core.callback("dropdownShow",{dropdown:this.dropdown.active,key:this.dropdown.key,button:this.dropdown.button}),this.button.setActive(this.dropdown.key),this.dropdown.button.addClass("dropact"),this.dropdown.getButtonPosition(),this.button.toolbar().hasClass("toolbar-fixed-box")&&this.detect.isDesktop()?this.dropdown.showIsFixedToolbar():this.dropdown.showIsUnFixedToolbar(),this.detect.isDesktop()&&!this.detect.isFirefox()&&(this.dropdown.active.on("mouseover.redactor-dropdown",$.proxy(this.utils.disableBodyScroll,this)),this.dropdown.active.on("mousedown.redactor-dropdown",$.proxy(this.utils.enableBodyScroll,this))),void e.stopPropagation())},showIsFixedToolbar:function(){var top=this.dropdown.button.position().top+this.dropdown.button.innerHeight()+this.opts.toolbarFixedTopOffset,position="fixed";this.opts.toolbarFixedTarget!==document&&(top=this.dropdown.button.innerHeight()+this.$toolbar.offset().top+this.opts.toolbarFixedTopOffset,position="absolute"),this.dropdown.active.css({position:position,left:this.dropdown.position.left+"px",top:top+"px"}).show(),this.dropdown.active.redactorAnimation("slideDown",{duration:.2},$.proxy(function(){this.dropdown.enableCallback(),this.dropdown.enableEvents()},this))},showIsUnFixedToolbar:function(){this.dropdown.active.css({position:"absolute",left:this.dropdown.position.left+"px",top:this.dropdown.button.innerHeight()+this.dropdown.position.top+"px"}).show(),this.dropdown.active.redactorAnimation(this.opts.animation?"slideDown":"show",{duration:.2},$.proxy(function(){this.dropdown.enableCallback(),this.dropdown.enableEvents()},this))},enableEvents:function(){$(document).on("mousedown.redactor-dropdown",$.proxy(this.dropdown.hideAll,this)),this.core.editor().on("touchstart.redactor-dropdown",$.proxy(this.dropdown.hideAll,this)),$(document).on("keyup.redactor-dropdown",$.proxy(this.dropdown.closeHandler,this))},enableCallback:function(){this.core.callback("dropdownShown",{dropdown:this.dropdown.active,key:this.dropdown.key,button:this.dropdown.button})},getButtonPosition:function(){this.dropdown.position=this.dropdown.button.offset();var dropdownWidth=this.dropdown.active.width();this.dropdown.position.left+dropdownWidth>$(document).width()&&(this.dropdown.position.left=Math.max(0,this.dropdown.position.left-dropdownWidth+parseInt(this.dropdown.button.innerWidth())))},closeHandler:function(e){e.which===this.keyCode.ESC&&(this.dropdown.hideAll(e),this.core.editor().focus())},hideAll:function(e,key){if(this.detect.isDesktop()&&this.utils.enableBodyScroll(),e===!1||0===$(e.target).closest(".redactor-dropdown").length){var $buttons="undefined"==typeof key?this.button.toolbar().find("a.dropact"):this.button.toolbar().find("a.dropact").not(".re-"+key),$elements="undefined"==typeof key?$(".redactor-dropdown-"+this.uuid):$(".redactor-dropdown-"+this.uuid).not(".redactor-dropdown-box-"+key);0!==$elements.length&&($(document).off(".redactor-dropdown"),this.core.editor().off(".redactor-dropdown"),$.each($elements,$.proxy(function(i,s){var $el=$(s);this.core.callback("dropdownHide",$el),$el.hide(),$el.off("mouseover mouseout").off(".redactor-dropdown")},this)),$buttons.removeClass("redactor-act dropact"))}},hide:function(){this.dropdown.active!==!1&&(this.detect.isDesktop()&&this.utils.enableBodyScroll(),this.dropdown.active.redactorAnimation(this.opts.animation?"slideUp":"hide",{duration:.2},$.proxy(function(){$(document).off(".redactor-dropdown"),this.core.editor().off(".redactor-dropdown"),this.dropdown.hideOut()},this)))},hideOut:function(){this.core.callback("dropdownHide",this.dropdown.active),this.dropdown.button.removeClass("redactor-act dropact"),this.dropdown.active.off("mouseover mouseout").off(".redactor-dropdown"),this.dropdown.button=!1,this.dropdown.key=!1,this.dropdown.active=!1}}},events:function(){return{focused:!1,blured:!0,dropImage:!1,stopChanges:!1,stopDetectChanges:function(){this.events.stopChanges=!0},startDetectChanges:function(){var self=this;setTimeout(function(){self.events.stopChanges=!1},1)},dragover:function(e){e.preventDefault(),e.stopPropagation(),"IMG"===e.target.tagName&&$(e.target).addClass("redactor-image-dragover")},dragleave:function(e){this.core.editor().find("img").removeClass("redactor-image-dragover")},drop:function(e){return e=e.originalEvent||e,this.core.editor().find("img").removeClass("redactor-image-dragover"),"inline"===this.opts.type||"pre"===this.opts.type?(e.preventDefault(),!1):void 0!==window.FormData&&e.dataTransfer?0===e.dataTransfer.files.length?this.events.onDrop(e):(this.events.onDropUpload(e),void this.core.callback("drop",e)):!0},click:function(e){var event=this.core.getEvent(),type="click"===event||"arrow"===event?!1:"click";this.core.addEvent(type),this.utils.disableSelectAll(),this.core.callback("click",e)},focus:function(e){if(!this.rtePaste&&(this.events.isCallback("focus")&&this.core.callback("focus",e),this.events.focused=!0,this.events.blured=!1,this.selection.current()===!1)){var sel=this.selection.get(),range=this.selection.range(sel);range.setStart(this.core.editor()[0],0),range.setEnd(this.core.editor()[0],0),this.selection.update(sel,range)}},blur:function(e){this.start||this.rtePaste||0===$(e.target).closest("#"+this.core.id()+", .redactor-toolbar, .redactor-dropdown, #redactor-modal-box").size()&&(!this.events.blured&&this.events.isCallback("blur")&&this.core.callback("blur",e),this.events.focused=!1,this.events.blured=!0)},touchImageEditing:function(){var scrollTimer=-1;this.events.imageEditing=!1,$(window).on("touchmove.redactor."+this.uuid,$.proxy(function(){this.events.imageEditing=!0,-1!==scrollTimer&&clearTimeout(scrollTimer),scrollTimer=setTimeout($.proxy(function(){this.events.imageEditing=!1},this),500)},this))},init:function(){this.core.editor().on("dragover.redactor dragenter.redactor",$.proxy(this.events.dragover,this)),this.core.editor().on("dragleave.redactor",$.proxy(this.events.dragleave,this)),this.core.editor().on("drop.redactor",$.proxy(this.events.drop,this)),this.core.editor().on("click.redactor",$.proxy(this.events.click,this)),this.core.editor().on("paste.redactor",$.proxy(this.paste.init,this)),this.core.editor().on("keydown.redactor",$.proxy(this.keydown.init,this)),this.core.editor().on("keyup.redactor",$.proxy(this.keyup.init,this)),this.core.editor().on("focus.redactor",$.proxy(this.events.focus,this)),$(document).on("mousedown.redactor-blur."+this.uuid,$.proxy(this.events.blur,this)),this.events.touchImageEditing(),this.events.createObserver(),this.events.setupObserver()},createObserver:function(){var self=this;this.events.observer=new MutationObserver(function(mutations){mutations.forEach($.proxy(self.events.iterateObserver,self))})},iterateObserver:function(mutation){var stop=!1;this.observe.load(),"textarea"!==this.opts.type&&"div"!==this.opts.type||mutation.target!==this.core.editor()[0]||(stop=!0),stop||this.events.changeHandler()},setupObserver:function(){this.events.observer.observe(this.core.editor()[0],{attributes:!0,subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0})},changeHandler:function(){this.events.stopChanges||(this.code.sync(),this.autosave.is()&&(clearTimeout(this.autosaveTimeout),this.autosaveTimeout=setTimeout($.proxy(this.autosave.send,this),300)))},onDropUpload:function(e){if(e.preventDefault(),e.stopPropagation(),(this.opts.dragImageUpload||this.opts.dragFileUpload)&&(null!==this.opts.imageUpload||null!==this.opts.fileUpload)){"IMG"===e.target.tagName&&(this.events.dropImage=e.target);var files=e.dataTransfer.files;this.upload.directUpload(files[0],e)}},onDrop:function(e){this.core.callback("drop",e)},isCallback:function(name){return"undefined"!=typeof this.opts.callbacks[name]&&$.isFunction(this.opts.callbacks[name])},stopDetect:function(){this.events.stopDetectChanges()},startDetect:function(){this.events.startDetectChanges()}}},file:function(){return{is:function(){return!(!this.opts.fileUpload||!this.opts.fileUpload&&!this.opts.s3)},show:function(){this.modal.load("file",this.lang.get("file"),700),this.upload.init("#redactor-modal-file-upload",this.opts.fileUpload,this.file.insert),$("#redactor-filename").val(this.selection.get().toString()),this.modal.show()},insert:function(json,direct,e){if("undefined"!=typeof json.error)return this.modal.close(),void this.core.callback("fileUploadError",json);this.file.release(e,direct),this.buffer.set(),this.air.collapsed();var text=this.file.text(json),$link=$("<a />").attr("href",json.url).text(text),id="undefined"==typeof json.id?"":json.id,type="undefined"==typeof json.s3?"file":"s3";$link.attr("data-"+type,id),$link=$(this.insert.node($link)),this.caret.after($link),this.storage.add({type:type,node:$link[0],url:$link[0].href,id:id}),null!==direct&&this.core.callback("fileUpload",$link,json)},release:function(e,direct){direct?(this.marker.remove(),this.insert.nodeToPoint(e,this.marker.get()),this.selection.restore()):this.modal.close()},text:function(json){var text=$("#redactor-filename").val();return"undefined"==typeof text||""===text?json.name:text}}},focus:function(){return{start:function(){if(this.core.editor().focus(),"inline"!==this.opts.type){var $first=this.focus.first();$first!==!1&&this.caret.start($first)}},end:function(){this.core.editor().focus();var last=this.opts.inline?this.core.editor():this.focus.last();if(0!==last.length){var lastNode=this.focus.lastChild(last);if(this.detect.isWebkit()||lastNode===!1){var sel=this.selection.get(),range=this.selection.range(sel);null!==range?(range.selectNodeContents(last[0]),range.collapse(!1),this.selection.update(sel,range)):this.caret.end(last)}else this.caret.end(lastNode)}},first:function(){var $first=this.core.editor().children().first();return 0!==$first.length||0!==$first[0].length&&"BR"!==$first[0].tagName&&"HR"!==$first[0].tagName&&3!==$first[0].nodeType?"UL"===$first[0].tagName||"OL"===$first[0].tagName?$first.find("li").first():$first:!1},last:function(){return this.core.editor().children().last()},lastChild:function(last){var lastNode=last[0].lastChild;return null!==lastNode&&this.utils.isInlineTag(lastNode.tagName)?lastNode:!1},is:function(){return this.core.editor()[0]===document.activeElement}}},image:function(){return{is:function(){return!(!this.opts.imageUpload||!this.opts.imageUpload&&!this.opts.s3)},show:function(){this.modal.load("image",this.lang.get("image"),700),this.upload.init("#redactor-modal-image-droparea",this.opts.imageUpload,this.image.insert),this.modal.show()},insert:function(json,direct,e){var $img;if("undefined"!=typeof json.error)return this.modal.close(),
this.events.dropImage=!1,void this.core.callback("imageUploadError",json,e);if(this.events.dropImage!==!1)return $img=$(this.events.dropImage),this.core.callback("imageDelete",$img[0].src,$img),$img.attr("src",json.url),this.events.dropImage=!1,void this.core.callback("imageUpload",$img,json);this.placeholder.hide();var $figure=$("<figure>");$img=$("<img>"),$img.attr("src",json.url);var id="undefined"==typeof json.id?"":json.id,type="undefined"==typeof json.s3?"image":"s3";$img.attr("data-"+type,id),$figure.append($img);var pre=this.utils.isTag(this.selection.current(),"pre");if(direct){this.air.collapsed(),this.marker.remove();var node=this.insert.nodeToPoint(e,this.marker.get()),$next=$(node).next();this.selection.restore(),this.buffer.set(),"undefined"!=typeof $next&&0!==$next.length&&"IMG"===$next[0].tagName?(this.core.callback("imageDelete",$next[0].src,$next),$next.closest("figure, p",this.core.editor()[0]).replaceWith($figure),this.caret.after($figure)):(pre?$(pre).after($figure):this.insert.node($figure),this.caret.after($figure))}else this.modal.close(),this.buffer.set(),this.air.collapsed(),pre?$(pre).after($figure):this.insert.node($figure),this.caret.after($figure);this.events.dropImage=!1,this.storage.add({type:type,node:$img[0],url:$img[0].src,id:id}),null!==direct&&this.core.callback("imageUpload",$img,json)},setEditable:function($image){$image.on("dragstart",function(e){e.preventDefault()}),$image.off("click.redactor touchstart.redactor").on("click.redactor touchstart.redactor",$.proxy(function(e){setTimeout($.proxy(function(){this.image.showEdit($image)},this),200)},this))},showEdit:function($image){if(!this.events.imageEditing){this.observe.image=$image;var $link=$image.closest("a",this.$editor[0]);if(this.modal.load("image-edit",this.lang.get("edit"),705),this.image.buttonDelete=this.modal.getDeleteButton().text(this.lang.get("delete")),this.image.buttonSave=this.modal.getActionButton().text(this.lang.get("save")),this.image.buttonDelete.on("click",$.proxy(this.image.remove,this)),this.image.buttonSave.on("click",$.proxy(this.image.update,this)),this.opts.imageCaption===!1)$("#redactor-image-caption").val("").hide();else{var $next=$image.next();0!==$next.length&&"FIGCAPTION"===$next[0].tagName&&$("#redactor-image-caption").val($next.text()).show()}$("#redactor-image-preview").html($('<img src="'+$image.attr("src")+'" style="max-width: 100%;">')),$("#redactor-image-title").val($image.attr("alt"));var $redactorImageLink=$("#redactor-image-link");$redactorImageLink.attr("href",$image.attr("src")),0!==$link.length&&($redactorImageLink.val($link.attr("href")),"_blank"===$link.attr("target")&&$("#redactor-image-link-blank").prop("checked",!0)),$(".redactor-link-tooltip").remove(),this.modal.show(),this.detect.isDesktop()&&$("#redactor-image-title").focus()}},update:function(){var $image=this.observe.image,$link=$image.closest("a",this.core.editor()[0]),title=$("#redactor-image-title").val().replace(/(<([^>]+)>)/gi,"");$image.attr("alt",title).attr("title",title);var link=$.trim($("#redactor-image-link").val()).replace(/(<([^>]+)>)/gi,"");if(""!==link){var pattern="((xn--)?[a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}",re=new RegExp("^(http|ftp|https)://"+pattern,"i"),re2=new RegExp("^"+pattern,"i");-1===link.search(re)&&0===link.search(re2)&&this.opts.linkProtocol&&(link=this.opts.linkProtocol+"://"+link);var target=$("#redactor-image-link-blank").prop("checked")?!0:!1;if(0===$link.length){var a=$('<a href="'+link+'">'+this.utils.getOuterHtml($image)+"</a>");target&&a.attr("target","_blank"),$image.replaceWith(a)}else $link.attr("href",link),target?$link.attr("target","_blank"):$link.removeAttr("target")}else 0!==$link.length&&$link.replaceWith(this.utils.getOuterHtml($image));var caption=$("#redactor-image-caption").val(),$figcaption=$image.next();(0===$figcaption.length||"FIGCAPTION"!==$figcaption[0].tagName)&&($figcaption=!1),""!==caption?$figcaption===!1?($figcaption=$("<figcaption />").text(caption),$image.after($figcaption)):$figcaption.text(caption):$figcaption!==!1&&$figcaption.remove(),this.modal.close(),this.buffer.set()},remove:function(e,$image,index){$image="undefined"==typeof $image?$(this.observe.image):$image,"boolean"!=typeof e&&this.buffer.set(),this.events.stopDetectChanges();var $link=$image.closest("a",this.core.editor()[0]),$figure=$image.closest("figure, p",this.core.editor()[0]),$parent=$image.parent();0!==$("#redactor-image-box").length&&($parent=$("#redactor-image-box").parent());var $next;0!==$figure.length?($next=$figure.next(),$figure.remove()):0!==$link.length?($parent=$link.parent(),$link.remove()):$image.remove(),$("#redactor-image-box").remove(),e!==!1&&(0!==$figure.length&&0!==$next.length?this.caret.start($next):0!==$parent.length&&this.caret.start($parent)),"boolean"!=typeof e&&this.modal.close(),this.utils.restoreScroll(),this.observe.image=!1,this.events.startDetectChanges(),this.placeholder.enable(),this.code.sync()}}},indent:function(){return{increase:function(){if(this.list.get()){var $current=$(this.selection.current()).closest("li"),$list=$current.closest("ul, ol"),$li=$current.closest("li"),$prev=$li.prev();if(0!==$prev.length&&"LI"===$prev[0].tagName)if(this.buffer.set(),this.utils.isCollapsed()){var listTag=$list[0].tagName,$newList=$("<"+listTag+" />");this.selection.save(),$newList.append($current),$prev.append($newList),this.selection.restore()}else document.execCommand("indent"),this.selection.save(),this.indent.removeEmpty(),this.indent.normalize(),this.selection.restore()}},decrease:function(){if(this.list.get()){var $current=$(this.selection.current()).closest("li");$current.closest("ul, ol");this.buffer.set(),document.execCommand("outdent");var $item=$(this.selection.current()).closest("li",this.core.editor()[0]);if(this.utils.isCollapsed()&&this.indent.repositionItem($item),0===$item.length){document.execCommand("formatblock",!1,"p"),$item=$(this.selection.current());var $next=$item.next();0!==$next.length&&"BR"===$next[0].tagName&&$next.remove()}this.selection.save(),this.indent.removeEmpty(),this.indent.normalize(),this.selection.restore()}},repositionItem:function($item){var $prev=$item.prev();if(0!==$prev.length&&"LI"!==$prev[0].tagName){this.selection.save();var $li=$item.parents("li",this.core.editor()[0]);$li.after($item),this.selection.restore()}},normalize:function(){this.core.editor().find("li").each($.proxy(function(i,s){var $el=$(s);$el.find(this.opts.inlineTags.join(",")).each(function(){$(this).removeAttr("style")});var $parent=$el.parent();if(0!==$parent.length&&"LI"===$parent[0].tagName)return void $parent.after($el);var $next=$el.next();0===$next.length||"UL"!==$next[0].tagName&&"OL"!==$next[0].tagName||$el.append($next)},this))},removeEmpty:function($list){var $lists=this.core.editor().find("ul, ol"),$items=this.core.editor().find("li");$items.each($.proxy(function(i,s){this.indent.removeItemEmpty(s)},this)),$lists.each($.proxy(function(i,s){this.indent.removeItemEmpty(s)},this)),$items.each($.proxy(function(i,s){this.indent.removeItemEmpty(s)},this))},removeItemEmpty:function(s){var html=s.innerHTML.replace(/[\t\s\n]/g,"");html=html.replace(/<span><\/span>/g,""),""===html&&$(s).remove()}}},inline:function(){return{format:function(tag,attr,value,type){if(tag=tag.toLowerCase(),"span"!==tag&&!this.utils.isCurrentOrParent(["PRE"])){for(var tags=["b","bold","i","italic","underline","strikethrough","deleted","superscript","subscript"],replaced=["strong","strong","em","em","u","del","del","sup","sub"],i=0;i<tags.length;i++)tag===tags[i]&&(tag=replaced[i]);return this.placeholder.hide(),this.buffer.set(),this.utils.isCollapsed()?this.inline.formatCollapsed(tag,attr,value,type):this.inline.formatUncollapsed(tag,attr,value,type)}},formatCollapsed:function(tag,attr,value,type){var inline=this.selection.inline();if(inline){var currentTag=inline.tagName.toLowerCase();if(currentTag===tag)if(this.utils.isEmpty(inline.innerHTML))this.caret.after(inline),$(inline).remove();else{var $first=this.inline.insertBreakpoint(inline,currentTag);this.caret.after($first)}else this.inline.formatSet(tag,attr,value,type)}else this.inline.formatSet(tag,attr,value,type)},formatSet:function(tag,attr,value,type){var node=document.createElement(tag);node=this.inline.setAttr(node,attr,value,type),this.insert.node(node),this.caret.start(node)},formatBreak:function(tag,attr,value,type,inline,currentTag){var node=document.createElement(tag);node=this.inline.setAttr(node,attr,value,type);var $first=this.inline.insertBreakpoint(inline,currentTag);$first.after(node),this.caret.start(node)},formatUncollapsed:function(tag,attr,value,type){var self=this;this.inline.formatConvert(tag),document.execCommand("strikethrough"),this.selection.save();var converted=!0,$formatted=this.core.editor().find("strike");$formatted.each(function(i,s){var $oldEl=$(s);$oldEl.hasClass("redactor-inline-converted")||(converted=!1);var $newEl=self.utils.replaceToTag($oldEl,tag);converted||($newEl=self.inline.setAttr($newEl[0],attr,value,type))}),"del"!==tag&&this.core.editor().find("inline").each(function(i,s){self.utils.replaceToTag(s,"del")}),"u"!==tag&&this.core.editor().find("unline").each(function(i,s){self.utils.replaceToTag(s,"u")}),this.core.editor().find("pre").children(tag).replaceWith(function(){return $(this).contents()}),this.$editor.find(this.opts.inlineTags.join(", ")).each($.proxy(function(i,s){var $el=$(s),property=$el.css("text-decoration");return $el.hasClass("redactor-selection-marker")?void 0:""===this.clean.removeSpacesHard(s.innerHTML)?void $el.remove():"SPAN"===s.tagName&&$el.hasClass("redactor-inline-converted")?void $el.replaceWith($el.contents()):void("line-through"===property&&("SPAN"===s.tagName||"U"===s.tagName&&0===s.attributes.length?$el.replaceWith($el.contents()):($el.css("text-decoration",""),this.utils.removeEmptyAttr($el,"style"))))},this)),this.selection.restore()},formatConvert:function(tag){this.selection.save();var self=this;"del"!==tag&&this.core.editor().find("del").each(function(i,s){self.utils.replaceToTag(s,"inline")}),"u"!==tag&&this.core.editor().find("u").each(function(i,s){self.utils.replaceToTag(s,"unline")}),this.core.editor().find(tag).each(function(){var $el=self.utils.replaceToTag(this,"strike");$el.addClass("redactor-inline-converted")}),this.selection.restore()},insertBreakpoint:function(inline,currentTag){var breakpoint=document.createElement("span");breakpoint.id="redactor-inline-breakpoint",breakpoint=this.insert.node(breakpoint);var end=this.utils.isEndOfElement(inline),code=this.utils.getOuterHtml(inline),endTag=end?"":"<"+currentTag+">";code=code.replace(/<span(.*?[^>])id="redactor-inline-breakpoint">​<\/span>/i,"</"+currentTag+">"+endTag);var $code=$(code);return $(inline).replaceWith($code),$code.first()},setAttr:function(inline,attr,value,type){if("undefined"==typeof attr)return inline;var func="undefined"==typeof type?"replace":type;return inline="class"===attr?this.inline[func+"Class"](value,inline):"remove"===func?this.inline[func+"Attr"](attr,inline):"removeAll"===func?this.inline[func+"Attr"](inline):this.inline[func+"Attr"](attr,value,inline)},getInlines:function(inline){return"undefined"==typeof inline?this.selection.inlines():inline},update:function(tag,attr,value,type){var inlines=this.selection.inlines(),result=[],self=this;return $.each(inlines,function(i,s){if($.isArray(tag)){if(-1===$.inArray(s.tagName.toLowerCase(),tag))return}else if("*"!==tag&&s.tagName.toLowerCase()!==tag)return;result.push(self.inline.setAttr(s,attr,value,type))}),result},replaceClass:function(value,inline){return $(this.inline.getInlines(inline)).removeAttr("class").addClass(value)[0]},toggleClass:function(value,inline){return $(this.inline.getInlines(inline)).toggleClass(value)[0]},addClass:function(value,inline){return $(this.inline.getInlines(inline)).addClass(value)[0]},removeClass:function(value,inline){return $(this.inline.getInlines(inline)).removeClass(value)[0]},removeAllClass:function(inline){return $(this.inline.getInlines(inline)).removeAttr("class")[0]},replaceAttr:function(inline,attr,value){return inline=this.inline.removeAttr(attr,this.inline.getInlines(inline)),$(inline).attr(attr,value)[0]},toggleAttr:function(attr,value,inline){inline=this.inline.getInlines(inline);var self=this,returned=[];return $.each(inline,function(i,s){var $el=$(s);$el.attr(attr)?returned.push(self.inline.removeAttr(attr,s)):returned.push(self.inline.addAttr(attr,value,s))}),returned},addAttr:function(attr,value,inline){return $(this.inline.getInlines(inline)).attr(attr,value)[0]},removeAttr:function(attr,inline){return $(this.inline.getInlines(inline)).removeAttr(attr)[0]},removeAllAttr:function(inline){inline=this.inline.getInlines(inline);var returned=[];return $.each(inline,function(i,s){"undefined"==typeof s.attributes&&returned.push(s);for(var $el=$(s),len=s.attributes.length,z=0;len>z;z++)$el.removeAttr(s.attributes[z].name);returned.push($el[0])}),returned},removeFormat:function(){document.execCommand("removeFormat")}}},insert:function(){return{set:function(html){this.placeholder.hide(),this.code.set(html),this.focus.end(),this.placeholder.enable()},html:function(html,data){this.placeholder.hide(),this.core.editor().focus();var block=this.selection.block(),inline=this.selection.inline();"undefined"==typeof data&&(data=this.clean.getCurrentType(html,!0),html=this.clean.onPaste(html,data,!0)),html=$.parseHTML(html);var sel=this.selection.get(),range=this.selection.range(sel);if(range.deleteContents(),this.selection.update(sel,range),data.lists){var $list=$(html);if(0!==$list.length&&("UL"===$list[0].tagName||"OL"===$list[0].tagName))return void this.insert.appendLists(block,$list)}if(data.blocks&&block)if(this.utils.isSelectAll())this.core.editor().html(html),this.focus.end();else{var breaked=this.utils.breakBlockTag();breaked===!1?this.insert.placeHtml(html):(html=$(html).append(this.marker.get()),"start"===breaked.type?breaked.$block.before(html):breaked.$block.after(html),this.selection.restore(),this.core.editor().find("p").each(function(){""===$.trim(this.innerHTML)&&$(this).remove()}))}else{if(inline){var $div=$("<div/>").html($.parseHTML(html,document,!0));$div.find(inline.tagName.toLowerCase()).each(function(){$(this).contents().unwrap()}),html=$div.html()}if(this.utils.isSelectAll()){var $node=$(this.opts.emptyHtml);this.core.editor().html("").append($node),$node.html(html),this.caret.end($node)}else this.insert.placeHtml(html)}this.utils.disableSelectAll(),this.linkify.format(),data.pre&&this.clean.cleanPre()},text:function(text){text=text.toString(),text=$.trim(text);var tmp=document.createElement("div");if(tmp.innerHTML=text,text=tmp.textContent||tmp.innerText,"undefined"!=typeof text){this.placeholder.hide();var blocks=this.selection.blocks();if(text=text.replace(/\n/g," "),this.utils.isSelectAll()){var $node=$(this.opts.emptyHtml);this.core.editor().html("").append($node),$node.html(text),this.caret.end($node)}else{var sel=this.selection.get(),node=document.createTextNode(text);if(sel.getRangeAt&&sel.rangeCount){var range=sel.getRangeAt(0);range.deleteContents(),range.insertNode(node),range.setStartAfter(node),range.collapse(!0),this.selection.update(sel,range)}blocks.length>1&&($(node).wrap("<p>"),this.caret.after(node))}this.utils.disableSelectAll(),this.linkify.format(),this.clean.normalizeCurrentHeading()}},raw:function(html){this.placeholder.hide();var sel=this.selection.get(),range=this.selection.range(sel);range.deleteContents();var el=document.createElement("div");el.innerHTML=html;for(var node,lastNode,frag=document.createDocumentFragment();node=el.firstChild;)lastNode=frag.appendChild(node);range.insertNode(frag),lastNode&&(range=range.cloneRange(),range.setStartAfter(lastNode),range.collapse(!0),sel.removeAllRanges(),sel.addRange(range))},node:function(node,deleteContent){this.placeholder.hide(),"undefined"!=typeof this.start&&this.core.editor().focus(),node=node[0]||node;var block=this.selection.block(),gap=this.utils.isBlockTag(node.tagName);if(this.utils.isSelectAll())gap?this.core.editor().html(node):this.core.editor().html($("<p>").html(node)),this.code.sync();else if(gap&&block){var breaked=this.utils.breakBlockTag();breaked===!1?this.insert.placeNode(node,deleteContent):("start"===breaked.type?breaked.$block.before(node):breaked.$block.after(node),this.core.editor().find("p:empty").remove())}else this.insert.placeNode(node,deleteContent);return this.utils.disableSelectAll(),this.caret.end(node),node},appendLists:function(block,$list){var last,$block=$(block),isEmpty=this.utils.isEmpty(block.innerHTML);if(isEmpty||this.utils.isEndOfElement(block))last=$block,$list.find("li").each(function(){last.after(this),last=$(this)}),isEmpty&&$block.remove();else if(this.utils.isStartOfElement(block))$list.find("li").each(function(){$block.before(this),last=$(this)});else{var endOfNode=this.selection.extractEndOfNode(block);$block.after($("<li>").append(endOfNode)),$block.append($list),last=$list}this.marker.remove(),last&&this.caret.end(last),this.linkify.format()},placeHtml:function(html){var marker=document.createElement("span");marker.id="redactor-insert-marker",marker=this.insert.node(marker),$(marker).before(html),this.selection.restore(),this.caret.after(marker),$(marker).remove()},placeNode:function(node,deleteContent){var sel=this.selection.get(),range=this.selection.range(sel);deleteContent!==!1&&range.deleteContents(),range.insertNode(node),range.collapse(!1),this.selection.update(sel,range)},nodeToPoint:function(e,node){if(this.placeholder.hide(),node=node[0]||node,this.utils.isEmpty())return node=this.utils.isBlock(node)?node:$("<p />").append(node),this.core.editor().html(node),node;var range,x=e.clientX,y=e.clientY;if(document.caretPositionFromPoint){var pos=document.caretPositionFromPoint(x,y),sel=document.getSelection();range=sel.getRangeAt(0),range.setStart(pos.offsetNode,pos.offset),range.collapse(!0),range.insertNode(node)}else if(document.caretRangeFromPoint)range=document.caretRangeFromPoint(x,y),range.insertNode(node);else if("undefined"!=typeof document.body.createTextRange){range=document.body.createTextRange(),range.moveToPoint(x,y);var endRange=range.duplicate();endRange.moveToPoint(x,y),range.setEndPoint("EndToEnd",endRange),range.select()}return node},nodeToCaretPositionFromPoint:function(e,node){this.insert.nodeToPoint(e,node)},marker:function(){this.marker.insert()}}},keydown:function(){return{init:function(e){if(!this.rtePaste){var key=e.which,arrow=key>=37&&40>=key;this.keydown.ctrl=e.ctrlKey||e.metaKey,this.keydown.parent=this.selection.parent(),this.keydown.current=this.selection.current(),this.keydown.block=this.selection.block(),this.keydown.pre=this.utils.isTag(this.keydown.current,"pre"),this.keydown.blockquote=this.utils.isTag(this.keydown.current,"blockquote"),this.keydown.figcaption=this.utils.isTag(this.keydown.current,"figcaption"),this.keydown.figure=this.utils.isTag(this.keydown.current,"figure");var keydownStop=this.core.callback("keydown",e);if(keydownStop===!1)return e.preventDefault(),!1;if(this.shortcuts.init(e,key),this.keydown.checkEvents(arrow,key),this.keydown.setupBuffer(e,key),this.utils.isSelectAll()&&(key===this.keyCode.ENTER||key===this.keyCode.BACKSPACE||key===this.keyCode.DELETE))return e.preventDefault(),void this.code.set(this.opts.emptyHtml);if(this.keydown.addArrowsEvent(arrow),this.keydown.setupSelectAll(e,key),!this.opts.enterKey&&key===this.keyCode.ENTER){e.preventDefault();var sel=this.selection.get(),range=this.selection.range(sel);return void(range.collapsed||range.deleteContents())}if(this.opts.enterKey&&key===this.keyCode.DOWN&&this.keydown.onArrowDown(),this.opts.enterKey&&key===this.keyCode.UP&&this.keydown.onArrowUp(),("textarea"===this.opts.type||"div"===this.opts.type)&&this.keydown.current&&3===this.keydown.current.nodeType&&$(this.keydown.parent).hasClass("redactor-in")&&this.keydown.wrapToParagraph(),key===this.keyCode.SPACE&&(e.ctrlKey||e.shiftKey))return e.preventDefault(),this.keydown.onShiftSpace();if(key===this.keyCode.ENTER&&(e.ctrlKey||e.shiftKey))return e.preventDefault(),this.keydown.onShiftEnter(e);if(key===this.keyCode.ENTER&&!e.shiftKey&&!e.ctrlKey&&!e.metaKey)return this.keydown.onEnter(e);if(key===this.keyCode.TAB||e.metaKey&&221===key||e.metaKey&&219===key)return this.keydown.onTab(e,key);if((key===this.keyCode.BACKSPACE||key===this.keyCode.DELETE)&&this.keydown.onBackspaceAndDeleteBefore(),key===this.keyCode.DELETE){var $next=$(this.keydown.block).next();if(this.utils.isEndOfElement(this.keydown.block)&&0!==$next.length&&"FIGURE"===$next[0].tagName)return $next.remove(),!1;var tagLi=this.keydown.block&&"LI"===this.keydown.block.tagName?this.keydown.block:!1;if(tagLi){var $list=$(this.keydown.block).parents("ul, ol").last(),$nextList=$list.next();if(this.utils.isRedactorParent($list)&&this.utils.isEndOfElement($list)&&0!==$nextList.length&&("UL"===$nextList[0].tagName||"OL"===$nextList[0].tagName))return e.preventDefault(),$list.append($nextList.contents()),$nextList.remove(),!1}if(this.utils.isEndOfElement(this.keydown.block)&&0!==$next.length&&"PRE"===$next[0].tagName)return $(this.keydown.block).append($next.text()),$next.remove(),!1}if(key===this.keyCode.DELETE&&0!==$("#redactor-image-box").length&&this.image.remove(),key===this.keyCode.BACKSPACE){if(this.detect.isFirefox()&&this.line.removeOnBackspace(e),this.list.combineAfterAndBefore(this.keydown.block))return void e.preventDefault();var block=this.selection.block();if(block&&"LI"===block.tagName&&this.utils.isCollapsed()&&this.utils.isStartOfElement())return this.indent.decrease(),void e.preventDefault();this.keydown.removeInvisibleSpace(),this.keydown.removeEmptyListInTable(e)}(key===this.keyCode.BACKSPACE||key===this.keyCode.DELETE)&&this.keydown.onBackspaceAndDeleteAfter(e)}},onShiftSpace:function(){return this.buffer.set(),this.insert.raw("&nbsp;"),!1},onShiftEnter:function(e){return this.buffer.set(),this.keydown.pre?this.keydown.insertNewLine(e):this.insert.raw("<br>")},onBackspaceAndDeleteBefore:function(){this.utils.saveScroll()},onBackspaceAndDeleteAfter:function(e){setTimeout($.proxy(function(){this.code.syncFire=!1,this.keydown.removeEmptyLists(),this.core.editor().find("*[style]").not("img, #redactor-image-box, #redactor-image-editter").removeAttr("style"),this.keydown.formatEmpty(e),this.code.syncFire=!0},this),1)},onEnter:function(e){var stop=this.core.callback("enter",e);if(stop===!1)return e.preventDefault(),!1;if(this.keydown.blockquote&&this.keydown.exitFromBlockquote(e)===!0)return!1;if(this.keydown.pre)return this.keydown.insertNewLine(e);if(this.keydown.blockquote||this.keydown.figcaption)return this.keydown.insertBreakLine(e);if(this.keydown.figure)setTimeout($.proxy(function(){this.keydown.replaceToParagraph("FIGURE")},this),1);else if(this.keydown.block){if(setTimeout($.proxy(function(){this.keydown.replaceToParagraph("DIV")},this),1),"LI"===this.keydown.block.tagName){var current=this.selection.current(),$parent=$(current).closest("li",this.$editor[0]),$list=$parent.parents("ul,ol",this.$editor[0]).last();if(0!==$parent.length&&this.utils.isEmpty($parent.html())&&0===$list.next().length&&this.utils.isEmpty($list.find("li").last().html())){$list.find("li").last().remove();var node=$(this.opts.emptyHtml);return $list.after(node),this.caret.start(node),!1}}}else if(!this.keydown.block)return this.keydown.insertParagraph(e);setTimeout($.proxy(function(){var inline=this.selection.inline();if(inline&&this.utils.isEmpty(inline.innerHTML)){var parent=this.selection.block();$(inline).remove(),this.caret.start(parent)}},this),1)},checkEvents:function(arrow,key){arrow||"click"!==this.core.getEvent()&&"arrow"!==this.core.getEvent()||(this.core.addEvent(!1),this.keydown.checkKeyEvents(key)&&this.buffer.set())},checkKeyEvents:function(key){var k=this.keyCode,keys=[k.BACKSPACE,k.DELETE,k.ENTER,k.ESC,k.TAB,k.CTRL,k.META,k.ALT,k.SHIFT];return-1===$.inArray(key,keys)?!0:!1},addArrowsEvent:function(arrow){return arrow?"click"===this.core.getEvent()||"arrow"===this.core.getEvent()?void this.core.addEvent(!1):void this.core.addEvent("arrow"):void 0},setupBuffer:function(e,key){return this.keydown.ctrl&&90===key&&!e.shiftKey&&!e.altKey&&this.opts.buffer.length?(e.preventDefault(),void this.buffer.undo()):this.keydown.ctrl&&90===key&&e.shiftKey&&!e.altKey&&0!==this.opts.rebuffer.length?(e.preventDefault(),void this.buffer.redo()):void(this.keydown.ctrl||(key===this.keyCode.SPACE||key===this.keyCode.BACKSPACE||key===this.keyCode.DELETE||key===this.keyCode.ENTER&&!e.ctrlKey&&!e.shiftKey)&&this.buffer.set())},exitFromBlockquote:function(e){if(this.utils.isEndOfElement(this.keydown.blockquote)){var tmp=this.clean.removeSpacesHard($(this.keydown.blockquote).html());if(-1!==tmp.search(/(<br\s?\/?>){3}$/i)){e.preventDefault();var $last=$(this.keydown.blockquote).children().last().prev();$last.prev().filter("br").remove(),$last.filter("br").remove(),$(this.keydown.blockquote).children().last().filter("br").remove(),$(this.keydown.blockquote).children().last().filter("span").remove();var node=$(this.opts.emptyHtml);return $(this.keydown.blockquote).after(node),this.caret.start(node),!0}}},onArrowDown:function(){for(var tags=[this.keydown.blockquote,this.keydown.pre,this.keydown.figcaption],i=0;i<tags.length;i++)if(tags[i])return this.keydown.insertAfterLastElement(tags[i]),!1},onArrowUp:function(){for(var tags=[this.keydown.blockquote,this.keydown.pre,this.keydown.figcaption],i=0;i<tags.length;i++)if(tags[i])return this.keydown.insertBeforeFirstElement(tags[i]),!1},insertAfterLastElement:function(element){if(this.utils.isEndOfElement(element)){var last=this.core.editor().contents().last(),$next="FIGCAPTION"===element.tagName?$(this.keydown.block).parent().next():$(this.keydown.block).next();if(0===$next.length){if(0===last.length&&last[0]!==element)return void this.caret.start(last);var node=$(this.opts.emptyHtml);"FIGCAPTION"===element.tagName?$(element).parent().after(node):$(element).after(node),this.caret.start(node)}}},insertBeforeFirstElement:function(element){if(this.utils.isStartOfElement()&&!(this.core.editor().contents().length>1&&this.core.editor().contents().first()[0]!==element)){var node=$(this.opts.emptyHtml);$(element).before(node),this.caret.start(node)}},onTab:function(e,key){if(!this.opts.tabKey)return!0;if(this.utils.isEmpty(this.code.get())&&this.opts.tabAsSpaces===!1)return!0;e.preventDefault(),this.buffer.set();var node;return this.keydown.pre&&!e.shiftKey?(node=this.opts.preSpaces?document.createTextNode(Array(this.opts.preSpaces+1).join(" ")):document.createTextNode("	"),this.insert.node(node)):this.opts.tabAsSpaces!==!1?(node=document.createTextNode(Array(this.opts.tabAsSpaces+1).join(" ")),this.insert.node(node)):e.metaKey&&219===key?this.indent.decrease():e.metaKey&&221===key?this.indent.increase():e.shiftKey?this.indent.decrease():this.indent.increase(),!1},setupSelectAll:function(e,key){this.keydown.ctrl&&65===key?this.utils.enableSelectAll():key===this.keyCode.LEFT_WIN||this.keydown.ctrl||this.utils.disableSelectAll()},insertNewLine:function(e){e.preventDefault();var node=document.createTextNode("\n"),sel=this.selection.get(),range=this.selection.range(sel);return range.deleteContents(),range.insertNode(node),this.caret.after(node),!1},insertParagraph:function(e){e.preventDefault();var p=document.createElement("p");p.innerHTML=this.opts.invisibleSpace;var sel=this.selection.get(),range=this.selection.range(sel);return range.deleteContents(),range.insertNode(p),this.caret.start(p),!1},insertBreakLine:function(e){return this.keydown.insertBreakLineProcessing(e)},insertDblBreakLine:function(e){return this.keydown.insertBreakLineProcessing(e,!0)},insertBreakLineProcessing:function(e,dbl){e.stopPropagation();var br1=document.createElement("br");if(this.insert.node(br1),dbl===!0){var br2=document.createElement("br");this.insert.node(br2)}return!1},wrapToParagraph:function(){var $current=$(this.keydown.current),node=$("<p>").append($current.clone());$current.replaceWith(node);var next=$(node).next();"undefined"!=typeof next[0]&&"BR"===next[0].tagName&&next.remove(),this.caret.end(node)},replaceToParagraph:function(tag){var blockElem=this.selection.block(),blockHtml=blockElem.innerHTML.replace(/<br\s?\/?>/gi,"");if(blockElem.tagName===tag&&this.utils.isEmpty(blockHtml)&&!$(blockElem).hasClass("redactor-in")){var p=document.createElement("p");return $(blockElem).replaceWith(p),this.caret.start(p),!1}"P"===blockElem.tagName&&$(blockElem).removeAttr("class").removeAttr("style")},removeInvisibleSpace:function(){var $current=$(this.keydown.current);0===$current.text().search(/^\u200B$/g)&&$current.remove()},removeEmptyListInTable:function(e){var $current=$(this.keydown.current),$parent=$(this.keydown.parent),td=$current.closest("td",this.$editor[0]);if(0!==td.length&&$current.closest("li",this.$editor[0])&&1===$parent.children("li").length){if(!this.utils.isEmpty($current.text()))return;e.preventDefault(),$current.remove(),$parent.remove(),this.caret.start(td)}},removeEmptyLists:function(){var removeIt=function(){var html=$.trim(this.innerHTML).replace(/\/t\/n/g,"");""===html&&$(this).remove()};this.core.editor().find("li").each(removeIt),this.core.editor().find("ul, ol").each(removeIt)},formatEmpty:function(e){var html=$.trim(this.core.editor().html());if(this.utils.isEmpty(html))return e.preventDefault(),"inline"===this.opts.type||"pre"===this.opts.type?(this.core.editor().html(this.marker.html()),this.selection.restore()):(this.core.editor().html(this.opts.emptyHtml),this.focus.start()),!1}}},keyup:function(){return{init:function(e){if(!this.rtePaste){var key=e.which;this.keyup.block=this.selection.block(),this.keyup.current=this.selection.current(),this.keyup.parent=this.selection.parent();var stop=this.core.callback("keyup",e);if(stop===!1)return e.preventDefault(),!1;if(key===this.keyCode.ENTER&&this.keyup.block&&"FIGURE"===this.keyup.block.tagName){var $prev=$(this.keyup.block).prev();if(0!==$prev.length&&"FIGURE"===$prev[0].tagName){var $newTag=this.utils.replaceToTag($prev,"p");return void this.caret.start($newTag)}}if(key===this.keyCode.BACKSPACE||key===this.keyCode.DELETE){if(this.utils.isSelectAll())return void this.focus.start();if(this.keyup.block&&this.keydown.block&&"FIGURE"===this.keyup.block.tagName&&this.utils.isStartOfElement(this.keydown.block)){e.preventDefault(),this.selection.save(),$(this.keyup.block).find("img").first().remove(),this.utils.replaceToTag(this.keyup.block,"p");var $marker=this.marker.find();return $("html, body").animate({scrollTop:$marker.position().top+20},500),void this.selection.restore()}if(this.keyup.block&&"P"===this.keyup.block.tagName){var isContainImage=$(this.keyup.block).find("img").length,text=$(this.keyup.block).text().replace(/\u200B/g,"");""===text&&0!==isContainImage&&this.utils.replaceToTag(this.keyup.block,"figure")}this.keyup.block&&"FIGURE"===this.keyup.block.tagName&&0===$(this.keyup.block).find("img").length&&(this.selection.save(),this.utils.replaceToTag(this.keyup.block,"p"),this.selection.restore())}this.linkify.isKey(key)&&this.linkify.format()}}}},lang:function(){return{load:function(){this.opts.curLang=this.opts.langs[this.opts.lang]},get:function(name){return"undefined"!=typeof this.opts.curLang[name]?this.opts.curLang[name]:""}}},line:function(){return{insert:function(){this.buffer.set(),this.insert.html(this.line.getLineHtml());var $hr=this.core.editor().find("#redactor-hr-tmp-id");return $hr.removeAttr("id"),this.core.callback("insertedLine",$hr),$hr},getLineHtml:function(){var html='<hr id="redactor-hr-tmp-id" />';return!this.detect.isFirefox()&&this.utils.isEmpty()&&(html+="<p>"+this.opts.emptyHtml+"</p>"),html},removeOnBackspace:function(e){if(this.utils.isCollapsed()){var $block=$(this.selection.block());if(0!==$block.length&&this.utils.isStartOfElement($block)){var $prev=$block.prev();$prev&&"HR"===$prev[0].tagName&&(e.preventDefault(),$prev.remove())}}}}},link:function(){
return{get:function(){return $(this.selection.inlines("a"))},is:function(){var nodes=this.selection.nodes(),$link=$(this.selection.current()).closest("a",this.core.editor()[0]);return 0===$link.length||nodes.length>1?!1:$link},unlink:function(e){"undefined"!=typeof e&&e.preventDefault&&e.preventDefault(),this.buffer.set();var links=this.selection.inlines("a");if(0!==links.length){var $links=this.link.replaceLinksToText(links);this.observe.closeAllTooltip(),this.core.callback("deletedLink",$links)}},insert:function(link,cleaned){var $el=this.link.is();if(cleaned!==!0&&(link=this.link.buildLinkFromObject($el,link),link===!1))return!1;if(this.buffer.set(),$el===!1){$el=$("<a />"),$el=this.link.update($el,link),$el=$(this.insert.node($el));var $parent=$el.parent();this.utils.isRedactorParent($parent)===!1&&$el.wrap("<p>"),$parent.hasClass("redactor-unlink")&&$parent.replaceWith(function(){return $(this).contents()}),this.caret.after($el),this.core.callback("insertedLink",$el)}else $el=this.link.update($el,link),this.caret.after($el)},update:function($el,link){return $el.text(link.text),$el.attr("href",link.url),this.link.target($el,link.target),$el},target:function($el,target){return target?$el.attr("target","_blank"):$el.removeAttr("target")},show:function(e){"undefined"!=typeof e&&e.preventDefault&&e.preventDefault(),this.observe.closeAllTooltip();var $el=this.link.is();this.link.buildModal($el);var link=this.link.buildLinkFromElement($el);link.url=this.link.removeSelfHostFromUrl(link.url),this.link.setModalValues(link),this.modal.show(),this.detect.isDesktop()&&$("#redactor-link-url").focus()},setModalValues:function(link){$("#redactor-link-blank").prop("checked",link.target),$("#redactor-link-url").val(link.url),$("#redactor-link-url-text").val(link.text)},buildModal:function($el){this.modal.load("link",this.lang.get($el===!1?"link-insert":"link-edit"),600);var $btn=this.modal.getActionButton();$btn.text(this.lang.get($el===!1?"insert":"save")).on("click",$.proxy(this.link.callback,this))},callback:function(){var link=this.link.buildLinkFromModal();return link===!1?!1:(this.modal.close(),void this.link.insert(link,!0))},cleanUrl:function(url){return"undefined"==typeof url?"":$.trim(url.replace(/[^\W\w\D\d+&\'@#\/%?=~_|!:,.;\(\)]/gi,""))},cleanText:function(text){return"undefined"==typeof text?"":$.trim(text.replace(/(<([^>]+)>)/gi,""))},getText:function(link){return""===link.text&&""!==link.url?this.link.truncateUrl(link.url.replace(/<|>/g,"")):link.text},isUrl:function(url){var pattern="((xn--)?[\\W\\w\\D\\d]+(-[\\W\\w\\D\\d]+)*\\.)+[\\W\\w]{2,}",re1=new RegExp("^(http|ftp|https)://"+pattern,"i"),re2=new RegExp("^"+pattern,"i"),re3=new RegExp(".(html|php)$","i"),re4=new RegExp("^/","i"),re5=new RegExp("^tel:(.*?)","i");return-1===url.search(re1)&&-1!==url.search(re2)&&(url="http://"+url),-1!==url.search(re1)||-1!==url.search(re3)||-1!==url.search(re4)||-1!==url.search(re5)?url:!1},isMailto:function(url){return-1!==url.search("@")&&/(http|ftp|https):\/\//i.test(url)===!1},isEmpty:function(link){return""===link.url||""===link.text&&""===link.url},truncateUrl:function(url){return url.length>this.opts.linkSize?url.substring(0,this.opts.linkSize)+"...":url},parse:function(link){return this.link.isMailto(link.url)?link.url="mailto:"+link.url.replace("mailto:",""):0!==link.url.search("#")&&(link.url=this.link.isUrl(link.url)),this.link.isEmpty(link)||link.url===!1?!1:link},buildLinkFromModal:function(){var link={};return link.url=this.link.cleanUrl($("#redactor-link-url").val()),link.text=this.link.cleanText($("#redactor-link-url-text").val()),link.text=this.link.getText(link),link.target=$("#redactor-link-blank").prop("checked")?!0:!1,this.link.parse(link)},buildLinkFromObject:function($el,link){return link.url=this.link.cleanUrl(link.url),link.text="undefined"==typeof link.text&&this.selection.is()?this.selection.text():this.link.cleanText(link.text),link.text=this.link.getText(link),link.target=$el===!1?link.target:this.link.buildTarget($el),this.link.parse(link)},buildLinkFromElement:function($el){var link={url:"",text:this.selection.is()?this.selection.text():"",target:!1};return $el!==!1&&(link.url=$el.attr("href"),link.text=$el.text(),link.target=this.link.buildTarget($el)),link},buildTarget:function($el){return"undefined"!=typeof $el.attr("target")&&"_blank"===$el.attr("target")?!0:!1},removeSelfHostFromUrl:function(url){var href=self.location.href.replace("#","").replace(/\/$/i,"");return url.replace(/^\/\#/,"#").replace(href,"").replace("mailto:","")},replaceLinksToText:function(links){var $first,$links=$.each(links,function(i,s){var $el=$(s),$unlinked=$('<span class="redactor-unlink" />').append($el.contents());return $el.replaceWith($unlinked),0===i&&($first=$unlinked),$el});return 1===links.length&&this.selection.isCollapsed()&&this.caret.after($first),$links}}},linkify:function(){return{isKey:function(key){return key===this.keyCode.ENTER||key===this.keyCode.SPACE},isLink:function(node){return node.nodeValue.match(this.opts.regexps.linkyoutube)||node.nodeValue.match(this.opts.regexps.linkvimeo)||node.nodeValue.match(this.opts.regexps.linkimage)||node.nodeValue.match(this.opts.regexps.url)},isFiltered:function(i,node){return 3===node.nodeType&&""!==$.trim(node.nodeValue)&&!$(node).parent().is("pre")&&this.linkify.isLink(node)},handler:function(i,node){var $el=$(node),text=$el.text(),html=text;html=html.match(this.opts.regexps.linkyoutube)||html.match(this.opts.regexps.linkvimeo)?this.linkify.convertVideoLinks(html):html.match(this.opts.regexps.linkimage)?this.linkify.convertImages(html):this.linkify.convertLinks(html),$el.before(text.replace(text,html)).remove()},format:function(){if(this.opts.linkify&&!this.utils.isCurrentOrParent("pre")){this.core.editor().find(":not(iframe,img,a,pre,.redactor-unlink)").addBack().contents().filter($.proxy(this.linkify.isFiltered,this)).each($.proxy(this.linkify.handler,this));var $objects=this.core.editor().find(".redactor-linkify-object").each($.proxy(function(i,s){var $el=$(s);return $el.removeClass("redactor-linkify-object"),""===$el.attr("class")&&$el.removeAttr("class"),"DIV"===s.tagName?this.linkify.breakBlockTag($el,"video"):"IMG"===s.tagName?this.linkify.breakBlockTag($el,"image"):"A"===s.tagName&&this.core.callback("insertedLink",$el),$el},this));setTimeout($.proxy(function(){this.code.sync(),this.core.callback("linkify",$objects)},this),100)}},breakBlockTag:function($el,type){var breaked=this.utils.breakBlockTag();if(breaked!==!1){var $newBlock=$el;"image"===type&&($newBlock=$("<figure />").append($el)),"start"===breaked.type?breaked.$block.before($newBlock):breaked.$block.after($newBlock),"image"===type&&this.caret.after($newBlock)}},convertVideoLinks:function(html){var iframeStart='<div class="'+this.opts.videoContainerClass+' redactor-linkify-object"><iframe class="redactor-linkify-object" width="500" height="281" src="',iframeEnd='" frameborder="0" allowfullscreen></iframe></div>';return html.match(this.opts.regexps.linkyoutube)&&(html=html.replace(this.opts.regexps.linkyoutube,iframeStart+"//www.youtube.com/embed/$1"+iframeEnd)),html.match(this.opts.regexps.linkvimeo)&&(html=html.replace(this.opts.regexps.linkvimeo,iframeStart+"//player.vimeo.com/video/$2"+iframeEnd)),html},convertImages:function(html){var matches=html.match(this.opts.regexps.linkimage);return matches?html.replace(html,'<img src="'+matches+'" class="redactor-linkify-object" />'):html},convertLinks:function(html){var matches=html.match(this.opts.regexps.url);if(!matches)return html;matches=$.grep(matches,function(v,k){return $.inArray(v,matches)===k});for(var length=matches.length,i=0;length>i;i++){var href=matches[i],text=href,linkProtocol=null!==href.match(/(https?|ftp):\/\//i)?"":"http://";text.length>this.opts.linkSize&&(text=text.substring(0,this.opts.linkSize)+"..."),-1===text.search("%")&&(text=decodeURIComponent(text));var regexB="\\b";-1!==$.inArray(href.slice(-1),["/","&","="])&&(regexB="");var regexp=new RegExp("("+href.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+regexB+")","g");html=html.replace(regexp,'<a href="'+linkProtocol+$.trim(href)+'" class="redactor-linkify-object">'+$.trim(text)+"</a>")}return html}}},list:function(){return{toggle:function(cmd){if(!this.utils.inBlocks(["table","td","th","tr"])){cmd="ol"===cmd?"orderedlist":"unorderedlist";var tag="orderedlist"===cmd?"OL":"UL",$list=$(this.selection.current()).parentsUntil(".redactor-in","ul, ol").first();if(this.placeholder.hide(),this.buffer.set(),0!==$list.length&&$list[0].tagName===tag&&this.utils.isRedactorParent($list))return this.selection.save(),$list.find("ul, ol").each(function(){var parent=$(this).closest("li");$(this).find("li").each(function(){$(parent).after(this)})}),$list.find("ul, ol").remove(),$list.find("li").each(function(){return $(this).replaceWith(function(){return $("<p />").append($(this).contents())})}),$list.replaceWith(function(){return $(this).contents()}),void this.selection.restore();this.selection.save(),document.execCommand("insert"+cmd),this.selection.restore();var $insertedList=this.list.get();if(!$insertedList)return void(this.selection.block()||document.execCommand("formatblock",!1,"p"));$insertedList.find("span").replaceWith(function(){return $(this).contents()}),$insertedList.find(this.opts.inlineTags.join(",")).each(function(){$(this).removeAttr("style")});var $listParent=$insertedList.parent();this.utils.isRedactorParent($listParent)&&"LI"!==$listParent[0].tagName&&this.utils.isBlock($listParent)&&(this.selection.save(),$listParent.replaceWith($listParent.contents()),this.selection.restore())}},get:function(){var current=this.selection.current(),$list=$(current).closest("ul, ol",this.core.editor()[0]);return 0===$list.length?!1:$list},combineAfterAndBefore:function(block){var $prev=$(block).prev(),$next=$(block).next(),isEmptyBlock=block&&"P"===block.tagName&&("<br>"===block.innerHTML||""===block.innerHTML),isBlockWrapped=1===$prev.closest("ol, ul").length&&1===$next.closest("ol, ul").length;return isEmptyBlock&&isBlockWrapped?($prev.children("li").last().append(this.marker.get()),$prev.append($next.contents()),this.selection.restore(),!0):!1}}},marker:function(){return{get:function(num){num="undefined"==typeof num?1:num;var marker=document.createElement("span");return marker.id="selection-marker-"+num,marker.className="redactor-selection-marker",marker.innerHTML=this.opts.invisibleSpace,marker},html:function(num){return this.utils.getOuterHtml(this.marker.get(num))},find:function(num){return num="undefined"==typeof num?1:num,this.core.editor().find("span#selection-marker-"+num)},insert:function(){var sel=this.selection.get(),range=this.selection.range(sel);this.marker.insertNode(range,this.marker.get(1),!0),range&&range.collapsed===!1&&this.marker.insertNode(range,this.marker.get(2),!1)},remove:function(){this.core.editor().find(".redactor-selection-marker").each(this.marker.iterateRemove)},insertNode:function(range,node,collapse){var parent=this.selection.parent();if(null!==range&&0!==$(parent).closest(".redactor-in").length){range=range.cloneRange();try{range.collapse(collapse),range.insertNode(node)}catch(e){this.focus.start()}}},iterateRemove:function(i,el){var $el=$(el),text=$el.text().replace(/\u200B/g,"");return""===text?$el.remove():$el.replaceWith(function(){return $(this).contents()})}}},modal:function(){return{callbacks:{},templates:function(){this.opts.modal={"image-edit":String()+'<div class="redactor-modal-tab redactor-group" data-title="General"><div id="redactor-image-preview" class="redactor-modal-tab-side"></div><div class="redactor-modal-tab-area"><section><label>'+this.lang.get("title")+'</label><input type="text" id="redactor-image-title" /></section><section><label>'+this.lang.get("caption")+'</label><input type="text" id="redactor-image-caption" aria-label="'+this.lang.get("caption")+'" /></section><section><label>'+this.lang.get("link")+'</label><input type="text" id="redactor-image-link" aria-label="'+this.lang.get("link")+'" /></section><section><label class="checkbox"><input type="checkbox" id="redactor-image-link-blank" aria-label="'+this.lang.get("link-in-new-tab")+'"> '+this.lang.get("link-in-new-tab")+'</label></section><section><button id="redactor-modal-button-action">Insert</button><button id="redactor-modal-button-cancel">Cancel</button><button id="redactor-modal-button-delete" class="redactor-modal-button-offset">Delete</button></section></div></div>',image:String()+'<div class="redactor-modal-tab" data-title="Upload"><section><div id="redactor-modal-image-droparea"></div></section></div>',file:String()+'<div class="redactor-modal-tab" data-title="Upload"><section><label>'+this.lang.get("filename")+' <span class="desc">('+this.lang.get("optional")+')</span></label><input type="text" id="redactor-filename" aria-label="'+this.lang.get("filename")+'" /><br><br></section><section><div id="redactor-modal-file-upload"></div></section></div>',link:String()+'<div class="redactor-modal-tab" data-title="General"><section><label>URL</label><input type="url" id="redactor-link-url" aria-label="URL" /></section><section><label>'+this.lang.get("text")+'</label><input type="text" id="redactor-link-url-text" aria-label="'+this.lang.get("text")+'" /></section><section><label class="checkbox"><input type="checkbox" id="redactor-link-blank"> '+this.lang.get("link-in-new-tab")+'</label></section><section><button id="redactor-modal-button-action">Insert</button><button id="redactor-modal-button-cancel">Cancel</button></section></div>'},$.extend(this.opts,this.opts.modal)},addCallback:function(name,callback){this.modal.callbacks[name]=callback},addTemplate:function(name,template){this.opts.modal[name]=template},getTemplate:function(name){return this.opts.modal[name]},getModal:function(){return this.$modalBody},getActionButton:function(){return this.$modalBody.find("#redactor-modal-button-action")},getCancelButton:function(){return this.$modalBody.find("#redactor-modal-button-cancel")},getDeleteButton:function(){return this.$modalBody.find("#redactor-modal-button-delete")},load:function(templateName,title,width){"undefined"!=typeof this.$modalBox&&this.$modalBox.hasClass("open")||(this.modal.templateName=templateName,this.modal.width=width,this.modal.build(),this.modal.enableEvents(),this.modal.setTitle(title),this.modal.setDraggable(),this.modal.setContent(),"undefined"!=typeof this.modal.callbacks[templateName]&&this.modal.callbacks[templateName].call(this))},show:function(){this.detect.isDesktop()||document.activeElement.blur(),this.selection.save(),this.modal.buildTabber(),this.detect.isMobile()&&(this.modal.width="96%"),setTimeout($.proxy(this.modal.buildWidth,this),0),$(window).on("resize.redactor-modal",$.proxy(this.modal.buildWidth,this)),this.$modalOverlay.redactorAnimation("fadeIn",{duration:.25}),this.$modalBox.addClass("open").show(),this.$modal.redactorAnimation("fadeIn",{timing:"cubic-bezier(0.175, 0.885, 0.320, 1.105)"},$.proxy(function(){this.utils.saveScroll(),this.utils.disableBodyScroll(),this.core.callback("modalOpened",this.modal.templateName,this.$modal),$(document).off("focusin.modal");var $elements=this.$modal.find("input[type=text],input[type=url],input[type=email]");$elements.on("keydown.redactor-modal",$.proxy(this.modal.setEnter,this))},this))},buildWidth:function(){var windowHeight=$(window).height(),windowWidth=$(window).width(),number="number"==typeof this.modal.width;!number&&this.modal.width.match(/%$/)?this.$modal.css({width:this.modal.width,"margin-bottom":"16px"}):parseInt(this.modal.width)>windowWidth?this.$modal.css({width:"96%","margin-bottom":"2%"}):(number&&(this.modal.width+="px"),this.$modal.css({width:this.modal.width,"margin-bottom":"16px"}));var height=this.$modal.outerHeight(),top=windowHeight/2-height/2+"px";this.detect.isMobile()?top="2%":height>windowHeight&&(top="16px"),this.$modal.css("margin-top",top)},buildTabber:function(){this.modal.tabs=this.$modal.find(".redactor-modal-tab"),this.modal.tabs.length<2||(this.modal.$tabsBox=$('<div id="redactor-modal-tabber" />'),$.each(this.modal.tabs,$.proxy(function(i,s){var a=$('<a href="#" rel="'+i+'" />').text($(s).attr("data-title"));a.on("click",$.proxy(this.modal.showTab,this)),0===i&&a.addClass("active"),this.modal.$tabsBox.append(a)},this)),this.$modalBody.prepend(this.modal.$tabsBox))},showTab:function(e){e.preventDefault();var $el=$(e.target),index=$el.attr("rel");return this.modal.tabs.hide(),this.modal.tabs.eq(index).show(),$("#redactor-modal-tabber").find("a").removeClass("active"),$el.addClass("active"),!1},setTitle:function(title){this.$modalHeader.html(title)},setContent:function(){this.$modalBody.html(this.modal.getTemplate(this.modal.templateName)),this.modal.getCancelButton().on("mousedown",$.proxy(this.modal.close,this))},setDraggable:function(){"undefined"!=typeof $.fn.draggable&&(this.$modal.draggable({handle:this.$modalHeader}),this.$modalHeader.css("cursor","move"))},setEnter:function(e){13===e.which&&(e.preventDefault(),this.modal.getActionButton().click())},build:function(){this.modal.buildOverlay(),this.$modalBox=$('<div id="redactor-modal-box"/>').hide(),this.$modal=$('<div id="redactor-modal" role="dialog" />'),this.$modalHeader=$('<div id="redactor-modal-header" />'),this.$modalClose=$('<button type="button" id="redactor-modal-close" aria-label="'+this.lang.get("close")+'" />').html("&times;"),this.$modalBody=$('<div id="redactor-modal-body" />'),this.$modal.append(this.$modalHeader),this.$modal.append(this.$modalBody),this.$modal.append(this.$modalClose),this.$modalBox.append(this.$modal),this.$modalBox.appendTo(document.body)},buildOverlay:function(){this.$modalOverlay=$('<div id="redactor-modal-overlay">').hide(),$("body").prepend(this.$modalOverlay)},enableEvents:function(){this.$modalClose.on("mousedown.redactor-modal",$.proxy(this.modal.close,this)),$(document).on("keyup.redactor-modal",$.proxy(this.modal.closeHandler,this)),this.core.editor().on("keyup.redactor-modal",$.proxy(this.modal.closeHandler,this)),this.$modalBox.on("click.redactor-modal",$.proxy(this.modal.close,this))},disableEvents:function(){this.$modalClose.off("mousedown.redactor-modal"),$(document).off("keyup.redactor-modal"),this.core.editor().off("keyup.redactor-modal"),this.$modalBox.off("click§.redactor-modal"),$(window).off("resize.redactor-modal")},closeHandler:function(e){e.which===this.keyCode.ESC&&this.modal.close(!1)},close:function(e){if(e){if("redactor-modal-button-cancel"!==$(e.target).attr("id")&&e.target!==this.$modalClose[0]&&e.target!==this.$modalBox[0])return;e.preventDefault()}this.$modalBox&&(this.selection.restore(),this.modal.disableEvents(),this.utils.enableBodyScroll(),this.utils.restoreScroll(),this.$modalOverlay.redactorAnimation("fadeOut",{duration:.4},$.proxy(function(){this.$modalOverlay.remove()},this)),this.$modal.redactorAnimation("fadeOut",{duration:.3,timing:"cubic-bezier(0.175, 0.885, 0.320, 1.175)"},$.proxy(function(){"undefined"!=typeof this.$modalBox&&(this.$modalBox.remove(),this.$modalBox=void 0),$(document.body).css("overflow",this.modal.bodyOveflow),this.core.callback("modalClosed",this.modal.templateName)},this)))}}},observe:function(){return{load:function(){"undefined"==typeof this.opts.destroyed&&(this.observe.links(),this.observe.images())},isCurrent:function($el,$current){return"undefined"==typeof $current&&($current=$(this.selection.current())),$current.is($el)||$current.parents($el).length>0},toolbar:function(){this.observe.buttons(),this.observe.dropdowns()},buttons:function(e,btnName){var current=this.selection.current(),parent=this.selection.parent();return e!==!1?this.button.setInactiveAll():this.button.setInactiveAll(btnName),e===!1&&"html"!==btnName?void(-1!==$.inArray(btnName,this.opts.activeButtons)&&this.button.toggleActive(btnName)):void(this.utils.isRedactorParent(current)&&(this.utils.isCurrentOrParentHeader()||this.utils.isCurrentOrParent(["table","pre","blockquote","li"])?this.button.disable("horizontalrule"):this.button.enable("horizontalrule"),$.each(this.opts.activeButtonsStates,$.proxy(function(key,value){var parentEl=$(parent).closest(key,this.$editor[0]),currentEl=$(current).closest(key,this.$editor[0]);(0===parentEl.length||this.utils.isRedactorParent(parentEl))&&this.utils.isRedactorParent(currentEl)&&(0!==parentEl.length||0!==currentEl.closest(key,this.$editor[0]).length)&&this.button.setActive(value)},this))))},dropdowns:function(){var finded=$("<div />").html(this.selection.html()).find("a").length,$current=$(this.selection.current()),isRedactor=this.utils.isRedactorParent($current);$.each(this.opts.observe.dropdowns,$.proxy(function(key,value){var observe=value.observe,element=observe.element,$item=value.item,inValues="undefined"!=typeof observe["in"]?observe["in"]:!1,outValues="undefined"!=typeof observe.out?observe.out:!1;$current.closest(element).size()>0&&isRedactor||"a"===element&&0!==finded?this.observe.setDropdownProperties($item,inValues,outValues):this.observe.setDropdownProperties($item,outValues,inValues)},this))},setDropdownProperties:function($item,addProperties,deleteProperties){deleteProperties&&"undefined"!=typeof deleteProperties.attr&&this.observe.setDropdownAttr($item,deleteProperties.attr,!0),"undefined"!=typeof addProperties.attr&&this.observe.setDropdownAttr($item,addProperties.attr),"undefined"!=typeof addProperties.title&&$item.find("span").text(addProperties.title)},setDropdownAttr:function($item,properties,isDelete){$.each(properties,function(key,value){"class"===key?isDelete?$item.removeClass(value):$item.addClass(value):isDelete?$item.removeAttr(key):$item.attr(key,value)})},addDropdown:function($item,btnName,btnObject){"undefined"!=typeof btnObject.observe&&(btnObject.item=$item,this.opts.observe.dropdowns.push(btnObject))},images:function(){this.core.editor().find("img").each($.proxy(function(i,img){var $img=$(img);$img.closest("a",this.$editor[0]).on("click",function(e){e.preventDefault()}),this.image.setEditable($img)},this))},links:function(){this.opts.linkTooltip&&(this.core.editor().find("a").on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,$.proxy(this.observe.showTooltip,this)),this.core.editor().on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,$.proxy(this.observe.closeTooltip,this)),$(document).on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,$.proxy(this.observe.closeTooltip,this)))},getTooltipPosition:function($link){return $link.offset()},showTooltip:function(e){var $el=$(e.target);if("IMG"!==$el[0].tagName&&("A"!==$el[0].tagName&&($el=$el.closest("a",this.$editor[0])),"A"===$el[0].tagName)){var $link=$el,pos=this.observe.getTooltipPosition($link),tooltip=$('<span class="redactor-link-tooltip"></span>'),href=$link.attr("href");void 0===href&&(href=""),href.length>24&&(href=href.substring(0,24)+"...");var aLink=$('<a href="'+$link.attr("href")+'" target="_blank" />').html(href).addClass("redactor-link-tooltip-action"),aEdit=$('<a href="#" />').html(this.lang.get("edit")).on("click",$.proxy(this.link.show,this)).addClass("redactor-link-tooltip-action"),aUnlink=$('<a href="#" />').html(this.lang.get("unlink")).on("click",$.proxy(this.link.unlink,this)).addClass("redactor-link-tooltip-action");tooltip.append(aLink).append(" | ").append(aEdit).append(" | ").append(aUnlink);var lineHeight=parseInt($link.css("line-height"),10),lineClicked=Math.ceil((e.pageY-pos.top)/lineHeight),top=pos.top+lineClicked*lineHeight;tooltip.css({top:top+"px",left:pos.left+"px"}),$(".redactor-link-tooltip").remove(),$("body").append(tooltip)}},closeAllTooltip:function(){$(".redactor-link-tooltip").remove()},closeTooltip:function(e){e=e.originalEvent||e;var target=e.target,$parent=$(target).closest("a",this.$editor[0]);(0===$parent.length||"A"!==$parent[0].tagName||"A"===target.tagName)&&("A"===target.tagName&&this.utils.isRedactorParent(target)||$(target).hasClass("redactor-link-tooltip-action")||this.observe.closeAllTooltip())}}},offset:function(){return{get:function(node){var cloned=this.offset.clone(node);if(cloned===!1)return 0;var div=document.createElement("div");div.appendChild(cloned.cloneContents()),div.innerHTML=div.innerHTML.replace(/<img(.*?[^>])>$/gi,"i");var text=$.trim($(div).text()).replace(/[\t\n\r\n]/g,"").replace(/\u200B/g,"");return text.length},clone:function(node){var sel=this.selection.get(),range=this.selection.range(sel);if(null===range&&"undefined"==typeof node)return!1;if(node="undefined"==typeof node?this.$editor:node,node===!1)return!1;node=node[0]||node;var cloned=range.cloneRange();return cloned.selectNodeContents(node),cloned.setEnd(range.endContainer,range.endOffset),cloned},set:function(start,end){end="undefined"==typeof end?start:end,this.focus.is()||this.focus.start();for(var node,sel=this.selection.get(),range=this.selection.range(sel),offset=0,walker=document.createTreeWalker(this.$editor[0],NodeFilter.SHOW_TEXT,null,null);null!==(node=walker.nextNode());)if(offset+=node.nodeValue.length,offset>start&&(range.setStart(node,node.nodeValue.length+start-offset),start=1/0),offset>=end){range.setEnd(node,node.nodeValue.length+end-offset);break}range.collapse(!1),this.selection.update(sel,range)}}},paragraphize:function(){return{load:function(html){return this.opts.paragraphize===!1||"inline"===this.opts.type||"pre"===this.opts.type?html:""===html||"<p></p>"===html?this.opts.emptyHtml:(html+="\n",this.paragraphize.safes=[],this.paragraphize.z=0,html=html.replace(/(<br\s?\/?>){1,}\n?<\/blockquote>/gi,"</blockquote>"),html=html.replace(/<\/pre>/gi,"</pre>\n\n"),html=this.paragraphize.getSafes(html),html=html.replace("<br>","\n"),html=this.paragraphize.convert(html),html=this.paragraphize.clear(html),html=this.paragraphize.restoreSafes(html),html=html.replace(new RegExp("<br\\s?/?>\n?<("+this.opts.paragraphizeBlocks.join("|")+")(.*?[^>])>","gi"),"<p><br /></p>\n<$1$2>"),$.trim(html))},getSafes:function(html){var $div=$("<div />").append(html);return $div.find("blockquote p").replaceWith(function(){return $(this).append("<br />").contents()}),$div.find(this.opts.paragraphizeBlocks.join(", ")).each($.proxy(function(i,s){return this.paragraphize.z++,this.paragraphize.safes[this.paragraphize.z]=s.outerHTML,$(s).replaceWith("\n{replace"+this.paragraphize.z+"}\n\n")},this)),$div.html()},restoreSafes:function(html){return $.each(this.paragraphize.safes,function(i,s){s="undefined"!=typeof s?s.replace(/\$/g,"&#36;"):s,html=html.replace("{replace"+i+"}",s)}),html},convert:function(html){html=html.replace(/\r\n/g,"xparagraphmarkerz"),html=html.replace(/\n/g,"xparagraphmarkerz"),html=html.replace(/\r/g,"xparagraphmarkerz");var re1=/\s+/g;html=html.replace(re1," "),html=$.trim(html);var re2=/xparagraphmarkerzxparagraphmarkerz/gi;html=html.replace(re2,"</p><p>");var re3=/xparagraphmarkerz/gi;return html=html.replace(re3,"<br>"),html="<p>"+html+"</p>",html=html.replace("<p></p>",""),html=html.replace("\r\n\r\n",""),html=html.replace(/<\/p><p>/g,"</p>\r\n\r\n<p>"),html=html.replace(new RegExp("<br\\s?/?></p>","g"),"</p>"),html=html.replace(new RegExp("<p><br\\s?/?>","g"),"<p>"),html=html.replace(new RegExp("<p><br\\s?/?>","g"),"<p>"),html=html.replace(new RegExp("<br\\s?/?></p>","g"),"</p>"),html=html.replace(/<p>&nbsp;<\/p>/gi,""),html=html.replace(/<p>\s?<br>&nbsp;<\/p>/gi,""),html=html.replace(/<p>\s?<br>/gi,"<p>")},clear:function(html){return html=html.replace(/<p>(.*?){replace(.*?)\}\s?<\/p>/gi,"{replace$2}"),html=html.replace(new RegExp("</blockquote></p>","gi"),"</blockquote>"),html=html.replace(new RegExp("<p></blockquote>","gi"),"</blockquote>"),html=html.replace(new RegExp("<p><blockquote>","gi"),"<blockquote>"),html=html.replace(new RegExp("<blockquote></p>","gi"),"<blockquote>"),html=html.replace(new RegExp("<p><p ","gi"),"<p "),html=html.replace(new RegExp("<p><p>","gi"),"<p>"),html=html.replace(new RegExp("</p></p>","gi"),"</p>"),html=html.replace(new RegExp("<p>\\s?</p>","gi"),""),html=html.replace(new RegExp("\n</p>","gi"),"</p>"),html=html.replace(new RegExp("<p>	?	?\n?<p>","gi"),"<p>"),html=html.replace(new RegExp("<p>	*</p>","gi"),"")}}},paste:function(){return{init:function(e){this.rtePaste=!0;var pre="pre"===this.opts.type||this.utils.isCurrentOrParent("pre");return!this.paste.pre&&this.opts.clipboardImageUpload&&this.opts.imageUpload&&this.paste.detectClipboardUpload(e)?void(this.detect.isIe()&&setTimeout($.proxy(this.paste.clipboardUpload,this),100)):(this.utils.saveScroll(),this.selection.save(),this.paste.createPasteBox(pre),$(window).on("scroll.redactor-freeze",$.proxy(function(){$(window).scrollTop(this.saveBodyScroll)},this)),void setTimeout($.proxy(function(){var html=this.paste.getPasteBoxCode(pre);this.buffer.set(),this.selection.restore(),this.utils.restoreScroll();var data=this.clean.getCurrentType(html);html=this.clean.onPaste(html,data);var returned=this.core.callback("paste",html);html="undefined"==typeof returned?html:returned,this.paste.insert(html,data),this.rtePaste=!1,pre&&this.clean.cleanPre(),$(window).off("scroll.redactor-freeze")},this),1))},getPasteBoxCode:function(pre){var html=pre?this.$pasteBox.val():this.$pasteBox.html();return this.$pasteBox.remove(),html},createPasteBox:function(pre){var css={position:"fixed",width:0,top:0,left:"-9999px"};this.$pasteBox=pre?$("<textarea>").val("").css(css):$("<div>").html("").attr("contenteditable","true").css(css),this.paste.appendPasteBox(),this.$pasteBox[0].focus()},appendPasteBox:function(){if(this.detect.isIe())this.core.box().append(this.$pasteBox);else{var $visibleModals=$(".modal-body:visible");$visibleModals.length>0?$visibleModals.append(this.$pasteBox):$("body").append(this.$pasteBox)}},detectClipboardUpload:function(e){e=e.originalEvent||e;var clipboard=e.clipboardData;if(this.detect.isIe())return!0;if(this.detect.isFirefox())return!1;var types=clipboard.types;if(-1!==types.indexOf("public.tiff"))return e.preventDefault(),!1;if(clipboard.items&&clipboard.items.length){var file=clipboard.items[0].getAsFile();if(null===file)return!1;var reader=new FileReader;return reader.readAsDataURL(file),reader.onload=$.proxy(this.paste.insertFromClipboard,this),!0}},clipboardUpload:function(){var imgs=this.$editor.find("img");$.each(imgs,$.proxy(function(i,s){if(-1!==s.src.search(/^data\:image/i)){var formData=window.FormData?new FormData:null;if(window.FormData){this.buffer.set(),this.upload.direct=!0,this.upload.type="image",this.upload.url=this.opts.imageUpload,this.upload.callback=$.proxy(function(data){if(this.detect.isIe())$(s).wrap($("<figure />"));else{var $parent=$(s).parent();this.utils.replaceToTag($parent,"figure")}s.src=data.filelink,this.core.callback("imageUpload",$(s),data)},this);var blob=this.utils.dataURItoBlob(s.src);formData.append("clipboard",1),formData.append(this.opts.imageUploadParam,blob),this.progress.show(),this.upload.send(formData,!1),this.code.sync()}}},this))},insertFromClipboard:function(e){var formData=window.FormData?new FormData:null;if(window.FormData){this.buffer.set(),this.upload.direct=!0,this.upload.type="image",this.upload.url=this.opts.imageUpload,this.upload.callback=this.image.insert;var blob=this.utils.dataURItoBlob(e.target.result);formData.append("clipboard",1),formData.append(this.opts.imageUploadParam,blob),this.progress.show(),this.upload.send(formData,e)}},insert:function(html,data){data.pre?this.insert.raw(html):data.text?this.insert.text(html):this.insert.html(html,data),this.detect.isFirefox()&&this.opts.clipboardImageUpload&&setTimeout($.proxy(this.paste.clipboardUpload,this),100)}}},placeholder:function(){return{enable:function(){setTimeout($.proxy(function(){return this.placeholder.isEditorEmpty()?this.placeholder.show():this.placeholder.hide()},this),5)},show:function(){this.core.editor().addClass("redactor-placeholder")},update:function(text){this.opts.placeholder=text,this.core.editor().attr("placeholder",text)},hide:function(){this.core.editor().removeClass("redactor-placeholder")},is:function(){return this.core.editor().hasClass("redactor-placeholder");
},init:function(){this.placeholder.enabled()&&(this.utils.isEditorRelative()||this.utils.setEditorRelative(),this.placeholder.build(),this.placeholder.buildPosition(),this.placeholder.enable(),this.placeholder.enableEvents())},enabled:function(){return this.opts.placeholder?this.core.element().attr("placeholder",this.opts.placeholder):this.placeholder.isAttr()},enableEvents:function(){this.core.editor().on("keydown.redactor-placeholder."+this.uuid,$.proxy(this.placeholder.enable,this))},disableEvents:function(){this.core.editor().off(".redactor-placeholder."+this.uuid)},build:function(){this.core.editor().attr("placeholder",this.core.element().attr("placeholder"))},buildPosition:function(){var $style=$("<style />");$style.addClass("redactor-placeholder-style-tag"),$style.html("#"+this.core.id()+".redactor-placeholder::after "+this.placeholder.getPosition()),$("head").append($style)},getPosition:function(){return"{ top: "+this.core.editor().css("padding-top")+"; left: "+this.core.editor().css("padding-left")+"; }"},isEditorEmpty:function(){var html=$.trim(this.core.editor().html()).replace(/[\t\n]/g,""),states=["","<p>​</p>","<p>​<br></p>"];return-1!==$.inArray(html,states)},isAttr:function(){return"undefined"!=typeof this.core.element().attr("placeholder")&&""!==this.core.element().attr("placeholder")},destroy:function(){this.core.editor().removeAttr("placeholder"),this.placeholder.hide(),this.placeholder.disableEvents(),$(".redactor-placeholder-style-tag").remove()}}},progress:function(){return{$box:null,$bar:null,target:document.body,show:function(){this.progress.is()?this.progress.$box.show():(this.progress.build(),this.progress.$box.redactorAnimation("fadeIn"))},hide:function(){this.progress.is()&&this.progress.$box.redactorAnimation("fadeOut",{duration:.35},$.proxy(this.progress.destroy,this))},update:function(value){this.progress.show(),this.progress.$bar.css("width",value+"%")},is:function(){return null===this.progress.$box?!1:!0},build:function(){this.progress.$bar=$("<span />"),this.progress.$box=$('<div id="redactor-progress" />'),this.progress.$box.append(this.progress.$bar),$(this.progress.target).append(this.progress.$box)},destroy:function(){this.progress.is()&&this.progress.$box.remove(),this.progress.$box=null,this.progress.$bar=null}}},selection:function(){return{get:function(){return window.getSelection?window.getSelection():document.selection&&"Control"!==document.selection.type?document.selection:null},range:function(sel){return"undefined"==typeof sel&&(sel=this.selection.get()),sel.getRangeAt&&sel.rangeCount?sel.getRangeAt(0):null},is:function(){return this.selection.isCollapsed()?!1:!0},isRedactor:function(){var range=this.selection.range();if(null!==range){var el=range.startContainer.parentNode;if($(el).hasClass("redactor-in")||0!==$(el).parents(".redactor-in").length)return!0}return!1},isCollapsed:function(){var sel=this.selection.get();return null===sel?!1:sel.isCollapsed},update:function(sel,range){null!==range&&(sel.removeAllRanges(),sel.addRange(range))},current:function(){var sel=this.selection.get();return null===sel?!1:sel.anchorNode},parent:function(){var current=this.selection.current();return null===current?!1:current.parentNode},block:function(node){for(node=node||this.selection.current();node;){if(this.utils.isBlockTag(node.tagName))return $(node).hasClass("redactor-in")?!1:node;node=node.parentNode}return!1},inline:function(node){for(node=node||this.selection.current();node;){if(this.utils.isInlineTag(node.tagName))return $(node).hasClass("redactor-in")?!1:node;node=node.parentNode}return!1},element:function(node){for(node||(node=this.selection.current());node;){if(1===node.nodeType)return $(node).hasClass("redactor-in")?!1:node;node=node.parentNode}return!1},prev:function(){var current=this.selection.current();return null===current?!1:this.selection.current().previousSibling},next:function(){var current=this.selection.current();return null===current?!1:this.selection.current().nextSibling},blocks:function(tag){var blocks=[],nodes=this.selection.nodes(tag);$.each(nodes,$.proxy(function(i,node){this.utils.isBlock(node)&&blocks.push(node)},this));var block=this.selection.block();return 0===blocks.length&&block===!1?[]:0===blocks.length&&block!==!1?[block]:blocks},inlines:function(tag){var inlines=[],nodes=this.selection.nodes(tag);$.each(nodes,$.proxy(function(i,node){this.utils.isInline(node)&&inlines.push(node)},this));var inline=this.selection.inline();return 0===inlines.length&&inline===!1?[]:0===inlines.length&&inline!==!1?[inline]:inlines},nodes:function(tag){var filter="undefined"==typeof tag?[]:$.isArray(tag)?tag:[tag],sel=this.selection.get(),range=this.selection.range(sel);if(this.utils.isCollapsed())return[this.selection.current()];var node=range.startContainer,endNode=range.endContainer;if(node===endNode)return[node];for(var nodes=[];node&&node!==endNode;)nodes.push(node=this.selection.nextNode(node));for(node=range.startContainer;node&&node!==range.commonAncestorContainer;)nodes.unshift(node),node=node.parentNode;var resultNodes=[];return $.each(nodes,function(i,s){var tagName=1!==s.nodeType?!1:s.tagName.toLowerCase();$(s).hasClass("redactor-script-tag, redactor-selection-marker")||tagName&&0!==filter.length&&-1===$.inArray(tagName,filter)||resultNodes.push(s)}),0===resultNodes.length?[]:resultNodes},nextNode:function(node){if(node.hasChildNodes())return node.firstChild;for(;node&&!node.nextSibling;)node=node.parentNode;return node?node.nextSibling:null},save:function(){this.marker.insert(),this.savedSel=this.core.editor().html()},restore:function(removeMarkers){var node1=this.marker.find(1),node2=this.marker.find(2);this.detect.isFirefox()&&this.core.editor().focus(),0!==node1.length&&0!==node2.length?this.caret.set(node1,node2):0!==node1.length?this.caret.start(node1):this.core.editor().focus(),removeMarkers!==!1&&(this.marker.remove(),this.savedSel=!1)},node:function(node){$(node).prepend(this.marker.get(1)),$(node).append(this.marker.get(2)),this.selection.restore()},all:function(){this.core.editor().focus();var sel=this.selection.get(),range=this.selection.range(sel);range.selectNodeContents(this.core.editor()[0]),this.selection.update(sel,range)},remove:function(){this.selection.get().removeAllRanges()},replace:function(html){this.insert.html(html)},text:function(){return this.selection.get().toString()},html:function(){var html="",sel=this.selection.get();if(sel.rangeCount){for(var container=document.createElement("div"),len=sel.rangeCount,i=0;len>i;++i)container.appendChild(sel.getRangeAt(i).cloneContents());html=this.clean.onGet(container.innerHTML)}return html},extractEndOfNode:function(node){var sel=this.selection.get(),range=this.selection.range(sel),clonedRange=range.cloneRange();return clonedRange.selectNodeContents(node),clonedRange.setStart(range.endContainer,range.endOffset),clonedRange.extractContents()},removeMarkers:function(){this.marker.remove()},marker:function(num){return this.marker.get(num)},markerHtml:function(num){return this.marker.html(num)}}},shortcuts:function(){return{hotkeysSpecialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},hotkeysShiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},init:function(e,key){return this.opts.shortcuts===!1?(!e.ctrlKey&&!e.metaKey||66!==key&&73!==key||e.preventDefault(),!1):void $.each(this.opts.shortcuts,$.proxy(function(str,command){this.shortcuts.build(e,str,command)},this))},build:function(e,str,command){for(var handler=$.proxy(function(){this.shortcuts.buildHandler(command)},this),keys=str.split(","),len=keys.length,i=0;len>i;i++)"string"==typeof keys[i]&&this.shortcuts.handler(e,$.trim(keys[i]),handler)},buildHandler:function(command){var func;"-1"!==command.func.search(/\./)?(func=command.func.split("."),"undefined"!=typeof this[func[0]]&&this[func[0]][func[1]].apply(this,command.params)):this[command.func].apply(this,command.params)},handler:function(e,keys,origHandler){keys=keys.toLowerCase().split(" ");var special=this.shortcuts.hotkeysSpecialKeys[e.keyCode],character=String.fromCharCode(e.which).toLowerCase(),modif="",possible={};$.each(["alt","ctrl","meta","shift"],function(index,specialKey){e[specialKey+"Key"]&&special!==specialKey&&(modif+=specialKey+"+")}),special&&(possible[modif+special]=!0),character&&(possible[modif+character]=!0,possible[modif+this.shortcuts.hotkeysShiftNums[character]]=!0,"shift+"===modif&&(possible[this.shortcuts.hotkeysShiftNums[character]]=!0));for(var len=keys.length,i=0;len>i;i++)if(possible[keys[i]])return e.preventDefault(),origHandler.apply(this,arguments)}}},storage:function(){return{data:[],add:function(data){data.status=!0,data.url=decodeURI(this.link.removeSelfHostFromUrl(data.url)),this.storage.data[data.url]=data},status:function(url,status){this.storage.data[decodeURI(url)].status=status},observe:function(){var _this=this,$images=this.core.editor().find("[data-image]");$images.each(function(i,s){_this.storage.add({type:"image",node:s,url:s.src,id:$(s).attr("data-image")})});var $files=this.core.editor().find("[data-file]");$files.each(function(i,s){_this.storage.add({type:"file",node:s,url:s.href,id:$(s).attr("data-file")})});var $s3=this.core.editor().find("[data-s3]");$s3.each(function(i,s){var url="IMG"===s.tagName?s.src:s.href;_this.storage.add({type:"s3",node:s,url:url,id:$(s).attr("data-s3")})})},changes:function(){for(var key in this.storage.data){var data=this.storage.data[key],attr="IMG"===data.node.tagName?"src":"href",$el=this.core.editor().find("[data-"+data.type+"]["+attr+'="'+data.url+'"]');0===$el.length?this.storage.status(data.url,!1):this.storage.status(data.url,!0)}return this.storage.data}}},toolbar:function(){return{build:function(){this.button.hideButtons(),this.button.hideButtonsOnMobile(),0!==this.opts.buttons.length&&(this.$toolbar=this.toolbar.createContainer(),this.toolbar.append(),this.button.$toolbar=this.$toolbar,this.button.setFormatting(),this.button.load(this.$toolbar),this.toolbar.setFixed())},createContainer:function(){return $("<ul>").addClass("redactor-toolbar").attr({id:"redactor-toolbar-"+this.uuid,role:"toolbar"})},append:function(){this.opts.toolbarExternal?(this.$toolbar.addClass("redactor-toolbar-external"),$(this.opts.toolbarExternal).html(this.$toolbar)):"textarea"===this.opts.type?this.$box.prepend(this.$toolbar):this.$element.before(this.$toolbar)},setFixed:function(){if(this.opts.toolbarFixed&&!this.opts.toolbarExternal){if(this.opts.toolbarFixedTarget!==document){var $el=$(this.opts.toolbarFixedTarget);this.toolbarOffsetTop=0===$el.length?0:this.core.box().offset().top-$el.offset().top}var late=0!==this.core.box().closest(".modal-body").length?1e3:0;setTimeout($.proxy(function(){if(this.toolbar.observeScroll(!1),this.detect.isDesktop())$(this.opts.toolbarFixedTarget).on("scroll.redactor."+this.uuid,$.proxy(this.toolbar.observeScroll,this));else{var self=this;$(this.opts.toolbarFixedTarget).on("scroll.redactor."+this.uuid,function(){self.core.toolbar().hide(),clearTimeout($.data(this,"scrollCheck")),$.data(this,"scrollCheck",setTimeout(function(){self.core.toolbar().show(),self.toolbar.observeScroll()},250))})}},this),late)}},getBoxTop:function(){return this.opts.toolbarFixedTarget===document?this.core.box().offset().top:this.toolbarOffsetTop},observeScroll:function(start){var tolerance=0;start!==!1&&(tolerance=this.opts.toolbarFixedTarget===document?20:0);var scrollTop=$(this.opts.toolbarFixedTarget).scrollTop(),boxTop=this.toolbar.getBoxTop();scrollTop+this.opts.toolbarFixedTopOffset+tolerance>boxTop?this.toolbar.observeScrollEnable(scrollTop,boxTop):this.toolbar.observeScrollDisable()},observeScrollResize:function(){this.$toolbar.css({width:this.core.box().innerWidth(),left:this.core.box().offset().left})},observeScrollEnable:function(scrollTop,boxTop){if("undefined"!=typeof this.fullscreen&&this.fullscreen.isOpened===!1)return void this.toolbar.observeScrollDisable();var end=boxTop+this.core.box().outerHeight()-32,width=this.core.box().innerWidth(),position=this.detect.isDesktop()?"fixed":"absolute",top=this.detect.isDesktop()?this.opts.toolbarFixedTopOffset:$(this.opts.toolbarFixedTarget).scrollTop()-boxTop,left=this.detect.isDesktop()?this.core.box().offset().left:0;this.opts.toolbarFixedTarget!==document&&(position="absolute",top=this.opts.toolbarFixedTopOffset+$(this.opts.toolbarFixedTarget).scrollTop()-boxTop,left=0),this.$toolbar.addClass("toolbar-fixed-box"),this.$toolbar.css({position:position,width:width,top:top,left:left}),scrollTop>end&&$(".redactor-dropdown-"+this.uuid+":visible").hide(),this.toolbar.setDropdownsFixed(),this.$toolbar.css("visibility",end>scrollTop?"visible":"hidden"),$(window).on("resize.redactor-toolbar."+this.uuid,$.proxy(this.toolbar.observeScrollResize,this))},observeScrollDisable:function(){this.$toolbar.css({position:"relative",width:"auto",top:0,left:0,visibility:"visible"}),this.toolbar.unsetDropdownsFixed(),this.$toolbar.removeClass("toolbar-fixed-box"),$(window).off("resize.redactor-toolbar."+this.uuid)},setDropdownsFixed:function(){var position=this.opts.toolbarFixedTarget===document&&this.detect.isDesktop()?"fixed":"absolute";this.toolbar.setDropdownPosition(position)},unsetDropdownsFixed:function(){this.toolbar.setDropdownPosition("absolute")},setDropdownPosition:function(position){var self=this;$(".redactor-dropdown-"+this.uuid).each(function(){var $el=$(this),$button=self.button.get($el.attr("rel")),top="fixed"===position?self.opts.toolbarFixedTopOffset:$button.offset().top;$el.css({position:position,top:$button.innerHeight()+top+"px"})})}}},upload:function(){return{init:function(id,url,callback){this.upload.direct=!1,this.upload.callback=callback,this.upload.url=url,this.upload.$el=$(id),this.upload.$droparea=$('<div id="redactor-droparea" />'),this.upload.$placeholdler=$('<div id="redactor-droparea-placeholder" />').text(this.lang.get("upload-label")),this.upload.$input=$('<input type="file" name="file" />'),this.upload.$placeholdler.append(this.upload.$input),this.upload.$droparea.append(this.upload.$placeholdler),this.upload.$el.append(this.upload.$droparea),this.upload.$droparea.off("redactor.upload"),this.upload.$input.off("redactor.upload"),this.upload.$droparea.on("dragover.redactor.upload",$.proxy(this.upload.onDrag,this)),this.upload.$droparea.on("dragleave.redactor.upload",$.proxy(this.upload.onDragLeave,this)),this.upload.$input.on("change.redactor.upload",$.proxy(function(e){e=e.originalEvent||e,this.upload.traverseFile(this.upload.$input[0].files[0],e)},this)),this.upload.$droparea.on("drop.redactor.upload",$.proxy(function(e){e.preventDefault(),this.upload.$droparea.removeClass("drag-hover").addClass("drag-drop"),this.upload.onDrop(e)},this))},directUpload:function(file,e){this.upload.direct=!0,this.upload.traverseFile(file,e)},onDrop:function(e){e=e.originalEvent||e;var files=e.dataTransfer.files;if(this.opts.multipleImageUpload)for(var len=files.length,i=0;len>i;i++)this.upload.traverseFile(files[i],e);else this.upload.traverseFile(files[0],e)},traverseFile:function(file,e){if(this.opts.s3)return this.upload.setConfig(file),void this.uploads3.send(file,e);var formData=window.FormData?new FormData:null;if(window.FormData){this.upload.setConfig(file);var name="image"===this.upload.type?this.opts.imageUploadParam:this.opts.fileUploadParam;formData.append(name,file)}this.progress.show(),this.core.callback("uploadStart",e,formData),this.upload.send(formData,e)},setConfig:function(file){this.upload.getType(file),this.upload.direct&&(this.upload.url="image"===this.upload.type?this.opts.imageUpload:this.opts.fileUpload,this.upload.callback="image"===this.upload.type?this.image.insert:this.file.insert)},getType:function(file){this.upload.type=-1===this.opts.imageTypes.indexOf(file.type)?"file":"image",null===this.opts.imageUpload&&null!==this.opts.fileUpload&&(this.upload.type="file")},getHiddenFields:function(obj,fd){return obj===!1||"object"!=typeof obj?fd:($.each(obj,$.proxy(function(k,v){null!==v&&0===v.toString().indexOf("#")&&(v=$(v).val()),fd.append(k,v)},this)),fd)},send:function(formData,e){"image"===this.upload.type?(formData=this.utils.appendFields(this.opts.imageUploadFields,formData),formData=this.utils.appendForms(this.opts.imageUploadForms,formData),formData=this.upload.getHiddenFields(this.upload.imageFields,formData)):(formData=this.utils.appendFields(this.opts.fileUploadFields,formData),formData=this.utils.appendForms(this.opts.fileUploadForms,formData),formData=this.upload.getHiddenFields(this.upload.fileFields,formData));var xhr=new XMLHttpRequest;xhr.open("POST",this.upload.url),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr.onreadystatechange=$.proxy(function(){if(4===xhr.readyState){var data=xhr.responseText;data=data.replace(/^\[/,""),data=data.replace(/\]$/,"");var json;try{json="string"==typeof data?$.parseJSON(data):data}catch(err){json={error:!0}}this.progress.hide(),this.upload.direct||this.upload.$droparea.removeClass("drag-drop"),this.upload.callback(json,this.upload.direct,e)}},this),xhr.send(formData)},onDrag:function(e){e.preventDefault(),this.upload.$droparea.addClass("drag-hover")},onDragLeave:function(e){e.preventDefault(),this.upload.$droparea.removeClass("drag-hover")},clearImageFields:function(){this.upload.imageFields={}},addImageFields:function(name,value){this.upload.imageFields[name]=value},removeImageFields:function(name){delete this.upload.imageFields[name]},clearFileFields:function(){this.upload.fileFields={}},addFileFields:function(name,value){this.upload.fileFields[name]=value},removeFileFields:function(name){delete this.upload.fileFields[name]}}},uploads3:function(){return{send:function(file,e){this.uploads3.executeOnSignedUrl(file,$.proxy(function(signedURL){this.uploads3.sendToS3(file,signedURL,e)},this))},executeOnSignedUrl:function(file,callback){var xhr=new XMLHttpRequest,mark=-1===this.opts.s3.search(/\?/)?"?":"&";xhr.open("GET",this.opts.s3+mark+"name="+file.name+"&type="+file.type,!0),xhr.overrideMimeType&&xhr.overrideMimeType("text/plain; charset=x-user-defined");var that=this;xhr.onreadystatechange=function(e){4===this.readyState&&200===this.status&&(that.progress.show(),callback(decodeURIComponent(this.responseText)))},xhr.send()},createCORSRequest:function(method,url){var xhr=new XMLHttpRequest;return"withCredentials"in xhr?xhr.open(method,url,!0):"undefined"!=typeof XDomainRequest?(xhr=new XDomainRequest,xhr.open(method,url)):xhr=null,xhr},sendToS3:function(file,url,e){var xhr=this.uploads3.createCORSRequest("PUT",url);xhr&&(xhr.onload=$.proxy(function(){var json;if(this.progress.hide(),200!==xhr.status)return json={error:!0},void this.upload.callback(json,this.upload.direct,xhr);var s3file=url.split("?");if(!s3file[0])return!1;if(this.upload.direct||this.upload.$droparea.removeClass("drag-drop"),json={url:s3file[0],id:s3file[0],s3:!0},"file"===this.upload.type){var arr=s3file[0].split("/");json.name=arr[arr.length-1]}this.upload.callback(json,this.upload.direct,e)},this),xhr.onerror=function(){},xhr.upload.onprogress=function(e){},xhr.setRequestHeader("Content-Type",file.type),xhr.setRequestHeader("x-amz-acl","public-read"),xhr.send(file))}}},utils:function(){return{isEmpty:function(html){return html="undefined"==typeof html?this.core.editor().html():html,html=html.replace(/[\u200B-\u200D\uFEFF]/g,""),html=html.replace(/&nbsp;/gi,""),html=html.replace(/<\/?br\s?\/?>/g,""),html=html.replace(/\s/g,""),html=html.replace(/^<p>[^\W\w\D\d]*?<\/p>$/i,""),html=html.replace(/<iframe(.*?[^>])>$/i,"iframe"),html=html.replace(/<source(.*?[^>])>$/i,"source"),html=html.replace(/<[^\/>][^>]*><\/[^>]+>/gi,""),html=html.replace(/<[^\/>][^>]*><\/[^>]+>/gi,""),html=$.trim(html),""===html},isElement:function(obj){try{return obj instanceof HTMLElement}catch(e){return"object"==typeof obj&&1===obj.nodeType&&"object"==typeof obj.style&&"object"==typeof obj.ownerDocument}},strpos:function(haystack,needle,offset){var i=haystack.indexOf(needle,offset);return i>=0?i:!1},dataURItoBlob:function(dataURI){var byteString;byteString=dataURI.split(",")[0].indexOf("base64")>=0?atob(dataURI.split(",")[1]):unescape(dataURI.split(",")[1]);for(var mimeString=dataURI.split(",")[0].split(":")[1].split(";")[0],ia=new Uint8Array(byteString.length),i=0;i<byteString.length;i++)ia[i]=byteString.charCodeAt(i);return new Blob([ia],{type:mimeString})},getOuterHtml:function(el){return $("<div>").append($(el).eq(0).clone()).html()},cloneAttributes:function(from,to){from=from[0]||from,to=$(to);for(var attrs=from.attributes,len=attrs.length;len--;){var attr=attrs[len];to.attr(attr.name,attr.value)}return to},breakBlockTag:function(){var block=this.selection.block(),isEmpty=this.utils.isEmpty(block.innerHTML),tag=block.tagName.toLowerCase();if("pre"===tag||"li"===tag||"td"===tag||"th"===tag)return!1;if(!isEmpty&&this.utils.isStartOfElement(block))return{$block:$(block),$next:$(block).next(),type:"start"};if(!isEmpty&&this.utils.isEndOfElement(block))return{$block:$(block),$next:$(block).next(),type:"end"};var endOfNode=this.selection.extractEndOfNode(block),$nextPart=$("<"+tag+" />").append(endOfNode);return $nextPart=this.utils.cloneAttributes(block,$nextPart),$(block).after($nextPart),{$block:$(block),$next:$nextPart,type:"break"}},inBlocks:function(tags){tags=$.isArray(tags)?tags:[tags];for(var blocks=this.selection.blocks(),len=blocks.length,contains=!1,i=0;len>i;i++)if(blocks[i]!==!1){var tag=blocks[i].tagName.toLowerCase();-1!==$.inArray(tag,tags)&&(contains=!0)}return contains},inInlines:function(tags){tags=$.isArray(tags)?tags:[tags];for(var inlines=this.selection.inlines(),len=inlines.length,contains=!1,i=0;len>i;i++){var tag=inlines[i].tagName.toLowerCase();-1!==$.inArray(tag,tags)&&(contains=!0)}return contains},isTag:function(current,tag){var element=$(current).closest(tag,this.core.editor()[0]);return 1===element.length?element[0]:!1},isBlock:function(block){return null===block?!1:(block=block[0]||block,block&&this.utils.isBlockTag(block.tagName))},isBlockTag:function(tag){return"undefined"==typeof tag?!1:this.reIsBlock.test(tag)},isInline:function(inline){return inline=inline[0]||inline,inline&&this.utils.isInlineTag(inline.tagName)},isInlineTag:function(tag){return"undefined"==typeof tag?!1:this.reIsInline.test(tag)},isRedactorParent:function(el){return el?0===$(el).parents(".redactor-in").length||$(el).hasClass("redactor-in")?!1:el:!1},isCurrentOrParentHeader:function(){return this.utils.isCurrentOrParent(["H1","H2","H3","H4","H5","H6"])},isCurrentOrParent:function(tagName){var parent=this.selection.parent(),current=this.selection.current();if($.isArray(tagName)){var matched=0;return $.each(tagName,$.proxy(function(i,s){this.utils.isCurrentOrParentOne(current,parent,s)&&matched++},this)),0===matched?!1:!0}return this.utils.isCurrentOrParentOne(current,parent,tagName)},isCurrentOrParentOne:function(current,parent,tagName){return tagName=tagName.toUpperCase(),parent&&parent.tagName===tagName?parent:current&&current.tagName===tagName?current:!1},isEditorRelative:function(){var position=this.core.editor().css("position"),arr=["absolute","fixed","relative"];return-1!==$.inArray(arr,position)},setEditorRelative:function(){this.core.editor().addClass("redactor-relative")},freezeScroll:function(){this.freezeScrollTop=$(document).scrollTop(),$(document).scrollTop(this.freezeScrollTop)},unfreezeScroll:function(){"undefined"!=typeof this.freezeScrollTop&&$(document).scrollTop(this.freezeScrollTop)},saveScroll:function(){this.tmpScrollTop=$(document).scrollTop()},restoreScroll:function(){"undefined"!=typeof this.tmpScrollTop&&$(document).scrollTop(this.tmpScrollTop)},isStartOfElement:function(element){return("undefined"!=typeof element||(element=this.selection.block()))&&0===this.offset.get(element)?!0:!1},isEndOfElement:function(element){if("undefined"==typeof element&&(element=this.selection.block(),!element))return!1;var text=$.trim($(element).text()).replace(/[\t\n\r\n]/g,"").replace(/\u200B/g,""),offset=this.offset.get(element);return offset===text.length?!0:!1},removeEmptyAttr:function(el,attr){var $el=$(el);return"undefined"==typeof $el.attr(attr)?!0:""===$el.attr(attr)?($el.removeAttr(attr),!0):!1},replaceToTag:function(node,tag){var replacement;return $(node).replaceWith(function(){replacement=$("<"+tag+" />").append($(this).contents());for(var i=0;i<this.attributes.length;i++)replacement.attr(this.attributes[i].name,this.attributes[i].value);return replacement}),replacement},isSelectAll:function(){return this.selectAll},enableSelectAll:function(){this.selectAll=!0},disableSelectAll:function(){this.selectAll=!1},disableBodyScroll:function(){var $body=$("html"),windowWidth=window.innerWidth;if(!windowWidth){var documentElementRect=document.documentElement.getBoundingClientRect();windowWidth=documentElementRect.right-Math.abs(documentElementRect.left)}var isOverflowing=document.body.clientWidth<windowWidth,scrollbarWidth=this.utils.measureScrollbar();$body.css("overflow","hidden"),isOverflowing&&$body.css("padding-right",scrollbarWidth)},measureScrollbar:function(){var $body=$("body"),scrollDiv=document.createElement("div");scrollDiv.className="redactor-scrollbar-measure",$body.append(scrollDiv);var scrollbarWidth=scrollDiv.offsetWidth-scrollDiv.clientWidth;return $body[0].removeChild(scrollDiv),scrollbarWidth},enableBodyScroll:function(){$("html").css({overflow:"","padding-right":""}),$("body").remove("redactor-scrollbar-measure")},appendFields:function(appendFields,data){if(!appendFields)return data;var $fields=$(appendFields);if(0===$fields.length)return data;return $fields.each(function(){data.append($(this).attr("name"),$(this).val())}),data},appendForms:function(appendForms,data){if(!appendForms)return data;var $forms=$(appendForms);if(0===$forms.length)return data;var formData=$forms.serializeArray();return $.each(formData,function(z,f){data.append(f.name,f.value)}),data},isCollapsed:function(){return this.selection.isCollapsed()},isMobile:function(){return this.detect.isMobile()},isDesktop:function(){return this.detect.isDesktop()},isPad:function(){return this.detect.isIpad()}}},browser:function(){return{webkit:function(){return this.detect.isWebkit()},ff:function(){return this.detect.isFirefox()},ie:function(){return this.detect.isIe()}}}},$(window).on("load.tools.redactor",function(){$('[data-tools="redactor"]').redactor()}),Redactor.prototype.init.prototype=Redactor.prototype}(jQuery),function($){function redactorAnimation(element,animation,options,callback){var opts={duration:.5,iterate:1,delay:0,prefix:"redactor-",timing:"linear"};this.animation=animation,this.slide="slideDown"===this.animation||"slideUp"===this.animation,this.$element=$(element),this.prefixes=["","-moz-","-o-animation-","-webkit-"],this.queue=[],"function"==typeof options?(callback=options,this.opts=opts):this.opts=$.extend(opts,options),this.slide&&this.$element.height(this.$element.height()),this.init(callback)}$.fn.redactorAnimation=function(animation,options,callback){return this.each(function(){new redactorAnimation(this,animation,options,callback)})},redactorAnimation.prototype={init:function(callback){this.queue.push(this.animation),this.clean(),"show"===this.animation?(this.opts.timing="linear",this.$element.removeClass("hide").show(),"function"==typeof callback&&callback(this)):"hide"===this.animation?(this.opts.timing="linear",this.$element.hide(),"function"==typeof callback&&callback(this)):this.animate(callback)},animate:function(callback){this.$element.addClass("animated").css("display","").removeClass("hide"),this.$element.addClass(this.opts.prefix+this.queue[0]),this.set(this.opts.duration+"s",this.opts.delay+"s",this.opts.iterate,this.opts.timing);var _callback=this.queue.length>1?null:callback;this.complete("AnimationEnd",$.proxy(function(){this.$element.hasClass(this.opts.prefix+this.queue[0])&&(this.clean(),this.queue.shift(),this.queue.length&&this.animate(callback))},this),_callback)},set:function(duration,delay,iterate,timing){for(var len=this.prefixes.length;len--;)this.$element.css(this.prefixes[len]+"animation-duration",duration),this.$element.css(this.prefixes[len]+"animation-delay",delay),this.$element.css(this.prefixes[len]+"animation-iteration-count",iterate),this.$element.css(this.prefixes[len]+"animation-timing-function",timing)},clean:function(){this.$element.removeClass("animated"),this.$element.removeClass(this.opts.prefix+this.queue[0]),this.set("","","","")},complete:function(type,make,callback){this.$element.one(type.toLowerCase()+" webkit"+type+" o"+type+" MS"+type,$.proxy(function(){"function"==typeof make&&make(),"function"==typeof callback&&callback(this);var effects=["fadeOut","slideUp","zoomOut","slideOutUp","slideOutRight","slideOutLeft"];-1!==$.inArray(this.animation,effects)&&this.$element.css("display","none"),this.slide&&this.$element.css("height","")},this))}}}(jQuery);
eval(function(p,a,c,k,e,r){if(e=function(c){return(a>c?"":e(parseInt(c/a)))+((c%=a)>35?String.fromCharCode(c+29):c.toString(36))},!"".replace(/^/,String)){for(;c--;)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}],e=function(){return"\\w+"},c=1}for(;c--;)k[c]&&(p=p.replace(new RegExp("\\b"+e(c)+"\\b","g"),k[c]));return p}("(j($){'jB jC';if(!cQ.54.8y){cQ.54.8y=j(cR){q fn=c;E j(){E fn.5V(cR)}}}q 1T=0;$.fn.G=j(2W){q 2I=[];q 3p=7D.54.cS.55(cT,1);if(1h 2W==='ag'){c.1G(j(){q 5W=$.V(c,'G');q 1A;if(2W.3s(/\\./)!=='-1'){1A=2W.4e('.');if(1h 5W[1A[0]]!=='1k'){1A=5W[1A[0]][1A[1]]}}R{1A=5W[2W]}if(1h 5W!=='1k'&&$.6C(1A)){q 8z=1A.5V(5W,3p);if(8z!==1k&&8z!==5W){2I.3k(8z)}}R{$.6D('jD jE 8A \"'+2W+'\" 3a 3q')}})}R{c.1G(j(){$.V(c,'G',{});$.V(c,'G',3q(c,2W))})}if(2I.1b===0){E c}R if(2I.1b===1){E 2I[0]}R{E 2I}};j 3q(el,2W){E 1N 3q.54.2X(el,2W)}$.3q=3q;$.3q.jF='1.2.2';$.3q.ah=['22','3e','L','2m','29','1d','1O','1X','23','M','2c','1a','1P','1Q','2t','1n','3f','14','1M','1p','2J','1I','4y','O','2Y','1Y','1H','1e','1V','2U','3g','47','1U','2K','N','4f','3X','1q','1s','6E','1c','cU'];$.3q.56={};$.3q.F={3C:J,1I:'en',ai:'jG',2t:J,cV:J,cW:J,6F:J,7E:J,aj:J,ak:J,al:J,5X:J,4L:{},1U:J,2Y:1i,6G:1i,am:J,an:1i,ao:1i,ap:['h1','h2','h3','h4','h5','h6','8B','jH','jI','jJ','5p','cX','3Q','3t','ol','li','2D','1J','2S','3x'],7F:['6H','b','u','em','i','23','4z','cY','cZ','d0','aq','ar','8C','q','d1','d2'],as:J,5Y:4,8D:J,d3:1i,3e:J,at:J,8E:J,48:1Z,8F:'1Q',d4:J,d5:J,d6:1i,8G:1i,d7:1i,au:1i,57:1Z,d8:'1Q',d9:J,da:J,8H:1i,3R:J,db:1i,dc:J,7G:30,de:'av-8I',1q:1i,df:1i,49:1r,5Z:0,8J:J,22:J,aw:J,ax:['p','2D','1J','h1','h2','h3','h4','h5','h6'],ay:J,3I:['2x','4A','4B','4M','4a','1n','1Q','O','6I'],az:[],aA:[],3Y:1i,4f:{'3F+5q+m, 5r+5q+m':{1A:'14.aB'},'3F+b, 5r+b':{1A:'14.2x',5s:['4A']},'3F+i, 5r+i':{1A:'14.2x',5s:['4B']},'3F+h, 5r+h':{1A:'14.2x',5s:['dg']},'3F+l, 5r+l':{1A:'14.2x',5s:['dh']},'3F+k, 5r+k':{1A:'O.2n'},'3F+5q+7':{1A:'1Y.4q',5s:['6J']},'3F+5q+8':{1A:'1Y.4q',5s:['7H']}},di:J,dj:['4M','4B','4A'],dk:{b:'4A',6H:'4A',i:'4B',em:'4B',4z:'4M',6K:'4M'},5t:{en:{\"2x\":\"jK\",\"1n\":\"jL\",\"1Q\":\"jM\",\"O\":\"jN\",\"4A\":\"jO\",\"4B\":\"jP\",\"4M\":\"jQ\",\"6L\":\"jR\",\"4A-5u\":\"B\",\"4B-5u\":\"I\",\"4M-5u\":\"S\",\"6L-5u\":\"U\",\"4a\":\"jS\",\"O-1M\":\"8K O\",\"O-3h\":\"dm O\",\"O-in-1N-4g\":\"jT O in 1N 4g\",\"4N\":\"jU\",\"6M\":\"aC\",\"3Z\":\"jV\",\"1M\":\"8K\",\"3l\":\"jW\",\"60\":\"dn\",\"1l\":\"jX\",\"3h\":\"dm\",\"1E\":\"jY\",\"do\":\"jZ 1l\",\"aD\":\"k0\",\"23\":\"k1\",\"dp\":\"6N 1\",\"dq\":\"6N 2\",\"dr\":\"6N 3\",\"ds\":\"6N 4\",\"du\":\"6N 5\",\"dv\":\"6N 6\",\"6O\":\"k2\",\"aE\":\"aE\",\"7H\":\"k3 dw\",\"6J\":\"k4 dw\",\"6P\":\"k5\",\"3f\":\"k6\",\"6I\":\"k7\",\"1s-2o\":\"k8 1Q k9 or \",\"4C\":\"ka\",\"dx\":\"kb\",\"dy\":\"kc\",\"dz-dA-2o\":\"kd 1l T\"}},Y:'3b',14:J,2m:[],7I:[],62:['a','2h','6H','6K','b','u','em','i','23','4z','cY','cZ','d0','aq','ar','8C','q','d1','d2'],58:['1J','3t','ol','li','p','h1','h2','h3','h4','h5','h6','dl','dt','dd','1z','3Q','2D','ke','3x','2S','dB','2L','aF','dC','dD','dE','63'],3g:1i,aG:['8B','1z','1J','64','3t','ol','h1','h2','h3','h4','h5','h6','dl','2D','3x','dB','2L','aF','dC','dD','dE','3y','3i','3Y','63','dF','3u','3b','1d','kf','kg','dG','kh','hr','ki','kj','kk','kl','2S','km','kn','ko','p'],41:'<p>&#8L;</p>',aH:'&#8L;',dH:['1n/dI','1n/kp','1n/dJ'],5a:6Q.5a.3J(),1V:{7J:[]},4b:{7K:/5v?:\\/\\/(?:[0-9A-Z-]+\\.)?(?:kq\\.be\\/|dK\\.8M\\S*[^\\w\\-\\s])([\\w\\-]{11})(?=[^\\w\\-]|$)(?![?=&+%\\w.\\-]*(?:['\"][^<>]*>|<\\/a>))[?=&+%\\w.-]*/ig,7L:/5v?:\\/\\/(6R\\.)?dL.8M\\/(\\d+)($|\\/)/,8N:/((5v?|6R)[^\\s]+\\.)(kr?g|dI|dJ)(\\?[^\\s-]+)?/ig,1x:/(5v?:\\/\\/(?:6R\\.|(?!6R))[^\\s\\.]+\\.[^\\s]{2,}|6R\\.[^\\s]+\\.[^\\s]{2,})/ig}};3q.fn=$.3q.54={2u:{5b:8,4O:46,dM:38,dN:40,4P:13,8O:32,7M:27,aI:9,dO:17,dP:91,dQ:16,dR:18,ks:39,kt:37,dS:91},2X:j(el,2W){c.$1t=$(el);c.1T=1T++;c.dT(2W);c.dU();if(c.F.cW&&!c.$1t.2Z('G-26-3v-3h')){E c.dV(2W)}R if(c.$1t.2Z('G-26-3v-3h')){c.$1t.2T('G-26-3v-3h')}c.dW=1N 2j('^('+c.F.58.4h('|').8P()+')$','i');c.dX=1N 2j('^('+c.F.62.4h('|').8P()+')$','i');c.F.8G=(c.F.48===1Z)?J:c.F.8G;c.F.8H=(c.F.57===1Z)?J:c.F.8H;c.ax={};c.1I.3K();$.5w(c.F.4f,c.F.di);c.$T=c.$1t;c.dY();c.M.1m('1W');c.M.1m('dZ');c.1W=1i;c.29.1W()},dY:j(){if(c.29.8Q()||c.F.14){c.F.Y='14'}R if(c.29.4r('8R')){c.F.Y='1z'}R if(c.29.4r('6S')){c.F.Y='1J'}},dV:j(2W){c.$1t.on('26.G-26-3v-3h',$.1j(j(){c.6T(2W)},c));c.$1t.2k('G-26-3v-3h');E},6T:j(2W){$.5w(2W.4L,{dZ:j(){c.1M.K(c.1H.1f(),J)},6T:j(){c.N.2M();c.8S=c.23.1f();$(c.F.8T).2a('.G-26-3v-3h');$(c.F.8T).2n().on('26.G-26-3v-3h',$.1j(j(e){e.2d();c.M.5c();c.1P.6U=J;c.$1t.C(c.8S);c.M.1m('6M',c.8S);c.1P.6U=1i;c.8S='';$(c.F.8T).2b();$(c.F.8U).2b();c.$1t.on('26.G-26-3v-3h',$.1j(j(){c.6T(2W)},c));c.$1t.2k('G-26-3v-3h')},c));$(c.F.8U).2a('.G-26-3v-3h');$(c.F.8U).2n().on('26.G-26-3v-3h',$.1j(j(e){e.2d();c.M.5c();c.M.1m('3l',c.23.1f());$(c.F.8T).2b();$(c.F.8U).2b();c.$1t.on('26.G-26-3v-3h',$.1j(j(){c.6T(2W)},c));c.$1t.2k('G-26-3v-3h')},c))}});c.$1t.G(2W);c.$1t.2a('.G-26-3v-3h')},dT:j(2W){q 56={};if(1h $.3q.56.7N!=='1k'){if(c.$1t.2Z($.3q.56.7N)){56=$.3q.56}}R{56=$.3q.56}c.F=$.5w({},$.5w(1i,{},$.3q.F),$.5w(1i,{},56),c.$1t.V(),2W)},aJ:j(3y){E ku.kv(3y).5d(j(8V){E 1h 3y[8V]==='j'})},dU:j(){q 2i=$.3q.ah.1b;3a(q i=0;i<2i;i++){c.e0($.3q.ah[i])}},e0:j(67){if(1h c[67]==='1k'){E}c[67]=c[67]();q 5x=c.aJ(c[67]);q 2i=5x.1b;3a(q z=0;z<2i;z++){c[67][5x[z]]=c[67][5x[z]].8y(c)}},22:j(){E{4Q:J,6V:j(){if(c.F.22){c.N.1f().aK()}},kw:j(){if(c.F.22){c.N.1f().e1()}},29:j(){if(c.2c.5y()){E}c.1d.aL();c.1d.aM();if(c.F.3I.1b===0){E}c.$22=c.22.8W();if(c.F.aw!==J){c.$22.2e('2N',c.F.aw)}c.22.1C();c.1d.$1q=c.$22;c.1d.aN();c.1d.3K(c.$22);c.M.T().on('e2.G',c,$.1j(j(e){if(c.N.1l()!==''){c.22.2n(e)}},c))},1C:j(){c.$22.aO('3c')},8W:j(){E $('<3t>').2k('G-22').12({'id':'G-22-'+c.1T,'68':'1q'}).2b()},2n:j(e){c.1H.1D();c.N.3l();c.N.2M(J);$('.G-22').2b();q aP=0;q 2N=c.$22.7O();if($(2G).2N()<(e.aQ+2N)){aP=8X}c.$22.2e({3m:(e.aQ-aP)+'4D',2y:(e.e3+10+$(1r).3L())+'4D'}).2n();c.22.4Q=1i;c.22.e4()},e4:j(){$(1r).on('4i.G-22.'+c.1T,$.1j(j(e){q 1a=$(e.1R).2z('.G-1a').1b;if($(e.1R).2z(c.$22).1b===0&&1a===0){q 2b=c.22.2b(e);if(2b!==J){c.1H.1D()}}},c)).on('1p.G-22.'+c.1T,$.1j(j(e){q 1g=e.69;if((!c.1c.4E(e.1R)&&!$(e.1R).2Z('G-in'))||$(e.1R).2z('#G-1e').1b!==0){E}if(1g===c.2u.7M){c.N.1f().aK();c.1H.1D()}R if(1g===c.2u.5b||1g===c.2u.4O){q 1v=c.N.1f();q 15=c.N.15(1v);15.5z();c.1H.1D()}R if(1g===c.2u.4P){c.N.1f().e1();c.1H.1D()}if(c.22.4Q){c.22.2b(e)}R{c.N.1f().aK();c.1H.1D()}},c))},2b:j(e){q 3F=e.6a||e.5A||(e.5e&&e.aR);if(3F){E J}c.1d.7P();c.$22.7Q(5B);c.22.4Q=J;$(1r).2a('4i.G-22.'+c.1T)}}},3e:j(){E{4Q:J,C:J,2X:j(){if(!c.F.3e){E}c.3e.4Q=1i;c.3e.1S=(c.F.at)?c.F.at:c.$3b.12('1S')},is:j(){E c.3e.4Q},4F:j(){if(!c.F.3e){E}c.3e.6W=c.23.1f();if(c.3e.C===c.3e.6W){E}q V={};V.1S=c.3e.1S;V[c.3e.1S]=c.3e.6W;V=c.3e.7R(V);q e5=$.kx({1x:c.F.3e,Y:'ky',V:V});e5.kz(c.3e.e6)},7R:j(V){if(c.F.8E===J||1h c.F.8E!=='3y'){E V}$.1G(c.F.8E,$.1j(j(k,v){if(v!==1Z&&v.7S().4R('#')===0){v=$(v).2I()}V[k]=v},c));E V},e6:j(V){q 2v;6X{2v=$.e7(V)}6Y(e){2v=V}q e8=(1h 2v.6D==='1k')?'3e':'kA';c.M.1m(e8,c.3e.1S,2v);c.3e.C=c.3e.6W},aS:j(){c.3e.4Q=J;e9(c.8Y)}}},L:j(){E{2x:j(1u,12,1F,Y){1u=(1u==='aD')?'2D':1u;c.L.1K=['p','2D','1J','h1','h2','h3','h4','h5','h6','1z','2S'];if($.3S(1u,c.L.1K)===-1){E}if(1u==='p'&&1h 12==='1k'){12='21'}c.1U.2b();c.2m.2A();E(c.1c.4j())?c.L.8Z(1u,12,1F,Y):c.L.92(1u,12,1F,Y)},8Z:j(1u,12,1F,Y){c.N.3l();q L=c.N.L();q 4k=L.1o.3J();if($.3S(4k,c.L.1K)===-1){c.N.2M();E}if(4k===1u){1u='p'}q 3z=c.1c.42(L,1u);if(1h 12==='3y'){Y=1F;3a(q 1g in 12){3z=c.L.4S(3z,1g,12[1g],Y)}}R{3z=c.L.4S(3z,12,1F,Y)}if(1u==='1J'&&3z.1b===1){$(3z).C($.3d($(3z).C()))}c.N.2M();c.L.aT(3z);E 3z},92:j(1u,12,1F,Y){c.N.3l();q 3z=[];q 2O=c.N.2O();q 2i=2O.1b;3a(q i=0;i<2i;i++){q 4k=2O[i].1o.3J();if($.3S(4k,c.L.1K)!==-1){q L=c.1c.42(2O[i],1u);if(1h 12==='3y'){Y=1F;3a(q 1g in 12){L=c.L.4S(L,1g,12[1g],Y)}}R{L=c.L.4S(L,12,1F,Y)}3z.3k(L);c.L.aT(L)}}c.N.2M();if(1u==='1J'&&3z.1b!==0){q 2C=3z[0];$.1G(3z,j(i,s){if(i!==0){$(2C).1C(\"\\n\"+$.3d(s.C()));$(s).1D()}});3z=[];3z.3k(2C)}E 3z},aT:j(K){K=K[0]||K;q 1K=c.F.62;q 2O=['6S','ea','eb','ec','ed','ee','ef'];if($.3S(K.1o,2O)===-1){E}if(K.1o!=='6S'){q 5C=1K.4R('a');1K.eg(5C,1)}$(K).1y(1K.4h(',')).6b('.G-N-1H').3j().93()},4S:j(L,12,1F,Y){if(1h 12==='1k'){E L}q 1A=(1h Y==='1k')?'Q':Y;if(12==='21'){L=c.L[1A+'eh'](1F,L)}R{if(1A==='1D'){L=c.L[1A+'6Z'](12,L)}R if(1A==='ei'){L=c.L[1A+'6Z'](12,L)}R{L=c.L[1A+'6Z'](12,1F,L)}}E L},4T:j(L){E(1h L==='1k')?c.N.2O():L},ej:j(1F,L){E $(c.L.4T(L)).2P('21').2k(1F)[0]},7T:j(1F,L){E $(c.L.4T(L)).7T(1F)[0]},2k:j(1F,L){E $(c.L.4T(L)).2k(1F)[0]},2T:j(1F,L){E $(c.L.4T(L)).2T(1F)[0]},ek:j(L){E $(c.L.4T(L)).2P('21')[0]},eo:j(12,1F,L){L=c.L.2P(12,L);E $(L).12(12,1F)[0]},ep:j(12,1F,L){L=c.L.4T(L);q 2q=c;q 3D=[];$.1G(L,j(i,s){q $el=$(s);if($el.12(12)){3D.3k(2q.L.2P(12,s))}R{3D.3k(2q.L.94(12,1F,s))}});E 3D},94:j(12,1F,L){E $(c.L.4T(L)).12(12,1F)[0]},2P:j(12,L){E $(c.L.4T(L)).2P(12)[0]},er:j(L){L=c.L.4T(L);q 3D=[];$.1G(L,j(i,s){if(1h s.4s==='1k'){3D.3k(s)}q $el=$(s);q 2i=s.4s.1b;3a(q z=0;z<2i;z++){$el.2P(s.4s[z].1S)}3D.3k($el[0])});E 3D}}},2m:j(){E{2A:j(Y){if(1h Y==='1k'||Y==='95'){c.2m.es()}R{c.2m.et()}},es:j(){c.N.3l();q 2p=c.F.2m[c.F.2m.1b-1];q 1w=c.M.T().C();if(2p!==1w){c.F.2m.3k(1w)}c.N.2M()},et:j(){c.N.3l();c.F.7I.3k(c.M.T().C());c.N.2M()},eu:j(){c.M.T().C(c.F.2m.ev())},ew:j(){c.M.T().C(c.F.7I.ev())},5D:j(){c.F.2m.3k(c.M.T().C())},95:j(){if(c.F.2m.1b===0){E}c.2m.2A('aU');c.2m.eu();c.N.2M()},aU:j(){if(c.F.7I.1b===0){E}c.2m.2A('95');c.2m.ew();c.N.2M()}}},29:j(){E{1W:j(){if(c.F.Y==='14'){c.F.Y='14'}R if(c.F.Y==='1z'){q C=$.3d(c.$T.C());if(C===''){c.$T.C(c.F.41)}}R if(c.F.Y==='3b'){c.29.ex()}c.29.ey();c.29.ez();c.29.eA();c.29.eB();c.29.eC()},eD:j(){c.$2f=$('<1z 21=\"G-2f\" 68=\"kB\" />')},ey:j(){c.M.T().2k('G-in')},ez:j(){q id=(c.F.Y==='3b')?'G-1T-'+c.1T:c.$1t.12('id');c.M.T().12('id',(1h id==='1k')?'G-1T-'+c.1T:id)},eE:j(){q 1S=c.$1t.12('1S');E(1h 1S==='1k')?'kC-'+c.1T:1S},eF:j(){c.$T=$('<1z />');c.$3b=c.$1t;c.$1t.12('1S',c.29.eE());c.$2f.kD(c.$1t).1C(c.$T).1C(c.$1t);c.$T.2k('G-T');c.$1t.2b();c.$2f.70('<2h 21=\"G-9a-2o\" id=\"G-9a-'+c.1T+'\" 3M-aV=\"J\">'+c.1I.1f('dz-dA-2o')+'</2h>');c.$T.12({'3M-kE':'G-9a-'+c.1T,'68':'kF'})},ex:j(){c.29.eD();c.29.eF();c.23.1W(c.M.3b().2I());c.M.3b().2I(c.1X.7U(c.$T.C()))},4r:j(1u){E(c.$1t[0].1o===1u)},8Q:j(){E(!c.29.4r('kG')&&!c.29.4r('8R')&&!c.29.4r('6S'))},eA:j(){c.M.T().12({'aW':1i})},eB:j(){if(c.F.Y==='14'){c.F.6G=J}if(c.F.Y==='14'||c.F.Y==='1J'){c.F.eG=J;c.F.1q=J;c.F.22=J;c.F.2Y=J}if(c.F.6F){c.M.T().2k('G-6F')}if(c.F.Y!=='3b'){E}c.M.2f().12('eH',c.F.ai);c.M.T().12('eH',c.F.ai);if(c.F.7E){c.M.T().12('7E',c.F.7E)}if(c.F.aj){c.M.T().2e('eI-4t',c.F.aj)}R{c.M.T().2e('eI-4t','kH')}if(c.F.ak){c.M.T().2e('9b-4t',c.F.ak)}if(c.F.al){c.M.T().2e({'9b-2N':c.F.al,'7V':'eJ'})}},eC:j(){c.29.eK();c.1P.2X();c.29.eL();if(c.F.1q||c.F.22){c.7W=c.1d.2X()}if(c.F.22){c.22.29()}R if(c.F.1q){c.1q.29()}if(c.2c.5y()&&c.F.eG&&c.F.22){c.F.1q=1i;c.1q.29()}if(c.F.22||c.F.1q){c.M.T().on('e2.G-1V.'+c.1T+' 2J.G-1V.'+c.1T+' 2t.G-1V.'+c.1T+' 5E.G-1V.'+c.1T,$.1j(c.1V.1q,c));c.M.1t().on('5F.1m.G',$.1j(j(){c.1d.7P()},c))}c.1e.eM();c.29.5X();c.3e.2X();c.23.C=c.23.7X(c.M.T().C());c.M.1m('2X');c.M.1m('6T');c.3X.1V();c.1W=J},eL:j(){if(c.F.2Y){c.2Y.2x()}c.1U.2X();if(c.F.2t){3E(c.2t.1W,5B)}R if(c.F.cV){3E(c.2t.2E,5B)}},eK:j(){6X{1r.4U('kI',J,J);1r.4U('kJ',J,J);1r.4U(\"kK\",J,J)}6Y(e){}},5X:j(){if(!c.F.5X){E}$.1G(c.F.5X,$.1j(j(i,s){q 1A=(1h aX!=='1k'&&1h aX[s]!=='1k')?aX:3q.fn;if(!$.6C(1A[s])){E}c[s]=1A[s]();q 5x=c.aJ(c[s]);q 2i=5x.1b;3a(q z=0;z<2i;z++){c[s][5x[z]]=c[s][5x[z]].8y(c)}if(1h c[s].5t!=='1k'){q 1I={};if(1h c[s].5t[c.F.1I]!=='1k'){1I=c[s].5t[c.F.1I]}R if(1h c[s].5t[c.F.1I]==='1k'&&1h c[s].5t.en!=='1k'){1I=c[s].5t.en}q 2q=c;$.1G(1I,j(i,s){if(1h 2q.F.7Y[i]==='1k'){2q.F.7Y[i]=s}})}if($.6C(c[s].2X)){c[s].2X()}},c))}}},1d:j(){E{1q:j(){E(1h c.1d.$1q==='1k'||!c.1d.$1q)?c.$1q:c.1d.$1q},2X:j(){E{2x:{1E:c.1I.1f('2x'),1a:{p:{1E:c.1I.1f('do'),1A:'L.2x'},2D:{1E:c.1I.1f('aD'),1A:'L.2x'},1J:{1E:c.1I.1f('23'),1A:'L.2x'},h1:{1E:c.1I.1f('dp'),1A:'L.2x'},h2:{1E:c.1I.1f('dq'),1A:'L.2x'},h3:{1E:c.1I.1f('dr'),1A:'L.2x'},h4:{1E:c.1I.1f('ds'),1A:'L.2x'},h5:{1E:c.1I.1f('du'),1A:'L.2x'},h6:{1E:c.1I.1f('dv'),1A:'L.2x'}}},4A:{1E:c.1I.1f('4A-5u'),2o:c.1I.1f('4A'),1A:'14.2x'},4B:{1E:c.1I.1f('4B-5u'),2o:c.1I.1f('4B'),1A:'14.2x'},4M:{1E:c.1I.1f('4M-5u'),2o:c.1I.1f('4M'),1A:'14.2x'},6L:{1E:c.1I.1f('6L-5u'),2o:c.1I.1f('6L'),1A:'14.2x'},4a:{1E:c.1I.1f('4a'),1a:{7H:{1E:'&eN; '+c.1I.1f('7H'),1A:'1Y.4q'},6J:{1E:'1. '+c.1I.1f('6J'),1A:'1Y.4q'},6P:{1E:'< '+c.1I.1f('6P'),1A:'3f.71',1V:{1t:'li',72:{12:{'21':'G-1a-O-9c','3M-5f':1i}}}},3f:{1E:'> '+c.1I.1f('3f'),1A:'3f.7Z',1V:{1t:'li',72:{12:{'21':'G-1a-O-9c','3M-5f':1i}}}}}},3t:{1E:'&eN; '+c.1I.1f('dx'),1A:'1Y.4q'},ol:{1E:'1. '+c.1I.1f('dy'),1A:'1Y.4q'},6P:{1E:c.1I.1f('6P'),1A:'3f.71'},3f:{1E:c.1I.1f('3f'),1A:'3f.7Z'},1n:{1E:c.1I.1f('1n'),1A:'1n.2n'},1Q:{1E:c.1I.1f('1Q'),1A:'1Q.2n'},O:{1E:c.1I.1f('O'),1a:{O:{1E:c.1I.1f('O-1M'),1A:'O.2n',1V:{1t:'a',in:{1E:c.1I.1f('O-3h'),},72:{1E:c.1I.1f('O-1M')}}},4N:{1E:c.1I.1f('4N'),1A:'O.4N',1V:{1t:'a',72:{12:{'21':'G-1a-O-9c','3M-5f':1i}}}}}},6I:{1E:c.1I.1f('6I'),1A:'4y.1M'}}},aN:j(){$.1G(c.7W.2x.1a,$.1j(j(i,s){if($.3S(i,c.F.ax)===-1){60 c.7W.2x.1a[i]}},c))},aL:j(){if(c.F.az.1b!==0){c.1d.aY(c.F.az)}},aM:j(){if(c.2c.5y()&&c.F.aA.1b!==0){c.1d.aY(c.F.aA)}},aY:j(3I){$.1G(3I,$.1j(j(i,s){q 5C=c.F.3I.4R(s);c.F.3I.eg(5C,1)},c))},3K:j($1q){c.1d.3I=[];$.1G(c.F.3I,$.1j(j(i,2r){if(!c.7W[2r]||(2r==='1Q'&&!c.1Q.is())||(2r==='1n'&&!c.1n.is())){E}$1q.1C($('<li>').1C(c.1d.29(2r,c.7W[2r])))},c))},29:j(2r,2l){if(c.F.1q===J){E}q $1d=$('<a 2g=\"kL:kM(1Z);\" 21=\"4l-1d 4l-'+2r+'\" 1E=\"'+2l.1E+'\" 4m=\"'+2r+'\" />').C(2l.1E);$1d.12({'68':'1d','3M-2o':2l.1E,'7E':'-1'});if(1h 2l.2o!=='1k'){$1d.12('3M-2o',2l.2o);$1d.12('1E',2l.2o)}if(2l.1A||2l.2H||2l.1a){c.1d.eO($1d,2r,2l)}if(2l.1a){$1d.2k('G-1q-O-1a').12('3M-eP',1i);q $1a=$('<3t 21=\"G-1a G-1a-'+c.1T+' G-1a-2f-'+2r+'\" 3i=\"9d: aZ;\">');$1d.V('1a',$1a);c.1a.29(2r,$1a,2l.1a)}c.1d.3I.3k($1d);E $1d},kN:j(){E c.1d.1q().1y('a.4l-1d')},kO:j(){E c.1d.3I},eO:j($1d,2r,2l){$1d.on('4i',$.1j(j(e){e.2d();if($1d.2Z('G-1d-5f')){E J}q Y='1A';q 1m=2l.1A;if(2l.2H){Y='2H';1m=2l.2H}R if(2l.1a){Y='1a';1m=J}c.1d.4q(e,2r,Y,1m);E J},c))},4q:j(e,2r,Y,1m,3p){if(c.2c.5G()||!c.2c.3G()){c.1c.eQ();e.80=J}if(Y==='2H'){c.14.2x(1m)}R if(Y==='1a'){c.1a.2n(e,2r)}R{c.1d.eR(e,1m,2r,3p)}if(Y!=='1a'){c.1a.74(J)}if(c.F.22&&Y!=='1a'){c.22.2b(e)}if(c.2c.5G()||!c.2c.3G()){c.1c.eS()}},eR:j(e,1m,2r,3p){q 1A;3p=(1h 3p==='1k')?2r:3p;if($.6C(1m)){1m.55(c,2r)}R if(1m.3s(/\\./)!=='-1'){1A=1m.4e('.');if(1h c[1A[0]]==='1k'){E}if(1h 3p==='3y'){c[1A[0]][1A[1]].5V(c,3p)}R{c[1A[0]][1A[1]].55(c,3p)}}R{if(1h 3p==='3y'){c[1m].5V(c,3p)}R{c[1m].55(c,3p)}}c.1V.3I(e,2r)},eT:j(){E c.1d.3I},1f:j(1g){if(c.F.1q===J){E}E c.1d.1q().1y('a.4l-'+1g)},2A:j(1g,1E){if(c.F.1q===J){E}q $2s=c.1d.1q().1y('a.4l-'+1g);$2s.C(1E).12('3M-2o',1E);E $2s},5D:j(1g,1E){if(c.F.1q===J){E}q 2s=c.1d.29(1g,{1E:1E});c.1d.1q().1C($('<li>').1C(2s));E 2s},kP:j(1g,1E){if(c.F.1q===J){E}q 2s=c.1d.29(1g,{1E:1E});c.1d.1q().70($('<li>').1C(2s));E 2s},kQ:j(eU,1g,1E){if(c.F.1q===J){E}q 2s=c.1d.29(1g,{1E:1E});q $2s=c.1d.1f(eU);if($2s.1b!==0){$2s.1L().2w($('<li>').1C(2s))}R{c.1d.1q().1C($('<li>').1C(2s))}E 2s},kR:j(eV,1g,1E){if(c.F.1q===J){E}q 2s=c.1d.29(1g,{1E:1E});q $2s=c.1d.1f(eV);if($2s.1b!==0){$2s.1L().4G($('<li>').1C(2s))}R{c.1d.1q().1C($('<li>').1C(2s))}E 2s},kS:j($2s,eW){$2s.C(eW)},b0:j($2s,1m){if(1h $2s==='1k'||c.F.1q===J){E}q Y=(1m==='1a')?'1a':'1A';q 1g=$2s.12('4m');$2s.on('4i',$.1j(j(e){if($2s.2Z('G-1d-5f')){E J}c.1d.4q(e,1g,Y,1m)},c))},b1:j($2s,1a){if(c.F.1q===J){E}$2s.2k('G-1q-O-1a').12('3M-eP',1i);q 1g=$2s.12('4m');c.1d.b0($2s,'1a');q $1a=$('<1z 21=\"G-1a G-1a-'+c.1T+' G-1a-2f-'+1g+'\" 3i=\"9d: aZ;\">');$2s.V('1a',$1a);if(1a){c.1a.29(1g,$1a,1a)}E $1a},b2:j(1g){c.1d.1f(1g).2k('G-81')},kT:j(1g){c.1d.1f(1g).2T('G-81')},7P:j(1g){q $5H=c.1d.1q().1y('a.4l-1d');if(1h 1g!=='1k'){$5H=$5H.6b('.4l-'+1g)}$5H.2T('G-81')},aS:j(1g){c.1d.1f(1g).2k('G-1d-5f')},5I:j(1g){c.1d.1f(1g).2T('G-1d-5f')},kU:j(1g){q $5H=c.1d.1q().1y('a.4l-1d');if(1h 1g!=='1k'){$5H=$5H.6b('.4l-'+1g)}$5H.2k('G-1d-5f')},kV:j(){c.1d.1q().1y('a.4l-1d').2T('G-1d-5f')},1D:j(1g){c.1d.1f(1g).1D()}}},1O:j(){E{2A:j(4V,5J,2E){c.M.T().2t();2E=(1h 2E==='1k')?0:1;4V=4V[0]||4V;5J=5J[0]||5J;q 1v=c.N.1f();q 15=c.N.15(1v);6X{15.75(4V,0);15.9e(5J,2E)}6Y(e){}c.N.3N(1v,15)},82:j(K){if(c.2c.5g()&&1h c.1W!=='1k'){c.M.T().2t()}E K[0]||K},1W:j(K){q 1v,15;K=c.1O.82(K);if(!K){E}if(K.1o==='6c'){E c.1O.4G(K)}q 14=c.1c.83(K.1o);if(K.3r===''||14){15=1r.76();q 6d=1r.5K('\\4u');15.75(K,0);15.4n(6d);15.84(6d);15.4c(1i);1v=2G.5h();1v.5i();1v.5L(15);if(!14){c.M.T().on('1p.G-1D-b3',j(){$(6d).1D();$(c).2a('1p.G-1D-b3')})}}R{1v=2G.5h();1v.5i();15=1r.76();15.77(K);15.4c(1i);1v.5L(15)}},2E:j(K){q 1v,15;K=c.1O.82(K);if(!K){E}if(K.1o!=='6c'&&K.3r===''){E c.1O.1W(K)}if(K.1o==='6c'){q 4W=1r.3T('2h');4W.b4='G-eX-4W';4W.3r='&#8L;';$(K).2w(4W);1v=2G.5h();1v.5i();15=1r.76();15.eY(4W);15.kW(4W);1v.5L(15);$(4W).3n(j(){E $(c).3j()});E}if(K.78&&K.78.6e===1){E c.1O.2w(K.78)}1v=2G.5h();1v.5i();15=1r.76();15.77(K);15.4c(J);1v.5L(15)},2w:j(K){q 1v,15;K=c.1O.82(K);if(!K){E}if(K.1o==='6c'){E c.1O.2E(K)}if(c.1c.6f(K.1o)){q 1B=c.1O.1B(K);if(1h 1B==='1k'){c.1O.2E(K)}R{if(1B.1o==='eZ'){1B=$(1B).1y('5p, 3Q').2C()[0]}R if(1B.1o==='6g'||1B.1o==='6h'){1B=$(1B).1y('li').2C()[0]}c.1O.1W(1B)}E}q 6d=1r.5K('\\4u');1v=2G.5h();1v.5i();15=1r.76();15.84(K);15.4n(6d);15.84(6d);15.4c(1i);1v.5L(15)},4G:j(K){q 1v,15;K=c.1O.82(K);if(!K){E}if(c.1c.6f(K.1o)){q 28=c.1O.28(K);if(1h 28==='1k'){c.1O.1W(K)}R{if(28.1o==='eZ'){28=$(28).1y('5p, 3Q').2p()[0]}R if(28.1o==='6g'||28.1o==='6h'){28=$(28).1y('li').2p()[0]}c.1O.2E(28)}E}1v=2G.5h();1v.5i();15=1r.76();15.eY(K);15.4c(1i);1v.5L(15)},1B:j(K){q $1B=$(K).1B();if($1B.2Z('G-3Y-1u, G-N-1H')){E $1B.1B()[0]}R{E $1B[0]}},28:j(K){q $28=$(K).28();if($28.2Z('G-3Y-1u, G-N-1H')){E $28.28()[0]}R{E $28[0]}},2U:j(K){E c.2U.1f(K)}}},1X:j(){E{b5:j(C){C=c.1X.f0(C);C=c.1X.fa(C);if(c.F.3Y){C=C.Q(/<3Y(.*?[^>]?)>([\\w\\W]*?)<\\/3Y>/gi,'<1J 21=\"G-3Y-1u\" $1>$2</1J>')}C=C.Q(/\\$/g,'&#36;');C=C.Q(/&85;/g,'&');C=C.Q(/<a 2g=\"(.*?[^>]?)®(.*?[^>]?)\">/gi,'<a 2g=\"$1&kX$2\">');C=C.Q(/<2h(.*?[^>]?)id=\"N-1H-1\"(.*?[^>]?)>​<\\/2h>/gi,'[[[fb]]]');C=C.Q(/<2h(.*?[^>]?)id=\"N-1H-2\"(.*?[^>]?)>​<\\/2h>/gi,'[[[fc]]]');q 2q=c;q $1z=$(\"<1z/>\").C($.9f(C,1r,1i));q 6i={'b':'6H','i':'em','6K':'4z'};$1z.1y('b, i, 6K').1G(j(i,s){2q.1c.42(s,6i[s.1o.3J()])});C=$1z.C();q 1K=['kY','C','fe','O','3c','5r','kZ','2h'];if(!c.F.3Y){1K.3k('3Y')}C=c.1X.fg(C,1K);C=C.Q(/<!--[\\s\\S]*?-->/gi,'');C=c.3g.3K(C);C=C.Q('[[[fb]]]','<2h id=\"N-1H-1\" 21=\"G-N-1H\">​</2h>');C=C.Q('[[[fc]]]','<2h id=\"N-1H-2\" 21=\"G-N-1H\">​</2h>');if(C.3s(/^(||\\s||<br\\s?\\/?>||&5j;)$/i)!==-1){E c.F.41}E C},b6:j(C){E c.1X.7U(C)},7U:j(C){C=C.Q(/\\4u/g,'');C=C.Q(/&#8L;/gi,'');if(C.3s(/^<p>(||\\s||<br\\s?\\/?>||&5j;)<\\/p>$/i)!==-1){E''}q $1z=$(\"<1z/>\").C($.9f(C,1r,1i));$1z.1y('*[3i=\"\"]').2P('3i');$1z.1y('*[21=\"\"]').2P('21');$1z.1y('*[4m=\"\"]').2P('4m');$1z.1y('.G-eX-4W').1G(j(){$(c).3j().93()});$1z.1y('2h').1G(j(){$(c).3j().93()});$1z.1y('.G-N-1H, #G-1M-1H').1D();C=$1z.C();if(c.F.3Y){C=C.Q(/<1J 21=\"G-3Y-1u\"(.*?[^>]?)>([\\w\\W]*?)<\\/1J>/gi,'<3Y$1>$2</3Y>')}C=c.1X.fh(C);C=C.Q(1N 2j('<br\\\\s?/?></h','gi'),'</h');C=C.Q(1N 2j('<br\\\\s?/?></li>','gi'),'</li>');C=C.Q(1N 2j('</li><br\\\\s?/?>','gi'),'</li>');C=C.Q(/<1J>/gi,\"<1J>\\n\");if(c.F.as){C=C.Q(/<1J>/gi,'<1J 21=\"'+c.F.as+'\">')}if(c.F.dc){C=C.Q(/<a(.*?)4m=\"fi\"(.*?[^>])>/gi,'<a$1$2>');C=C.Q(/<a(.*?[^>])>/gi,'<a$1 4m=\"fi\">')}q fj={'\\l0':'&l1;','\\l2':'&l3;','\\l4':'&l5;','\\l6':'&l7;','\\l8':'&l9;'};$.1G(fj,j(i,s){C=C.Q(1N 2j(i,'g'),s)});C=C.Q(/&85;/g,'&');C=C.Q(/<p><\\/p>/gi,\"\");E C},b7:j(C,V,1M){if(1M!==1i){q fk=c.1X.fl(C);if(fk){C=c.1X.fm(C)}}C=$.3d(C);if(V.1J){if(c.F.5Y){C=C.Q(/\\t/g,1N 7D(c.F.5Y+1).4h(' '))}}R{C=c.1X.fo(C);C=c.1X.fp(C)}if(1M!==1i){C=c.1X.fq(C);C=c.1X.fr(C);if(V.9g===J){C=C.Q(/&/g,'&85;');C=c.1X.fs(C,V);C=c.1X.b8(C);C=c.1X.ft(C,V)}}if(V.1l){C=c.1X.fu(C);C=c.1X.b8(C)}if(V.4a){C=C.Q(\"\\n\",'<br>')}if(V.9g){C=c.1X.fv(C)}if(V.3g){C=c.3g.3K(C)}E C},b9:j(C,1M){q 2O=c.N.2O();q V={1l:J,9g:J,3g:1i,4y:c.1X.fw(C),2O:c.1X.ba(C),1J:J,4a:J,L:1i,14:1i,3O:1i,4X:1i};if(2O.1b===1&&c.1c.4Y(['h1','h2','h3','h4','h5','h6','a','3x'])){V.1l=1i;V.3g=J;V.14=J;V.4X=J;V.3O=J;V.4y=1i}R if(c.F.Y==='14'||c.F.6G===J){V.3g=J;V.L=J;V.4y=1i}R if(2O.1b===1&&c.1c.4Y(['li'])){V.4a=1i;V.L=J;V.3g=J;V.4X=J}R if(2O.1b===1&&c.1c.4Y(['5p','3Q','2D'])){V.L=J;V.3g=J}R if(c.F.Y==='1J'||(2O.1b===1&&c.1c.4Y('1J'))){V.14=J;V.L=J;V.9g=1i;V.1J=1i;V.3g=J;V.4X=J;V.3O=J}if(V.4y===1i){V.3g=J}if(1M===1i){V.1l=J}E V},ba:j(C){q fx=C.3o(1N 2j('</('+c.F.58.4h('|').8P()+')>','gi'));q fy=C.3o(1N 2j('<hr(.*?[^>])>','gi'));E(fx===1Z&&fy===1Z)?J:1i},fw:j(C){if(c.1X.ba(C)){E J}q fz=C.3o(/<br\\s?\\/?>/gi);q fA=C.3o(/\\n/gi);E(!fz&&!fA)?1i:J},fl:j(C){E C.3o(/21=\"?la|3i=\"[^\"]*\\fB-|3i='[^'']*\\fB-|w:lb/i)},fr:j(C){q 1K=c.F.62;q 2i=1K.1b;3a(q i=0;i<2i;i++){C=C.Q(1N 2j('<'+1K[i]+'[^>]*>(\\s\\n|\\t)?</'+1K[i]+'>','gi'),'')}E C},fq:j(C){C=C.Q(/<\\/2h>/gi,'');C=C.Q(/<2h[^>]*>/gi,'');E C},fm:j(C){C=C.Q(/\\n/g,\" \");C=C.Q(/<br\\s?\\/?>|<\\/p>|<\\/1z>|<\\/li>|<\\/3Q>/gi,'\\n\\n');E C},fu:j(C){E C.Q('&5j;',' ')},fo:j(C){E C.Q(/<br\\s?\\/?>/gi,'\\n')},lc:j(C){E C.Q(/\\n/g,'<br />')},fs:j(C,V){if(V.3O&&c.F.ao){C=C.Q(/<a(.*?)2g=\"(.*?)\"(.*?)>(.*?)<\\/a>/gi,'###a 2g=\"$2\"###$4###/a###')}if(V.4X&&c.F.an){C=C.Q(/<2B 3A=\"(.*?)\"(.*?[^>])>/gi,'###2B 3A=\"$1\"###')}if(c.F.am){E C}q 58=(V.4a)?['3t','ol','li']:c.F.ap;q 1K;if(V.L||V.4a){1K=(V.14)?58.fC(c.F.7F):58}R{1K=(V.14)?c.F.7F:[]}q 2i=1K.1b;3a(q i=0;i<2i;i++){C=C.Q(1N 2j('</'+1K[i]+'>','gi'),'###/'+1K[i]+'###');if(1K[i]==='3Q'||1K[i]==='5p'){C=C.Q(1N 2j('<'+1K[i]+'(.*?[^>])((ld|le)=\"(.*?[^>])\")?(.*?[^>])>','gi'),'###'+1K[i]+' $2###')}R{C=C.Q(1N 2j('<'+1K[i]+'[^>]*>','gi'),'###'+1K[i]+'###')}}E C},ft:j(C,V){if(V.3O&&c.F.ao){C=C.Q(/###a 2g=\"(.*?)\"###(.*?)###\\/a###/gi,'<a 2g=\"$1\">$2</a>')}if(V.4X&&c.F.an){C=C.Q(/###2B 3A=\"(.*?)\"###/gi,'<2B 3A=\"$1\">')}if(c.F.am){E C}q 58=(V.4a)?['3t','ol','li']:c.F.ap;q 1K;if(V.L||V.4a){1K=(V.14)?58.fC(c.F.7F):58}R{1K=(V.14)?c.F.7F:[]}q 2i=1K.1b;3a(q i=0;i<2i;i++){C=C.Q(1N 2j('###/'+1K[i]+'###','gi'),'</'+1K[i]+'>');if(1K[i]==='3Q'||1K[i]==='5p'){C=C.Q(1N 2j('###'+1K[i]+'\\s?(.*?[^#])###','gi'),'<'+1K[i]+'$1>')}R{C=C.Q(1N 2j('###'+1K[i]+'###','gi'),'<'+1K[i]+'>')}}E C},bb:j(L){L=(1h L==='1k')?$(c.N.L()).2z('1J',c.M.T()[0]):L;$(L).1y('br').3n(j(){E 1r.5K('\\n')});$(L).1y('p').3n(j(){E $(c).3j()})},fp:j(C){q $1z=$('<1z />').1C(C);$1z.1y('1J').3n(j(){q 3P=$(c).C();3P=3P.Q(/<br\\s?\\/?>|<\\/p>|<\\/1z>|<\\/li>|<\\/3Q>/gi,'\\n');3P=3P.Q(/(<([^>]+)>)/gi,'');E $('<1J />').1C(3P)});C=$1z.C();$1z.1D();E C},b8:j(C){C=C.Q(/<!--[\\s\\S]*?-->/gi,'');C=C.Q(/<3i[\\s\\S]*?3i>/gi,'');C=C.Q(/<\\/p>|<\\/1z>|<\\/li>|<\\/3Q>/gi,'\\n');C=C.Q(/<\\/H[1-6]>/gi,'\\n\\n');q 4v=1r.3T('1z');4v.3r=C;C=4v.fD||4v.fE;E $.3d(C)},f0:j(C){C=c.1X.fF(C);C=c.1X.fG(C);C=c.1X.fH(C);E C},fF:j(C){q 1J=C.3o(/<1J(.*?)>([\\w\\W]*?)<\\/1J>/gi);if(1J===1Z){E C}$.1G(1J,$.1j(j(i,s){q 31=s.3o(/<1J(.*?)>([\\w\\W]*?)<\\/1J>/i);31[2]=31[2].Q(/<br\\s?\\/?>/g,'\\n');31[2]=31[2].Q(/&5j;/g,' ');if(c.F.5Y){31[2]=31[2].Q(/\\t/g,1N 7D(c.F.5Y+1).4h(' '))}31[2]=c.1X.9h(31[2]);31[2]=31[2].Q(/\\$/g,'&#36;');C=C.Q(s,'<1J'+31[1]+'>'+31[2]+'</1J>')},c));E C},fG:j(C){q 23=C.3o(/<23(.*?)>([\\w\\W]*?)<\\/23>/gi);if(23===1Z){E C}$.1G(23,$.1j(j(i,s){q 31=s.3o(/<23(.*?)>([\\w\\W]*?)<\\/23>/i);31[2]=31[2].Q(/&5j;/g,' ');31[2]=c.1X.9h(31[2]);31[2]=31[2].Q(/\\$/g,'&#36;');C=C.Q(s,'<23'+31[1]+'>'+31[2]+'</23>')},c));E C},fH:j(C){C=C.Q(/&lt;2h id=&79;N-1H-([0-9])&79; 21=&79;G-N-1H&79;&gt;​&lt;\\/2h&gt;/g,'<2h id=\"N-1H-$1\" 21=\"G-N-1H\">​</2h>');E C},fa:j(C){E C.Q(/<64(.*?)>([\\w\\W]*?)<\\/64>/gi,'<2L$1 4m=\"G-64-1u\">$2</2L>')},fh:j(C){E C.Q(/<2L(.*?) 4m=\"G-64-1u\"(.*?)>([\\w\\W]*?)<\\/2L>/gi,'<64$1$2>$3</64>')},fv:j(C){C=C.Q(/”/g,'\"');C=C.Q(/“/g,'\"');C=C.Q(/‘/g,'\\'');C=C.Q(/’/g,'\\'');C=c.1X.9h(C);E C},9h:j(3P){3P=7a(3P).Q(/&85;/g,'&').Q(/&lt;/g,'<').Q(/&gt;/g,'>').Q(/&79;/g,'\"');3P=3P.Q(/&/g,'&85;').Q(/</g,'&lt;').Q(/>/g,'&gt;').Q(/\"/g,'&79;');E 3P},fg:j(3u,bc){if(1h bc==='1k'){E 3u.Q(/(<([^>]+)>)/gi,'')}q 1K=/<\\/?([a-z][a-bd-9]*)\\b[^>]*>/gi;E 3u.Q(1K,j($0,$1){E bc.4R($1.3J())===-1?$0:''})},86:j(C){E C.Q(/<2h(.*?[^>]?)21=\"G-N-1H\"(.*?[^>]?)>([\\w\\W]*?)<\\/2h>/gi,'')},lf:j(C){C=$.3d(C);C=C.Q(/\\n/g,'');C=C.Q(/[\\t]*/g,'');C=C.Q(/\\n\\s*\\n/g,\"\\n\");C=C.Q(/^[\\s\\n]*/g,' ');C=C.Q(/[\\s\\n]*$/g,' ');C=C.Q(/>\\s{2,}</g,'> <');C=C.Q(/\\n\\n/g,\"\\n\");C=C.Q(/\\4u/g,'');E C},bf:j(C){C=$.3d(C);C=C.Q(/\\n/g,'');C=C.Q(/[\\t]*/g,'');C=C.Q(/\\n\\s*\\n/g,\"\\n\");C=C.Q(/^[\\s\\n]*/g,'');C=C.Q(/[\\s\\n]*$/g,'');C=C.Q(/>\\s{2,}</g,'><');C=C.Q(/\\n\\n/g,\"\\n\");C=C.Q(/\\4u/g,'');E C},fI:j(){q bg=c.N.L();if(c.1c.bh()&&bg){bg.9i()}}}},23:j(){E{6U:1i,C:J,1W:j(C){C=$.3d(C);if(c.F.Y==='3b'){C=c.1X.b5(C)}R if(c.F.Y==='1z'&&C===''){C=c.F.41}c.1P.9j();c.M.T().C(C);c.1V.3K();c.1P.9k()},2A:j(C){C=$.3d(C);if(c.F.Y==='3b'){C=c.1X.b5(C)}R if(c.F.Y==='1z'&&C===''){C=c.F.41}c.M.T().C(C);if(c.F.Y==='3b'){c.M.3b().2I(c.1X.7U(C))}c.1U.5I()},1f:j(){if(c.F.Y==='3b'){E c.M.3b().2I()}R{q C=c.M.T().C();C=c.1X.b6(C);E C}},5M:j(){if(!c.23.6U){E}q C=c.M.T().C();q 87=c.23.7X(C);if(c.23.fJ(87)){E}c.23.C=87;if(c.F.Y!=='3b'){c.M.1m('5M',C);c.M.1m('bi',C);E}if(c.F.Y==='3b'){3E($.1j(j(){c.23.fK(C)},c),10)}},fK:j(C){C=c.M.1m('lg',C);C=c.1X.7U(C);c.M.3b().2I(C);c.M.1m('5M',C);if(c.1W===J){c.M.1m('bi',C)}c.1W=J},fJ:j(87){q C=(c.23.C!==J)?c.23.C:J;E(C!==J&&C===87)},7X:j(C){C=C.Q(/\\4u/g,'');E c.1X.86(C)}}},M:j(){E{id:j(){E c.$T.12('id')},1t:j(){E c.$1t},T:j(){E(1h c.$T==='1k')?$():c.$T},3b:j(){E c.$3b},2f:j(){E(c.F.Y==='3b')?c.$2f:c.$1t},1q:j(){E(c.$1q)?c.$1q:J},22:j(){E(c.$22)?c.$22:J},3y:j(){E $.5w({},c)},6F:j(){c.M.T().7T('G-6F')},88:j(1S){c.M.89=1S},7b:j(){E c.M.89},1m:j(Y,e,V){q fL='G';q 80=J;q 1P=$.lh(c.M.1t()[0],'1P');if(1h 1P!=='1k'&&1h 1P[Y]!=='1k'){q 2i=1P[Y].1b;3a(q i=0;i<2i;i++){q 7N=1P[Y][i].7N;if(7N==='1m.'+fL){q 4Z=1P[Y][i].4Z;q 3p=(1h V==='1k')?[e]:[e,V];80=(1h 3p==='1k')?4Z.55(c,e):4Z.55(c,e,3p)}}}if(80){E 80}if(1h c.F.4L[Y]==='1k'){E(1h V==='1k')?e:V}q 1m=c.F.4L[Y];if($.6C(1m)){E(1h V==='1k')?1m.55(c,e):1m.55(c,e,V)}R{E(1h V==='1k')?e:V}},5c:j(){c.F.fM=1i;c.M.1m('5c');c.1U.5c();c.2K.5c();$('#G-9a-'+c.1T).1D();c.M.T().2T('G-in G-6F');c.M.T().2a('1p.G-1D-b3');c.M.T().2a('.G-1V.'+c.1T);c.$1t.2a('.G').lj('G');c.M.T().2a('.G');$(1r).2a('.G-1a');$(1r).2a('.G-22.'+c.1T);$(1r).2a('4i.G-5F.'+c.1T);$(1r).2a('4i.G.'+c.1T);$(1r).2a('5E.G.'+c.1T+' 26.G.'+c.1T);$(2G).2a('.G-1q.'+c.1T);$(2G).2a('fN.G.'+c.1T);$(\"3c\").2a('6j.G.'+c.1T);$(c.F.49).2a('6j.G.'+c.1T);q 2q=c;if(c.F.5X!==J){$.1G(c.F.5X,j(i,s){$(2G).2a('.G-9l-'+s);$(1r).2a('.G-9l-'+s);$(\"3c\").2a('.G-9l-'+s);2q.M.T().2a('.G-9l-'+s)})}c.$1t.2a('26.G-26-3v-3h');c.$1t.2T('G-26-3v-3h');c.M.T().2T('G-T');c.M.T().2P('aW');q C=c.23.1f();if(c.F.1q&&c.$1q){c.$1q.1y('a').1G(j(){q $el=$(c);if($el.V('1a')){$el.V('1a').1D();$el.V('1a',{})}})}if(c.F.Y==='3b'){c.$2f.2w(c.$1t);c.$2f.1D();c.$1t.2I(C).2n()}if(c.F.22){c.$22.1D()}if(c.F.1q&&c.$1q){c.$1q.1D()}if(c.$43){c.$43.1D()}if(c.$6k){c.$6k.1D()}$('.G-O-4o').1D();e9(c.8Y)}}},2c:j(){E{bj:j(){E/9m/.5N(c.F.5a)},5g:j(){E c.F.5a.4R('lk')>-1},5G:j(v){q ie;ie=2j('ll'+(!lm(v)?('\\\\s'+v):''),'i').5N(6Q.5a);if(!ie){ie=!!6Q.5a.3o(/ln.*lo[ :]*11\\./)}E ie},5y:j(){E/(fO|fP|fQ|fR)/.5N(6Q.5a)},3G:j(){E!/(fO|fP|fS|fQ|fR)/.5N(6Q.5a)},fT:j(){E/fS/.5N(6Q.5a)}}},1a:j(){E{3B:J,1d:J,1g:J,2Q:[],lp:j(){E c.1a.3B},29:j(1S,$1a,5O){5O=c.1a.fU(1S,5O);$.1G(5O,$.1j(j(2r,2l){q $2F=c.1a.fV(2r,2l);c.1V.b1($2F,2r,2l);$1a.12('4m',1S).1C($2F)},c))},fU:j(1S,5O){if(1S!=='2x'||c.F.ay===J){E 5O}$.1G(c.F.ay,$.1j(j(i,s){q Y=(c.1c.6f(s.3p[0]))?'L':'14';5O[i]={1A:(Y==='L')?'L.2x':'14.2x',3p:s.3p,1E:s.1E}},c));E 5O},fV:j(2r,2l){q $7c=$('<li />');if(1h 2l.fW!=='1k'){$7c.2k(2l.fW)}if(2r.3s(/^fX/i)!==-1){$7c.2k('G-1a-fX');E $7c}q $2F=$('<a 2g=\"#\" 21=\"G-1a-'+2r+'\" 68=\"1d\" />');q $fY=$('<2h />').C(2l.1E);$2F.1C($fY);$2F.on('4i',$.1j(j(e){e.2d();c.1a.fZ(e,2r,2l)},c));$7c.1C($2F);E $7c},fZ:j(e,2r,2l){if($(e.1R).2Z('G-1a-O-9c')){E}q 2H=c.1a.g0(2l);if(1h 2l.3p!==' 1k'){c.1d.4q(e,2r,2H.Y,2H.1m,2l.3p)}R{c.1d.4q(e,2r,2H.Y,2H.1m)}},g0:j(2l){q 2H={};2H.Y='1A';2H.1m=2l.1A;if(2l.2H){2H.Y='2H';2H.1m=2l.2H}R if(2l.1a){2H.Y='1a';2H.1m=2l.1a}E 2H},2n:j(e,1g){if(c.2c.3G()){c.M.T().2t()}c.1a.74(J,1g);c.1a.1g=1g;c.1a.1d=c.1d.1f(c.1a.1g);if(c.1a.1d.2Z('7d')){c.1a.2b();E}c.1a.3B=c.1a.1d.V('1a').aO(1r.3c);c.M.1m('lq',{1a:c.1a.3B,1g:c.1a.1g,1d:c.1a.1d});c.1d.b2(c.1a.1g);c.1a.1d.2k('7d');c.1a.g1();if(c.1d.1q().2Z('1q-5k-2f')&&c.2c.3G()){c.1a.g2()}R{c.1a.g3()}if(c.2c.3G()&&!c.2c.5g()){c.1a.3B.on('bk.G-1a',$.1j(c.1c.bl,c));c.1a.3B.on('4i.G-1a',$.1j(c.1c.8a,c))}e.9n()},g2:j(){q 2y=c.1a.1d.2Q().2y+c.1a.1d.9o()+c.F.5Z;q 2Q='5k';if(c.F.49!==1r){2y=(c.1a.1d.9o()+c.$1q.2U().2y)+c.F.5Z;2Q='6l'}c.1a.3B.2e({2Q:2Q,3m:c.1a.2Q.3m+'4D',2y:2y+'4D'}).2n();c.1a.3B.4p('bm',{4w:0.2},$.1j(j(){c.1a.bn();c.1a.6m()},c))},g3:j(){c.1a.3B.2e({2Q:'6l',3m:c.1a.2Q.3m+'4D',2y:(c.1a.1d.9o()+c.1a.2Q.2y)+'4D'}).2n();c.1a.3B.4p(((c.F.3C)?'bm':'2n'),{4w:0.2},$.1j(j(){c.1a.bn();c.1a.6m()},c))},6m:j(){$(1r).on('4i.G-1a',$.1j(c.1a.74,c));c.M.T().on('5E.G-1a',$.1j(c.1a.74,c));$(1r).on('2J.G-1a',$.1j(c.1a.8b,c))},bn:j(){c.M.1m('lr',{1a:c.1a.3B,1g:c.1a.1g,1d:c.1a.1d})},g1:j(){c.1a.2Q=c.1a.1d.2U();q bo=c.1a.3B.2N();if((c.1a.2Q.3m+bo)>$(1r).2N()){c.1a.2Q.3m=bp.9b(0,c.1a.2Q.3m-bo+bq(c.1a.1d.7O()))}},8b:j(e){if(e.69!==c.2u.7M){E}c.1a.74(e);c.M.T().2t()},74:j(e,1g){if(c.2c.3G()){c.1c.8a()}if(e!==J&&$(e.1R).2z('.G-1a').1b!==0){E}q $3I=(1h 1g==='1k')?c.1d.1q().1y('a.7d'):c.1d.1q().1y('a.7d').6b('.4l-'+1g);q $8c=(1h 1g==='1k')?$('.G-1a-'+c.1T):$('.G-1a-'+c.1T).6b('.G-1a-2f-'+1g);if($8c.1b!==0){$(1r).2a('.G-1a');c.M.T().2a('.G-1a');$.1G($8c,$.1j(j(i,s){q $el=$(s);c.M.1m('g4',$el);$el.2b();$el.2a('bk g5').2a('.G-1a')},c));$3I.2T('G-81 7d')}},2b:j(){if(c.1a.3B===J){E}if(c.2c.3G()){c.1c.8a()}c.1a.3B.4p(((c.F.3C)?'bs':'2b'),{4w:0.2},$.1j(j(){$(1r).2a('.G-1a');c.M.T().2a('.G-1a');c.1a.g6()},c))},g6:j(){c.M.1m('g4',c.1a.3B);c.1a.1d.2T('G-81 7d');c.1a.3B.2a('bk g5').2a('.G-1a');c.1a.1d=J;c.1a.1g=J;c.1a.3B=J}}},1P:j(){E{bt:J,9p:1i,6n:J,9q:J,9j:j(){c.1P.9q=1i},9k:j(){q 2q=c;3E(j(){2q.1P.9q=J},1)},6o:j(e){e.2d();e.9n();if(e.1R.1o==='6p'){$(e.1R).2k('G-1n-6o')}},9r:j(e){c.M.T().1y('2B').2T('G-1n-6o')},5l:j(e){e=e.8d||e;c.M.T().1y('2B').2T('G-1n-6o');if(c.F.Y==='14'||c.F.Y==='1J'){e.2d();E J}if(2G.50===1k||!e.9s){E 1i}if(e.9s.4x.1b===0){E c.1P.9t(e)}R{c.1P.g7(e)}c.M.1m('5l',e)},26:j(e){q 89=c.M.7b();q Y=(89==='26'||89==='4H')?J:'26';c.M.88(Y);c.1c.7e();c.M.1m('26',e)},2t:j(e){if(c.7f){E}if(c.1P.bu('2t')){c.M.1m('2t',e)}c.1P.bt=1i;c.1P.9p=J;if(c.N.1w()===J){q 1v=c.N.1f();q 15=c.N.15(1v);15.75(c.M.T()[0],0);15.9e(c.M.T()[0],0);c.N.3N(1v,15)}},5F:j(e){if(c.1W||c.7f){E}if($(e.1R).2z('#'+c.M.id()+', .G-1q, .G-1a, #G-1e-2f').g8()!==0){E}if(!c.1P.9p&&c.1P.bu('5F')){c.M.1m('5F',e)}c.1P.bt=J;c.1P.9p=1i},g9:j(){q 9u=-1;c.1P.9v=J;$(2G).on('fN.G.'+c.1T,$.1j(j(){c.1P.9v=1i;if(9u!==-1){bv(9u)}9u=3E($.1j(j(){c.1P.9v=J},c),bw)},c))},2X:j(){c.M.T().on('6o.G ls.G',$.1j(c.1P.6o,c));c.M.T().on('9r.G',$.1j(c.1P.9r,c));c.M.T().on('5l.G',$.1j(c.1P.5l,c));c.M.T().on('26.G',$.1j(c.1P.26,c));c.M.T().on('47.G',$.1j(c.47.2X,c));c.M.T().on('1p.G',$.1j(c.1p.2X,c));c.M.T().on('2J.G',$.1j(c.2J.2X,c));c.M.T().on('2t.G',$.1j(c.1P.2t,c));$(1r).on('4i.G-5F.'+c.1T,$.1j(c.1P.5F,c));c.1P.g9();c.1P.ga();c.1P.gb()},ga:j(){q 2q=c;c.1P.gc=1N lu(j(gd){gd.lv($.1j(2q.1P.ge,2q))})},ge:j(gf){q 6q=J;c.1V.3K();if((c.F.Y==='3b'||c.F.Y==='1z')&&gf.1R===c.M.T()[0]){6q=1i}if(!6q){c.1P.gg()}},gb:j(){c.1P.gc.1V(c.M.T()[0],{4s:1i,lw:1i,lx:1i,ly:1i,lz:1i})},gg:j(){if(c.1P.9q){E}c.23.5M();if(c.3e.is()){bv(c.8Y);c.8Y=3E($.1j(c.3e.4F,c),lA)}},g7:j(e){e.2d();e.9n();if((!c.F.8G&&!c.F.8H)||(c.F.48===1Z&&c.F.57===1Z)){E}if(e.1R.1o==='6p'){c.1P.6n=e.1R}q 4x=e.9s.4x;c.1s.gh(4x[0],e)},9t:j(e){c.M.1m('5l',e)},bu:j(1S){E(1h c.F.4L[1S]!=='1k'&&$.6C(c.F.4L[1S]))},lB:j(){c.1P.9j()},lC:j(){c.1P.9k()}}},1Q:j(){E{is:j(){E!(!c.F.57||!c.F.57&&!c.F.3R)},2n:j(){c.1e.3K('1Q',c.1I.1f('1Q'),gj);c.1s.2X('#G-1e-1Q-1s',c.F.57,c.1Q.1M);$('#G-6O').2I(c.N.1f().7S());c.1e.2n()},1M:j(2v,3H,e){if(1h 2v.6D!=='1k'){c.1e.3Z();c.M.1m('lD',2v);E}c.1Q.gk(e,3H);c.2m.2A();c.22.6V();q 1l=c.1Q.1l(2v);q $O=$('<a />').12('2g',2v.1x).1l(1l);q id=(1h 2v.id==='1k')?'':2v.id;q Y=(1h 2v.3R==='1k')?'1Q':'3R';$O.12('V-'+Y,id);$O=$(c.1M.K($O));c.1O.2w($O);c.3X.5D({Y:Y,K:$O[0],1x:$O[0].2g,id:id});if(3H!==1Z){c.M.1m('57',$O,2v)}},gk:j(e,3H){if(3H){c.1H.1D();c.1M.9w(e,c.1H.1f());c.N.2M()}R{c.1e.3Z()}},1l:j(2v){q 1l=$('#G-6O').2I();E(1h 1l==='1k'||1l==='')?2v.1S:1l}}},2t:j(){E{1W:j(){c.M.T().2t();if(c.F.Y==='14'){E}q $2C=c.2t.2C();if($2C!==J){c.1O.1W($2C)}},2E:j(){c.M.T().2t();q 2p=(c.F.14)?c.M.T():c.2t.2p();if(2p.1b===0){E}q 4I=c.2t.78(2p);if(!c.2c.bj()&&4I!==J){c.1O.2E(4I)}R{q 1v=c.N.1f();q 15=c.N.15(1v);if(15!==1Z){15.77(2p[0]);15.4c(J);c.N.3N(1v,15)}R{c.1O.2E(2p)}}},2C:j(){q $2C=c.M.T().5P().2C();if($2C.1b===0&&($2C[0].1b===0||$2C[0].1o==='6c'||$2C[0].1o==='gl'||$2C[0].6e===3)){E J}if($2C[0].1o==='6g'||$2C[0].1o==='6h'){E $2C.1y('li').2C()}E $2C},2p:j(){E c.M.T().5P().2p()},78:j(2p){q 4I=2p[0].78;E(4I!==1Z&&c.1c.83(4I.1o))?4I:J},is:j(){E(c.M.T()[0]===1r.gm)}}},1n:j(){E{is:j(){E!(!c.F.48||!c.F.48&&!c.F.3R)},2n:j(){c.1e.3K('1n',c.1I.1f('1n'),gj);c.1s.2X('#G-1e-1n-3U',c.F.48,c.1n.1M);c.1e.2n()},1M:j(2v,3H,e){q $2B;if(1h 2v.6D!=='1k'){c.1e.3Z();c.1P.6n=J;c.M.1m('lE',2v,e);E}if(c.1P.6n!==J){$2B=$(c.1P.6n);c.M.1m('gn',$2B[0].3A,$2B);$2B.12('3A',2v.1x);c.1P.6n=J;c.M.1m('48',$2B,2v);E}c.1U.2b();q $2S=$('<2S>');$2B=$('<2B>');$2B.12('3A',2v.1x);q id=(1h 2v.id==='1k')?'':2v.id;q Y=(1h 2v.3R==='1k')?'1n':'3R';$2B.12('V-'+Y,id);$2S.1C($2B);q 1J=c.1c.4r(c.N.1w(),'1J');if(3H){c.22.6V();c.1H.1D();q K=c.1M.9w(e,c.1H.1f());q $1B=$(K).1B();c.N.2M();c.2m.2A();if(1h $1B!=='1k'&&$1B.1b!==0&&$1B[0].1o==='6p'){c.M.1m('gn',$1B[0].3A,$1B);$1B.2z('2S, p',c.M.T()[0]).3n($2S);c.1O.2w($2S)}R{if(1J){$(1J).2w($2S)}R{c.1M.K($2S)}c.1O.2w($2S)}}R{c.1e.3Z();c.2m.2A();c.22.6V();if(1J){$(1J).2w($2S)}R{c.1M.K($2S)}c.1O.2w($2S)}c.1P.6n=J;c.3X.5D({Y:Y,K:$2B[0],1x:$2B[0].3A,id:id});if(3H!==1Z){c.M.1m('48',$2B,2v)}},go:j($1n){$1n.on('lF',j(e){e.2d()});$1n.2a('26.G 5E.G').on('26.G 5E.G',$.1j(j(e){3E($.1j(j(){c.1n.gp($1n)},c),8X)},c))},gp:j($1n){if(c.1P.9v){E}c.1V.1n=$1n;q $O=$1n.2z('a',c.$T[0]);c.1e.3K('1n-3h',c.1I.1f('3h'),lG);c.1n.gq=c.1e.gr().1l(c.1I.1f('60'));c.1n.gs=c.1e.9x().1l(c.1I.1f('3l'));c.1n.gq.on('26',$.1j(c.1n.1D,c));c.1n.gs.on('26',$.1j(c.1n.3N,c));if(c.F.d6===J){$('#G-1n-4C').2I('').2b()}R{q $1B=$1n.1B();if($1B.1b!==0&&$1B[0].1o==='9y'){$('#G-1n-4C').2I($1B.1l()).2n()}}$('#G-1n-gu').C($('<2B 3A=\"'+$1n.12('3A')+'\" 3i=\"9b-2N: 5B%;\">'));$('#G-1n-1E').2I($1n.12('9z'));q $bx=$('#G-1n-O');$bx.12('2g',$1n.12('3A'));if($O.1b!==0){$bx.2I($O.12('2g'));if($O.12('1R')==='7g'){$('#G-1n-O-7h').9B('9C',1i)}}$('.G-O-4o').1D();c.1e.2n();if(c.2c.3G()){$('#G-1n-1E').2t()}},3N:j(){q $1n=c.1V.1n;q $O=$1n.2z('a',c.M.T()[0]);q 1E=$('#G-1n-1E').2I().Q(/(<([^>]+)>)/ig,\"\");$1n.12('9z',1E).12('1E',1E);q O=$.3d($('#G-1n-O').2I()).Q(/(<([^>]+)>)/ig,\"\");if(O!==''){q 7i='((gv--)?[a-bd-9]+(-[a-bd-9]+)*\\\\.)+[a-z]{2,}';q 4l=1N 2j('^(8e|9D|5v)://'+7i,'i');q 7j=1N 2j('^'+7i,'i');if(O.3s(4l)===-1&&O.3s(7j)===0&&c.F.9E){O=c.F.9E+'://'+O}q 1R=($('#G-1n-O-7h').9B('9C'))?1i:J;if($O.1b===0){q a=$('<a 2g=\"'+O+'\">'+c.1c.8f($1n)+'</a>');if(1R){a.12('1R','7g')}$1n.3n(a)}R{$O.12('2g',O);if(1R){$O.12('1R','7g')}R{$O.2P('1R')}}}R if($O.1b!==0){$O.3n(c.1c.8f($1n))}q 4C=$('#G-1n-4C').2I();q $3x=$1n.1B();if($3x.1b===0||$3x[0].1o!=='9y'){$3x=J}if(4C!==''){if($3x===J){$3x=$('<3x />').1l(4C);$1n.2w($3x)}R{$3x.1l(4C)}}R if($3x!==J){$3x.1D()}c.1e.3Z();c.2m.2A()},1D:j(e,$1n,5C){$1n=(1h $1n==='1k')?$(c.1V.1n):$1n;if(1h e!=='gw'){c.2m.2A()}c.1P.9j();q $O=$1n.2z('a',c.M.T()[0]);q $2S=$1n.2z('2S, p',c.M.T()[0]);q $1L=$1n.1L();if($('#G-1n-2f').1b!==0){$1L=$('#G-1n-2f').1L()}q $1B;if($2S.1b!==0){$1B=$2S.1B();$2S.1D()}R if($O.1b!==0){$1L=$O.1L();$O.1D()}R{$1n.1D()}$('#G-1n-2f').1D();if(e!==J){if($2S.1b!==0&&$1B.1b!==0){c.1O.1W($1B)}R if($1L.1b!==0){c.1O.1W($1L)}}if(1h e!=='gw'){c.1e.3Z()}c.1c.9F();c.1V.1n=J;c.1P.9k();c.1U.5I();c.23.5M()}}},3f:j(){E{7Z:j(){if(!c.1Y.1f()){E}q $1w=$(c.N.1w()).2z('li');q $1Y=$1w.2z('3t, ol');q $li=$1w.2z('li');q $28=$li.28();if($28.1b===0||$28[0].1o!=='6r'){E}c.2m.2A();if(c.1c.4j()){q gx=$1Y[0].1o;q $by=$('<'+gx+' />');c.N.3l();$by.1C($1w);$28.1C($by);c.N.2M()}R{1r.4U('3f');c.N.3l();c.3f.bz();c.3f.9i();c.N.2M()}},71:j(){if(!c.1Y.1f()){E}q $1w=$(c.N.1w()).2z('li');q $1Y=$1w.2z('3t, ol');c.2m.2A();1r.4U('6P');q $2F=$(c.N.1w()).2z('li',c.M.T()[0]);if(c.1c.4j()){c.3f.gy($2F)}if($2F.1b===0){1r.4U('gz',J,'p');$2F=$(c.N.1w());q $1B=$2F.1B();if($1B.1b!==0&&$1B[0].1o==='6c'){$1B.1D()}}c.N.3l();c.3f.bz();c.3f.9i();c.N.2M()},gy:j($2F){q $28=$2F.28();if($28.1b!==0&&$28[0].1o!=='6r'){c.N.3l();q $li=$2F.7k('li',c.M.T()[0]);$li.2w($2F);c.N.2M()}},9i:j(){c.M.T().1y('li').1G($.1j(j(i,s){q $el=$(s);$el.1y(c.F.62.4h(',')).1G(j(){$(c).2P('3i')});q $1L=$el.1L();if($1L.1b!==0&&$1L[0].1o==='6r'){$1L.2w($el);E}q $1B=$el.1B();if($1B.1b!==0&&($1B[0].1o==='6g'||$1B[0].1o==='6h')){$el.1C($1B)}},c))},bz:j($1Y){q $4a=c.M.T().1y('3t, ol');q $7l=c.M.T().1y('li');$7l.1G($.1j(j(i,s){c.3f.9G(s)},c));$4a.1G($.1j(j(i,s){c.3f.9G(s)},c));$7l.1G($.1j(j(i,s){c.3f.9G(s)},c))},9G:j(s){q C=s.3r.Q(/[\\t\\s\\n]/g,'');C=C.Q(/<2h><\\/2h>/g,'');if(C===''){$(s).1D()}}}},14:j(){E{2x:j(1u,12,1F,Y){1u=1u.3J();if(1u==='2h'){E}if(c.1c.4Y(['6S'])){E}q 1K=['b','4A','i','4B','6L','gA','4M','dg','dh'];q 3z=['6H','6H','em','em','u','4z','4z','aq','ar'];3a(q i=0;i<1K.1b;i++){if(1u===1K[i]){1u=3z[i]}}c.1U.2b();c.2m.2A();E(c.1c.4j())?c.14.8Z(1u,12,1F,Y):c.14.92(1u,12,1F,Y)},8Z:j(1u,12,1F,Y){q 14=c.N.14();if(14){q 4k=14.1o.3J();if(4k===1u){if(c.1c.3w(14.3r)){c.1O.2w(14);$(14).1D()}R{q $2C=c.14.bA(14,4k);c.1O.2w($2C)}}R{c.14.bB(1u,12,1F,Y)}}R{c.14.bB(1u,12,1F,Y)}},bB:j(1u,12,1F,Y){q K=1r.3T(1u);K=c.14.4S(K,12,1F,Y);c.1M.K(K);c.1O.1W(K)},lH:j(1u,12,1F,Y,14,4k){q K=1r.3T(1u);K=c.14.4S(K,12,1F,Y);q $2C=c.14.bA(14,4k);$2C.2w(K);c.1O.1W(K)},92:j(1u,12,1F,Y){q 2q=c;c.14.gB(1u);1r.4U('gA');c.N.3l();q 7m=1i;q $gC=c.M.T().1y('6K');$gC.1G(j(i,s){q $bC=$(s);if(!$bC.2Z('G-14-7m')){7m=J}q $bD=2q.1c.42($bC,1u);if(!7m){$bD=2q.14.4S($bD[0],12,1F,Y)}});if(1u!=='4z'){c.M.T().1y('14').1G(j(i,s){2q.1c.42(s,'4z')})}if(1u!=='u'){c.M.T().1y('gD').1G(j(i,s){2q.1c.42(s,'u')})}c.M.T().1y('1J').5P(1u).3n(j(){E $(c).3j()});c.$T.1y(c.F.62.4h(', ')).1G($.1j(j(i,s){q $el=$(s);q 8V=$el.2e('1l-gE');if($el.2Z('G-N-1H')){E}R if(c.1X.bf(s.3r)===''){$el.1D();E}R if(s.1o==='gF'&&$el.2Z('G-14-7m')){$el.3n($el.3j());E}R if(8V==='4y-lI'){if(s.1o==='gF'||(s.1o==='U'&&s.4s.1b===0)){$el.3n($el.3j())}R{$el.2e('1l-gE','');c.1c.gG($el,'3i')}}},c));c.N.2M()},gB:j(1u){c.N.3l();q 2q=c;if(1u!=='4z'){c.M.T().1y('4z').1G(j(i,s){2q.1c.42(s,'14')})}if(1u!=='u'){c.M.T().1y('u').1G(j(i,s){2q.1c.42(s,'gD')})}c.M.T().1y(1u).1G(j(){q $el=2q.1c.42(c,'6K');$el.2k('G-14-7m')});c.N.2M()},bA:j(14,4k){q 7n=1r.3T('2h');7n.id='G-14-7n';7n=c.1M.K(7n);q 2E=c.1c.5m(14);q 23=c.1c.8f(14);q gH=(2E)?'':'<'+4k+'>';23=23.Q(/<2h(.*?[^>])id=\"G-14-7n\">​<\\/2h>/i,'</'+4k+'>'+gH);q $23=$(23);$(14).3n($23);E $23.2C()},4S:j(14,12,1F,Y){if(1h 12==='1k'){E 14}q 1A=(1h Y==='1k')?'Q':Y;if(12==='21'){14=c.14[1A+'eh'](1F,14)}R{if(1A==='1D'){14=c.14[1A+'6Z'](12,14)}R if(1A==='ei'){14=c.14[1A+'6Z'](14)}R{14=c.14[1A+'6Z'](12,1F,14)}}E 14},4J:j(14){E(1h 14==='1k')?c.N.3V():14},3N:j(1u,12,1F,Y){q 3V=c.N.3V();q 9H=[];q 2q=c;$.1G(3V,j(i,s){if($.8g(1u)){if($.3S(s.1o.3J(),1u)===-1){E}}R{if(1u!=='*'&&s.1o.3J()!==1u){E}}9H.3k(2q.14.4S(s,12,1F,Y))});E 9H},ej:j(1F,14){E $(c.14.4J(14)).2P('21').2k(1F)[0]},7T:j(1F,14){E $(c.14.4J(14)).7T(1F)[0]},2k:j(1F,14){E $(c.14.4J(14)).2k(1F)[0]},2T:j(1F,14){E $(c.14.4J(14)).2T(1F)[0]},ek:j(14){E $(c.14.4J(14)).2P('21')[0]},eo:j(14,12,1F){14=c.14.2P(12,c.14.4J(14));E $(14).12(12,1F)[0]},ep:j(12,1F,14){14=c.14.4J(14);q 2q=c;q 3D=[];$.1G(14,j(i,s){q $el=$(s);if($el.12(12)){3D.3k(2q.14.2P(12,s))}R{3D.3k(2q.14.94(12,1F,s))}});E 3D},94:j(12,1F,14){E $(c.14.4J(14)).12(12,1F)[0]},2P:j(12,14){E $(c.14.4J(14)).2P(12)[0]},er:j(14){14=c.14.4J(14);q 3D=[];$.1G(14,j(i,s){if(1h s.4s==='1k'){3D.3k(s)}q $el=$(s);q 2i=s.4s.1b;3a(q z=0;z<2i;z++){$el.2P(s.4s[z].1S)}3D.3k($el[0])});E 3D},aB:j(){1r.4U('aB')}}},1M:j(){E{2A:j(C){c.1U.2b();c.23.2A(C);c.2t.2E();c.1U.5I()},C:j(C,V){c.1U.2b();c.M.T().2t();q L=c.N.L();q 14=c.N.14();if(1h V==='1k'){V=c.1X.b9(C,1i);C=c.1X.b7(C,V,1i)}C=$.9f(C);q 1v=c.N.1f();q 15=c.N.15(1v);15.5z();c.N.3N(1v,15);if(V.4a){q $1Y=$(C);if($1Y.1b!==0&&($1Y[0].1o==='6g'||$1Y[0].1o==='6h')){c.1M.gI(L,$1Y);E}}if(V.2O&&L){if(c.1c.6s()){c.M.T().C(C);c.2t.2E()}R{q 44=c.1c.6t();if(44===J){c.1M.bE(C)}R{C=$(C).1C(c.1H.1f());if(44.Y==='1W'){44.$L.4G(C)}R{44.$L.2w(C)}c.N.2M();c.M.T().1y('p').1G(j(){if($.3d(c.3r)===''){$(c).1D()}})}}}R{if(14){q $1z=$(\"<1z/>\").C($.9f(C,1r,1i));$1z.1y(14.1o.3J()).1G(j(){$(c).3j().93()});C=$1z.C()}if(c.1c.6s()){q $K=$(c.F.41);c.M.T().C('').1C($K);$K.C(C);c.1O.2E($K)}R{c.1M.bE(C)}}c.1c.7e();c.2Y.2x();if(V.1J){c.1X.bb()}},1l:j(1l){1l=1l.7S();1l=$.3d(1l);q 4v=1r.3T('1z');4v.3r=1l;1l=4v.fD||4v.fE;if(1h 1l==='1k'){E}c.1U.2b();q 2O=c.N.2O();1l=1l.Q(/\\n/g,' ');if(c.1c.6s()){q $K=$(c.F.41);c.M.T().C('').1C($K);$K.C(1l);c.1O.2E($K)}R{q 1v=c.N.1f();q K=1r.5K(1l);if(1v.7o&&1v.9I){q 15=1v.7o(0);15.5z();15.4n(K);15.84(K);15.4c(1i);c.N.3N(1v,15)}if(2O.1b>1){$(K).bF('<p>');c.1O.2w(K)}}c.1c.7e();c.2Y.2x();c.1X.fI()},9J:j(C){c.1U.2b();q 1v=c.N.1f();q 15=c.N.15(1v);15.5z();q el=1r.3T(\"1z\");el.3r=C;q bG=1r.lJ(),K,4I;51((K=el.gJ)){4I=bG.bH(K)}15.4n(bG);if(4I){15=15.9K();15.84(4I);15.4c(1i);1v.5i();1v.5L(15)}},K:j(K,8h){c.1U.2b();if(1h c.1W!=='1k'){c.M.T().2t()}K=K[0]||K;q L=c.N.L();q bI=c.1c.6f(K.1o);if(c.1c.6s()){if(bI){c.M.T().C(K)}R{c.M.T().C($('<p>').C(K))}c.23.5M()}R if(bI&&L){q 44=c.1c.6t();if(44===J){c.1M.bJ(K,8h)}R{if(44.Y==='1W'){44.$L.4G(K)}R{44.$L.2w(K)}c.M.T().1y('p:lK').1D()}}R{c.1M.bJ(K,8h)}c.1c.7e();c.1O.2E(K);E K},gI:j(L,$1Y){q $L=$(L);q 2p;q 3w=c.1c.3w(L.3r);if(3w||c.1c.5m(L)){2p=$L;$1Y.1y('li').1G(j(){2p.2w(c);2p=$(c)});if(3w){$L.1D()}}R if(c.1c.6u(L)){$1Y.1y('li').1G(j(){$L.4G(c);2p=$(c)})}R{q 9L=c.N.bK(L);$L.2w($('<li>').1C(9L));$L.1C($1Y);2p=$1Y}c.1H.1D();if(2p){c.1O.2E(2p)}c.2Y.2x()},bE:j(C){q 1H=1r.3T('2h');1H.id='G-1M-1H';1H=c.1M.K(1H);$(1H).4G(C);c.N.2M();c.1O.2w(1H);$(1H).1D()},bJ:j(K,8h){q 1v=c.N.1f();q 15=c.N.15(1v);if(8h!==J){15.5z()}15.4n(K);15.4c(J);c.N.3N(1v,15)},9w:j(e,K){c.1U.2b();K=K[0]||K;if(c.1c.3w()){K=(c.1c.9M(K))?K:$('<p />').1C(K);c.M.T().C(K);E K}q 15;q x=e.aQ,y=e.e3;if(1r.gK){q 6v=1r.gK(x,y);q 1v=1r.5h();15=1v.7o(0);15.75(6v.lL,6v.2U);15.4c(1i);15.4n(K)}R if(1r.gL){15=1r.gL(x,y);15.4n(K)}R if(1h 1r.3c.gM!==\"1k\"){15=1r.3c.gM();15.gN(x,y);q bL=15.lM();bL.gN(x,y);15.lN(\"lO\",bL);15.dF()}E K},lP:j(e,K){c.1M.9w(e,K)},1H:j(){c.1H.1M()}}},1p:j(){E{2X:j(e){if(c.7f){E}q 1g=e.69;q 4H=(1g>=37&&1g<=40);c.1p.3F=e.6a||e.5A;c.1p.1L=c.N.1L();c.1p.1w=c.N.1w();c.1p.L=c.N.L();c.1p.1J=c.1c.4r(c.1p.1w,'1J');c.1p.2D=c.1c.4r(c.1p.1w,'2D');c.1p.3x=c.1c.4r(c.1p.1w,'3x');c.1p.2S=c.1c.4r(c.1p.1w,'2S');q gO=c.M.1m('1p',e);if(gO===J){e.2d();E J}c.4f.2X(e,1g);c.1p.gP(4H,1g);c.1p.gQ(e,1g);if(c.1c.6s()&&(1g===c.2u.4P||1g===c.2u.5b||1g===c.2u.4O)){e.2d();c.23.2A(c.F.41);E}c.1p.gR(4H);c.1p.gS(e,1g);if(!c.F.6G&&1g===c.2u.4P){e.2d();q 1v=c.N.1f();q 15=c.N.15(1v);if(!15.6V){15.5z()}E}if(c.F.6G&&1g===c.2u.dN){c.1p.gT()}if(c.F.6G&&1g===c.2u.dM){c.1p.gU()}if((c.F.Y==='3b'||c.F.Y==='1z')&&c.1p.1w&&c.1p.1w.6e===3&&$(c.1p.1L).2Z('G-in')){c.1p.gV()}if(1g===c.2u.8O&&(e.6a||e.5e)){e.2d();E c.1p.gW()}if(1g===c.2u.4P&&(e.6a||e.5e)){e.2d();E c.1p.gX(e)}if(1g===c.2u.4P&&!e.5e&&!e.6a&&!e.5A){E c.1p.gY(e)}if(1g===c.2u.aI||e.5A&&1g===bM||e.5A&&1g===bN){E c.1p.gZ(e,1g)}if(1g===c.2u.5b||1g===c.2u.4O){c.1p.h0()}if(1g===c.2u.4O){q $1B=$(c.1p.L).1B();if(c.1c.5m(c.1p.L)&&$1B.1b!==0&&$1B[0].1o==='7p'){$1B.1D();E J}q h7=(c.1p.L&&c.1p.L.1o==='6r')?c.1p.L:J;if(h7){q $1Y=$(c.1p.L).7k('3t, ol').2p();q $7q=$1Y.1B();if(c.1c.4E($1Y)&&c.1c.5m($1Y)&&$7q.1b!==0&&($7q[0].1o==='6g'||$7q[0].1o==='6h')){e.2d();$1Y.1C($7q.3j());$7q.1D();E J}}if(c.1c.5m(c.1p.L)&&$1B.1b!==0&&$1B[0].1o==='6S'){$(c.1p.L).1C($1B.1l());$1B.1D();E J}}if(1g===c.2u.4O&&$('#G-1n-2f').1b!==0){c.1n.1D()}if(1g===c.2u.5b){if(c.2c.5g()){c.4y.h8(e)}if(c.1Y.h9(c.1p.L)){e.2d();E}q L=c.N.L();if(L&&L.1o==='6r'&&c.1c.4j()&&c.1c.6u()){c.3f.71();e.2d();E}c.1p.ha();c.1p.hb(e)}if(1g===c.2u.5b||1g===c.2u.4O){c.1p.hc(e)}},gW:j(){c.2m.2A();c.1M.9J('&5j;');E J},gX:j(e){c.2m.2A();E(c.1p.1J)?c.1p.bO(e):c.1M.9J('<br>')},h0:j(){c.1c.9N()},hc:j(e){3E($.1j(j(){c.23.6U=J;c.1p.hd();c.M.T().1y('*[3i]').6b('2B, #G-1n-2f, #G-1n-lQ').2P('3i');c.1p.he(e);c.23.6U=1i},c),1)},gY:j(e){q 6q=c.M.1m('lR',e);if(6q===J){e.2d();E J}if(c.1p.2D&&c.1p.hf(e)===1i){E J}if(c.1p.1J){E c.1p.bO(e)}R if(c.1p.2D||c.1p.3x){E c.1p.hg(e)}R if(c.1p.2S){3E($.1j(j(){c.1p.bP('7p')},c),1)}R if(c.1p.L){3E($.1j(j(){c.1p.bP('8R')},c),1);if(c.1p.L.1o==='6r'){q 1w=c.N.1w();q $1L=$(1w).2z('li',c.$T[0]);q $1Y=$1L.7k('3t,ol',c.$T[0]).2p();if($1L.1b!==0&&c.1c.3w($1L.C())&&$1Y.1B().1b===0&&c.1c.3w($1Y.1y(\"li\").2p().C())){$1Y.1y(\"li\").2p().1D();q K=$(c.F.41);$1Y.2w(K);c.1O.1W(K);E J}}}R if(!c.1p.L){E c.1p.hh(e)}3E($.1j(j(){q 14=c.N.14();if(14&&c.1c.3w(14.3r)){q 1L=c.N.L();$(14).1D();c.1O.1W(1L)}},c),1)},gP:j(4H,1g){if(!4H&&(c.M.7b()==='26'||c.M.7b()==='4H')){c.M.88(J);if(c.1p.hi(1g)){c.2m.2A()}}},hi:j(1g){q k=c.2u;q 4K=[k.5b,k.4O,k.4P,k.7M,k.aI,k.dO,k.dP,k.dR,k.dQ];E($.3S(1g,4K)===-1)?1i:J},gR:j(4H){if(!4H){E}if((c.M.7b()==='26'||c.M.7b()==='4H')){c.M.88(J);E}c.M.88('4H')},gQ:j(e,1g){if(c.1p.3F&&1g===90&&!e.5e&&!e.aR&&c.F.2m.1b){e.2d();c.2m.95();E}R if(c.1p.3F&&1g===90&&e.5e&&!e.aR&&c.F.7I.1b!==0){e.2d();c.2m.aU();E}R if(!c.1p.3F){if(1g===c.2u.8O||1g===c.2u.5b||1g===c.2u.4O||(1g===c.2u.4P&&!e.6a&&!e.5e)){c.2m.2A()}}},hf:j(e){if(!c.1c.5m(c.1p.2D)){E}q 4v=c.1X.bf($(c.1p.2D).C());if(4v.3s(/(<br\\s?\\/?>){3}$/i)!==-1){e.2d();q $2p=$(c.1p.2D).5P().2p().28();$2p.28().5d('br').1D();$2p.5d('br').1D();$(c.1p.2D).5P().2p().5d('br').1D();$(c.1p.2D).5P().2p().5d('2h').1D();q K=$(c.F.41);$(c.1p.2D).2w(K);c.1O.1W(K);E 1i}E},gT:j(){q 1K=[c.1p.2D,c.1p.1J,c.1p.3x];3a(q i=0;i<1K.1b;i++){if(1K[i]){c.1p.hj(1K[i]);E J}}},gU:j(){q 1K=[c.1p.2D,c.1p.1J,c.1p.3x];3a(q i=0;i<1K.1b;i++){if(1K[i]){c.1p.hk(1K[i]);E J}}},hj:j(1t){if(!c.1c.5m(1t)){E}q 2p=c.M.T().3j().2p();q $1B=(1t.1o==='9y')?$(c.1p.L).1L().1B():$(c.1p.L).1B();if($1B.1b!==0){E}R if(2p.1b===0&&2p[0]!==1t){c.1O.1W(2p);E}R{q K=$(c.F.41);if(1t.1o==='9y'){$(1t).1L().2w(K)}R{$(1t).2w(K)}c.1O.1W(K)}},hk:j(1t){if(!c.1c.6u()){E}if(c.M.T().3j().1b>1&&c.M.T().3j().2C()[0]!==1t){E}q K=$(c.F.41);$(1t).4G(K);c.1O.1W(K)},gZ:j(e,1g){if(!c.F.d3){E 1i}if(c.1c.3w(c.23.1f())&&c.F.8D===J){E 1i}e.2d();c.2m.2A();q K;if(c.1p.1J&&!e.5e){K=(c.F.5Y)?1r.5K(7D(c.F.5Y+1).4h('\\hl')):1r.5K('\\t');c.1M.K(K)}R if(c.F.8D!==J){K=1r.5K(7D(c.F.8D+1).4h('\\hl'));c.1M.K(K)}R{if(e.5A&&1g===bN){c.3f.71()}R if(e.5A&&1g===bM){c.3f.7Z()}R if(!e.5e){c.3f.7Z()}R{c.3f.71()}}E J},gS:j(e,1g){if(c.1p.3F&&1g===65){c.1c.hm()}R if(1g!==c.2u.dS&&!c.1p.3F){c.1c.7e()}},bO:j(e){e.2d();q K=1r.5K('\\n');q 1v=c.N.1f();q 15=c.N.15(1v);15.5z();15.4n(K);c.1O.2w(K);E J},hh:j(e){e.2d();q p=1r.3T('p');p.3r=c.F.aH;q 1v=c.N.1f();q 15=c.N.15(1v);15.5z();15.4n(p);c.1O.1W(p);E J},hg:j(e){E c.1p.bQ(e)},lS:j(e){E c.1p.bQ(e,1i)},bQ:j(e,hn){e.9n();q ho=1r.3T('br');c.1M.K(ho);if(hn===1i){q hp=1r.3T('br');c.1M.K(hp)}E J},gV:j(){q $1w=$(c.1p.1w);q K=$('<p>').1C($1w.9O());$1w.3n(K);q 1B=$(K).1B();if(1h(1B[0])!=='1k'&&1B[0].1o==='6c'){1B.1D()}c.1O.2E(K)},bP:j(1u){q 6w=c.N.L();q hq=6w.3r.Q(/<br\\s?\\/?>/gi,'');if(6w.1o===1u&&c.1c.3w(hq)&&!$(6w).2Z('G-in')){q p=1r.3T('p');$(6w).3n(p);c.1O.1W(p);E J}R if(6w.1o==='P'){$(6w).2P('21').2P('3i')}},ha:j(){q $1w=$(c.1p.1w);if($1w.1l().3s(/^\\4u$/g)===0){$1w.1D()}},hb:j(e){q $1w=$(c.1p.1w);q $1L=$(c.1p.1L);q 3Q=$1w.2z('3Q',c.$T[0]);if(3Q.1b!==0&&$1w.2z('li',c.$T[0])&&$1L.5P('li').1b===1){if(!c.1c.3w($1w.1l())){E}e.2d();$1w.1D();$1L.1D();c.1O.1W(3Q)}},hd:j(){q bR=j(){q C=$.3d(c.3r).Q(/\\/t\\/n/g,'');if(C===''){$(c).1D()}};c.M.T().1y('li').1G(bR);c.M.T().1y('3t, ol').1G(bR)},he:j(e){q C=$.3d(c.M.T().C());if(!c.1c.3w(C)){E}e.2d();if(c.F.Y==='14'||c.F.Y==='1J'){c.M.T().C(c.1H.C());c.N.2M()}R{c.M.T().C(c.F.41);c.2t.1W()}E J}}},2J:j(){E{2X:j(e){if(c.7f){E}q 1g=e.69;c.2J.L=c.N.L();c.2J.1w=c.N.1w();c.2J.1L=c.N.1L();q 6q=c.M.1m('2J',e);if(6q===J){e.2d();E J}if(1g===c.2u.4P){if(c.2J.L&&c.2J.L.1o==='7p'){q $28=$(c.2J.L).28();if($28.1b!==0&&$28[0].1o==='7p'){q $hs=c.1c.42($28,'p');c.1O.1W($hs);E}}}if(1g===c.2u.5b||1g===c.2u.4O){if(c.1c.6s()){c.2t.1W();E}if(c.2J.L&&c.1p.L&&c.2J.L.1o==='7p'&&c.1c.6u(c.1p.L)){e.2d();c.N.3l();$(c.2J.L).1y('2B').2C().1D();c.1c.42(c.2J.L,'p');q $1H=c.1H.1y();$('C, 3c').9P({3L:$1H.2Q().2y+20},bw);c.N.2M();E}if(c.2J.L&&c.2J.L.1o==='P'){q ht=$(c.2J.L).1y('2B').1b;q 1l=$(c.2J.L).1l().Q(/\\4u/g,'');if(1l===''&&ht!==0){c.1c.42(c.2J.L,'2S')}}if(c.2J.L&&c.2J.L.1o==='7p'&&$(c.2J.L).1y('2B').1b===0){c.N.3l();c.1c.42(c.2J.L,'p');c.N.2M()}}if(c.2Y.hu(1g)){c.2Y.2x()}}}},1I:j(){E{3K:j(){c.F.7Y=c.F.5t[c.F.1I]},1f:j(1S){E(1h c.F.7Y[1S]!=='1k')?c.F.7Y[1S]:''}}},4y:j(){E{1M:j(){c.2m.2A();c.1M.C(c.4y.hv());q $hr=c.M.T().1y('#G-hr-4v-id');$hr.2P('id');c.M.1m('lT',$hr);E $hr},hv:j(){q C='<hr id=\"G-hr-4v-id\" />';if(!c.2c.5g()&&c.1c.3w()){C+='<p>'+c.F.41+'</p>'}E C},h8:j(e){if(!c.1c.4j()){E}q $L=$(c.N.L());if($L.1b===0||!c.1c.6u($L)){E}q $28=$L.28();if($28&&$28[0].1o==='gl'){e.2d();$28.1D()}}}},O:j(){E{1f:j(){E $(c.N.3V('a'))},is:j(){q 4d=c.N.4d();q $O=$(c.N.1w()).2z('a',c.M.T()[0]);E($O.1b===0||4d.1b>1)?J:$O},4N:j(e){if(1h e!=='1k'&&e.2d){e.2d()}c.2m.2A();q 3O=c.N.3V('a');if(3O.1b===0){E}q $3O=c.O.hw(3O);c.1V.9Q();c.M.1m('lU',$3O)},1M:j(O,7X){q $el=c.O.is();if(7X!==1i){O=c.O.hx($el,O);if(O===J){E J}}c.2m.2A();if($el===J){$el=$('<a />');$el=c.O.3N($el,O);$el=$(c.1M.K($el));q $1L=$el.1L();if(c.1c.4E($1L)===J){$el.bF('<p>')}if($1L.2Z('G-4N')){$1L.3n(j(){E $(c).3j()})}c.1O.2w($el);c.M.1m('hy',$el)}R{$el=c.O.3N($el,O);c.1O.2w($el)}},3N:j($el,O){$el.1l(O.1l);$el.12('2g',O.1x);c.O.1R($el,O.1R);E $el},1R:j($el,1R){E(1R)?$el.12('1R','7g'):$el.2P('1R')},2n:j(e){if(1h e!=='1k'&&e.2d){e.2d()}c.1V.9Q();q $el=c.O.is();c.O.hz($el);q O=c.O.hA($el);O.1x=c.O.bS(O.1x);c.O.hB(O);c.1e.2n();if(c.2c.3G()){$('#G-O-1x').2t()}},hB:j(O){$('#G-O-7h').9B('9C',O.1R);$('#G-O-1x').2I(O.1x);$('#G-O-1x-1l').2I(O.1l)},hz:j($el){c.1e.3K('O',c.1I.1f(($el===J)?'O-1M':'O-3h'),lV);q $2s=c.1e.9x();$2s.1l(c.1I.1f(($el===J)?'1M':'3l')).on('26',$.1j(c.O.1m,c))},1m:j(){q O=c.O.hC();if(O===J){E J}c.1e.3Z();c.O.1M(O,1i)},bT:j(1x){E(1h 1x==='1k')?'':$.3d(1x.Q(/[^\\W\\w\\D\\d+&\\'@#/%?=~hD|!:,.;\\(\\)]/gi,''))},bU:j(1l){E(1h 1l==='1k')?'':$.3d(1l.Q(/(<([^>]+)>)/gi,''))},bV:j(O){E(O.1l===''&&O.1x!=='')?c.O.hE(O.1x.Q(/<|>/g,'')):O.1l},hF:j(1x){q 7i='((gv--)?[\\\\W\\\\w\\\\D\\\\d]+(-[\\\\W\\\\w\\\\D\\\\d]+)*\\\\.)+[\\\\W\\\\w]{2,}';q 8i=1N 2j('^(8e|9D|5v)://'+7i,'i');q 7j=1N 2j('^'+7i,'i');q 9R=1N 2j('\\.(C|lW)$','i');q hG=1N 2j('^/','i');q hH=1N 2j('^lX:(.*?)','i');if(1x.3s(8i)===-1&&1x.3s(7j)!==-1){1x='8e://'+1x}if(1x.3s(8i)!==-1||1x.3s(9R)!==-1||1x.3s(hG)!==-1||1x.3s(hH)!==-1){E 1x}E J},hI:j(1x){E(1x.3s('@')!==-1&&/(8e|9D|5v):\\/\\//i.5N(1x)===J)},3w:j(O){E(O.1x===''||(O.1l===''&&O.1x===''))},hE:j(1x){E(1x.1b>c.F.7G)?1x.bW(0,c.F.7G)+'...':1x},bX:j(O){if(c.O.hI(O.1x)){O.1x='bY:'+O.1x.Q('bY:','')}R if(O.1x.3s('#')!==0){O.1x=c.O.hF(O.1x)}E(c.O.3w(O)||O.1x===J)?J:O},hC:j(){q O={};O.1x=c.O.bT($('#G-O-1x').2I());O.1l=c.O.bU($('#G-O-1x-1l').2I());O.1l=c.O.bV(O);O.1R=($('#G-O-7h').9B('9C'))?1i:J;E c.O.bX(O)},hx:j($el,O){O.1x=c.O.bT(O.1x);O.1l=(1h O.1l==='1k'&&c.N.is())?c.N.1l():c.O.bU(O.1l);O.1l=c.O.bV(O);O.1R=($el===J)?O.1R:c.O.bZ($el);E c.O.bX(O)},hA:j($el){q O={1x:'',1l:(c.N.is())?c.N.1l():'',1R:J};if($el!==J){O.1x=$el.12('2g');O.1l=$el.1l();O.1R=c.O.bZ($el)}E O},bZ:j($el){E(1h $el.12('1R')!=='1k'&&$el.12('1R')==='7g')?1i:J},bS:j(1x){q 2g=2q.lY.2g.Q('#','').Q(/\\/$/i,'');E 1x.Q(/^\\/\\#/,'#').Q(2g,'').Q('bY:','')},hw:j(3O){q $2C;q $3O=$.1G(3O,j(i,s){q $el=$(s);q $c0=$('<2h 21=\"G-4N\" />').1C($el.3j());$el.3n($c0);if(i===0){$2C=$c0}E $el});if(3O.1b===1&&c.N.4j()){c.1O.2w($2C)}E $3O}}},2Y:j(){E{hu:j(1g){E 1g===c.2u.4P||1g===c.2u.8O},hJ:j(K){E(K.5Q.3o(c.F.4b.7K)||K.5Q.3o(c.F.4b.7L)||K.5Q.3o(c.F.4b.8N)||K.5Q.3o(c.F.4b.1x))},hK:j(i,K){E K.6e===3&&$.3d(K.5Q)!==\"\"&&!$(K).1L().is(\"1J\")&&(c.2Y.hJ(K))},4Z:j(i,K){q $el=$(K);q 1l=$el.1l();q C=1l;if(C.3o(c.F.4b.7K)||C.3o(c.F.4b.7L)){C=c.2Y.hL(C)}R if(C.3o(c.F.4b.8N)){C=c.2Y.hM(C)}R{C=c.2Y.hN(C)}$el.4G(1l.Q(1l,C)).1D()},2x:j(){if(!c.F.2Y||c.1c.4Y('1J')){E}c.M.T().1y(\":6b(63,2B,a,1J,.G-4N)\").lZ().3j().5d($.1j(c.2Y.hK,c)).1G($.1j(c.2Y.4Z,c));q $hO=c.M.T().1y('.G-2Y-3y').1G($.1j(j(i,s){q $el=$(s);$el.2T('G-2Y-3y');if($el.12('21')===''){$el.2P('21')}if(s.1o==='8R'){c.2Y.6t($el,'av')}R if(s.1o==='6p'){c.2Y.6t($el,'1n')}R if(s.1o==='A'){c.M.1m('hy',$el)}E $el},c));3E($.1j(j(){c.23.5M();c.M.1m('2Y',$hO)},c),5B)},6t:j($el,Y){q 44=c.1c.6t();if(44===J){E}q $8j=$el;if(Y==='1n'){$8j=$('<2S />').1C($el)}if(44.Y==='1W'){44.$L.4G($8j)}R{44.$L.2w($8j)}if(Y==='1n'){c.1O.2w($8j)}},hL:j(C){q c1='<1z 21=\"'+c.F.de+' G-2Y-3y\"><63 21=\"G-2Y-3y\" 2N=\"bw\" 4t=\"m0\" 3A=\"';q c2='\" m1=\"0\" m2></63></1z>';if(C.3o(c.F.4b.7K)){C=C.Q(c.F.4b.7K,c1+'//6R.dK.8M/m3/$1'+c2)}if(C.3o(c.F.4b.7L)){C=C.Q(c.F.4b.7L,c1+'//m4.dL.8M/av/$2'+c2)}E C},hM:j(C){q 52=C.3o(c.F.4b.8N);if(!52){E C}E C.Q(C,'<2B 3A=\"'+52+'\" 21=\"G-2Y-3y\" />')},hN:j(C){q 52=C.3o(c.F.4b.1x);if(!52){E C}52=$.m5(52,j(v,k){E $.3S(v,52)===k});q 1b=52.1b;3a(q i=0;i<1b;i++){q 2g=52[i],1l=2g;q 9E=(2g.3o(/(5v?|9D):\\/\\//i)!==1Z)?'':'8e://';if(1l.1b>c.F.7G){1l=1l.bW(0,c.F.7G)+'...'}if(1l.3s('%')===-1){1l=hP(1l)}q c3=\"\\\\b\";if($.3S(2g.cS(-1),[\"/\",\"&\",\"=\"])!==-1){c3=\"\"}q hQ=1N 2j('('+2g.Q(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,\"\\\\$&\")+c3+')','g');C=C.Q(hQ,'<a 2g=\"'+9E+$.3d(2g)+'\" 21=\"G-2Y-3y\">'+$.3d(1l)+'</a>')}E C}}},1Y:j(){E{4q:j(8k){if(c.1c.hR(['8B','3Q','5p','cX'])){E}8k=(8k==='ol')?'6J':'7H';q 1u=(8k==='6J')?'6h':'6g';q $1Y=$(c.N.1w()).m6('.G-in','3t, ol').2C();c.1U.2b();c.2m.2A();if($1Y.1b!==0&&$1Y[0].1o===1u&&c.1c.4E($1Y)){c.N.3l();$1Y.1y('3t, ol').1G(j(){q 1L=$(c).2z('li');$(c).1y('li').1G(j(){$(1L).2w(c)})});$1Y.1y('3t, ol').1D();$1Y.1y('li').1G(j(){E $(c).3n(j(){E $('<p />').1C($(c).3j())})});$1Y.3n(j(){E $(c).3j()});c.N.2M();E}c.N.3l();1r.4U('1M'+8k);c.N.2M();q $8l=c.1Y.1f();if(!$8l){if(!c.N.L()){1r.4U('gz',J,'p')}E}$8l.1y('2h').3n(j(){E $(c).3j()});$8l.1y(c.F.62.4h(',')).1G(j(){$(c).2P('3i')});q $7r=$8l.1L();if(c.1c.4E($7r)&&$7r[0].1o!=='6r'&&c.1c.9M($7r)){c.N.3l();$7r.3n($7r.3j());c.N.2M()}},1f:j(){q 1w=c.N.1w();q $1Y=$(1w).2z('3t, ol',c.M.T()[0]);E($1Y.1b===0)?J:$1Y},h9:j(L){q $28=$(L).28();q $1B=$(L).1B();q hS=(L&&L.1o==='P'&&(L.3r==='<br>'||L.3r===''));q hT=($28.2z('ol, 3t').1b===1&&$1B.2z('ol, 3t').1b===1);if(hS&&hT){$28.5P('li').2p().1C(c.1H.1f());$28.1C($1B.3j());c.N.2M();E 1i}E J}}},1H:j(){E{1f:j(3W){3W=(1h 3W==='1k')?1:3W;q 1H=1r.3T('2h');1H.id='N-1H-'+3W;1H.b4='G-N-1H';1H.3r=c.F.aH;E 1H},C:j(3W){E c.1c.8f(c.1H.1f(3W))},1y:j(3W){3W=(1h 3W==='1k')?1:3W;E c.M.T().1y('2h#N-1H-'+3W)},1M:j(){q 1v=c.N.1f();q 15=c.N.15(1v);c.1H.4n(15,c.1H.1f(1),1i);if(15&&15.6V===J){c.1H.4n(15,c.1H.1f(2),J)}},1D:j(){c.M.T().1y('.G-N-1H').1G(c.1H.hU)},4n:j(15,K,4c){q 1L=c.N.1L();if(15===1Z||$(1L).2z('.G-in').1b===0){E}15=15.9K();6X{15.4c(4c);15.4n(K)}6Y(e){c.2t.1W()}},hU:j(i,el){q $el=$(el);q 1l=$el.1l().Q(/\\4u/g,'');E(1l==='')?$el.1D():$el.3n(j(){E $(c).3j()})}}},1e:j(){E{4L:{},eM:j(){c.F.1e={'1n-3h':7a()+'<1z 21=\"G-1e-4g G-m7\" V-1E=\"hV\">'+'<1z id=\"G-1n-gu\" 21=\"G-1e-4g-m8\">'+'</1z>'+'<1z 21=\"G-1e-4g-dG\">'+'<2L>'+'<2o>'+c.1I.1f('1E')+'</2o>'+'<3u Y=\"1l\" id=\"G-1n-1E\" />'+'</2L>'+'<2L>'+'<2o>'+c.1I.1f('4C')+'</2o>'+'<3u Y=\"1l\" id=\"G-1n-4C\" 3M-2o=\"'+c.1I.1f('4C')+'\" />'+'</2L>'+'<2L>'+'<2o>'+c.1I.1f('O')+'</2o>'+'<3u Y=\"1l\" id=\"G-1n-O\" 3M-2o=\"'+c.1I.1f('O')+'\" />'+'</2L>'+'<2L>'+'<2o 21=\"9S\"><3u Y=\"9S\" id=\"G-1n-O-7h\" 3M-2o=\"'+c.1I.1f('O-in-1N-4g')+'\"> '+c.1I.1f('O-in-1N-4g')+'</2o>'+'</2L>'+'<2L>'+'<1d id=\"G-1e-1d-6x\">8K</1d>'+'<1d id=\"G-1e-1d-6M\">aC</1d>'+'<1d id=\"G-1e-1d-60\" 21=\"G-1e-1d-2U\">dn</1d>'+'</2L>'+'</1z>'+'</1z>','1n':7a()+'<1z 21=\"G-1e-4g\" V-1E=\"hW\">'+'<2L>'+'<1z id=\"G-1e-1n-3U\"></1z>'+'</2L>'+'</1z>','1Q':7a()+'<1z 21=\"G-1e-4g\" V-1E=\"hW\">'+'<2L>'+'<2o>'+c.1I.1f('6O')+' <2h 21=\"m9\">('+c.1I.1f('aE')+')</2h></2o>'+'<3u Y=\"1l\" id=\"G-6O\" 3M-2o=\"'+c.1I.1f('6O')+'\" /><br><br>'+'</2L>'+'<2L>'+'<1z id=\"G-1e-1Q-1s\"></1z>'+'</2L>'+'</1z>','O':7a()+'<1z 21=\"G-1e-4g\" V-1E=\"hV\">'+'<2L>'+'<2o>hX</2o>'+'<3u Y=\"1x\" id=\"G-O-1x\" 3M-2o=\"hX\" />'+'</2L>'+'<2L>'+'<2o>'+c.1I.1f('1l')+'</2o>'+'<3u Y=\"1l\" id=\"G-O-1x-1l\" 3M-2o=\"'+c.1I.1f('1l')+'\" />'+'</2L>'+'<2L>'+'<2o 21=\"9S\"><3u Y=\"9S\" id=\"G-O-7h\"> '+c.1I.1f('O-in-1N-4g')+'</2o>'+'</2L>'+'<2L>'+'<1d id=\"G-1e-1d-6x\">8K</1d>'+'<1d id=\"G-1e-1d-6M\">aC</1d>'+'</2L>'+'</1z>'};$.5w(c.F,c.F.1e)},b0:j(1S,1m){c.1e.4L[1S]=1m},ma:j(1S,hY){c.F.1e[1S]=hY},hZ:j(1S){E c.F.1e[1S]},mb:j(){E c.$5R},9x:j(){E c.$5R.1y('#G-1e-1d-6x')},i0:j(){E c.$5R.1y('#G-1e-1d-6M')},gr:j(){E c.$5R.1y('#G-1e-1d-60')},3K:j(5S,1E,2N){if(1h c.$43!=='1k'&&c.$43.2Z('7s')){E}c.1e.5S=5S;c.1e.2N=2N;c.1e.29();c.1e.6m();c.1e.i1(1E);c.1e.i2();c.1e.i3();if(1h c.1e.4L[5S]!=='1k'){c.1e.4L[5S].55(c)}},2n:j(){if(!c.2c.3G()){1r.gm.5F()}c.N.3l();c.1e.i4();if(c.2c.5y()){c.1e.2N='96%'}3E($.1j(c.1e.c4,c),0);$(2G).on('9T.G-1e',$.1j(c.1e.c4,c));c.$6k.4p('c5',{4w:0.25});c.$43.2k('7s').2n();c.$1e.4p('c5',{5n:'i5-i6(0.c6, 0.i7, 0.i8, 1.i9)'},$.1j(j(){c.1c.9N();c.1c.bl();c.M.1m('mc',c.1e.5S,c.$1e);$(1r).2a('md.1e');q $8c=c.$1e.1y('3u[Y=1l],3u[Y=1x],3u[Y=me]');$8c.on('1p.G-1e',$.1j(c.1e.ib,c))},c))},c4:j(){q c7=$(2G).4t();q 7t=$(2G).2N();q 9U=(1h c.1e.2N==='9U');if(!9U&&c.1e.2N.3o(/%$/)){c.$1e.2e({'2N':c.1e.2N,'7V-c8':'c9'})}R if(bq(c.1e.2N)>7t){c.$1e.2e({'2N':'96%','7V-c8':'2%'})}R{if(9U){c.1e.2N+='4D'}c.$1e.2e({'2N':c.1e.2N,'7V-c8':'c9'})}q 4t=c.$1e.ic();q 2y=(c7/2-4t/2)+'4D';if(c.2c.5y()){2y='2%'}R if(4t>c7){2y='c9'}c.$1e.2e('7V-2y',2y)},i4:j(){c.1e.8m=c.$1e.1y('.G-1e-4g');if(c.1e.8m.1b<2){E}c.1e.$ca=$('<1z id=\"G-1e-ih\" />');$.1G(c.1e.8m,$.1j(j(i,s){q a=$('<a 2g=\"#\" 4m=\"'+i+'\" />').1l($(s).12('V-1E'));a.on('26',$.1j(c.1e.ii,c));if(i===0){a.2k('3B')}c.1e.$ca.1C(a)},c));c.$5R.70(c.1e.$ca)},ii:j(e){e.2d();q $el=$(e.1R);q 5C=$el.12('4m');c.1e.8m.2b();c.1e.8m.eq(5C).2n();$('#G-1e-ih').1y('a').2T('3B');$el.2k('3B');E J},i1:j(1E){c.$8n.C(1E)},i3:j(){c.$5R.C(c.1e.hZ(c.1e.5S));c.1e.i0().on('4i',$.1j(c.1e.3Z,c))},i2:j(){if(1h $.fn.ij==='1k'){E}c.$1e.ij({mf:c.$8n});c.$8n.2e('mg','mh')},ib:j(e){if(e.69!==13){E}e.2d();c.1e.9x().26()},29:j(){c.1e.ik();c.$43=$('<1z id=\"G-1e-2f\"/>').2b();c.$1e=$('<1z id=\"G-1e\" 68=\"mi\" />');c.$8n=$('<1z id=\"G-1e-aF\" />');c.$8o=$('<1d Y=\"1d\" id=\"G-1e-3Z\" 3M-2o=\"'+c.1I.1f('3Z')+'\" />').C('&mj;');c.$5R=$('<1z id=\"G-1e-3c\" />');c.$1e.1C(c.$8n);c.$1e.1C(c.$5R);c.$1e.1C(c.$8o);c.$43.1C(c.$1e);c.$43.aO(1r.3c)},ik:j(){c.$6k=$('<1z id=\"G-1e-mk\">').2b();$('3c').70(c.$6k)},6m:j(){c.$8o.on('4i.G-1e',$.1j(c.1e.3Z,c));$(1r).on('2J.G-1e',$.1j(c.1e.8b,c));c.M.T().on('2J.G-1e',$.1j(c.1e.8b,c));c.$43.on('26.G-1e',$.1j(c.1e.3Z,c))},9V:j(){c.$8o.2a('4i.G-1e');$(1r).2a('2J.G-1e');c.M.T().2a('2J.G-1e');c.$43.2a('26§.G-1e');$(2G).2a('9T.G-1e')},8b:j(e){if(e.69!==c.2u.7M){E}c.1e.3Z(J)},3Z:j(e){if(e){if($(e.1R).12('id')!=='G-1e-1d-6M'&&e.1R!==c.$8o[0]&&e.1R!==c.$43[0]){E}e.2d()}if(!c.$43){E}c.N.2M();c.1e.9V();c.1c.8a();c.1c.9F();c.$6k.4p('7Q',{4w:0.4},$.1j(j(){c.$6k.1D()},c));c.$1e.4p('7Q',{4w:0.3,5n:'i5-i6(0.c6, 0.i7, 0.i8, 1.c6)'},$.1j(j(){if(1h c.$43!=='1k'){c.$43.1D();c.$43=1k}$(1r.3c).2e('cb',c.1e.ml);c.M.1m('mm',c.1e.5S)},c))}}},1V:j(){E{3K:j(){if(1h c.F.fM!=='1k'){E}c.1V.3O();c.1V.4X()},mn:j($el,$1w){if(1h $1w==='1k'){$1w=$(c.N.1w())}E $1w.is($el)||$1w.7k($el).1b>0},1q:j(){c.1V.3I();c.1V.7J()},3I:j(e,2r){q 1w=c.N.1w();q 1L=c.N.1L();if(e!==J){c.1d.7P()}R{c.1d.7P(2r)}if(e===J&&2r!=='C'){if($.3S(2r,c.F.dj)!==-1){c.1d.mo(2r)}E}if(!c.1c.4E(1w)){E}if(c.1c.bh()||c.1c.4Y(['8B','1J','2D','li'])){c.1d.aS('6I')}R{c.1d.5I('6I')}$.1G(c.F.dk,$.1j(j(1g,1F){q 9W=$(1L).2z(1g,c.$T[0]);q cc=$(1w).2z(1g,c.$T[0]);if(9W.1b!==0&&!c.1c.4E(9W)){E}if(!c.1c.4E(cc)){E}if(9W.1b!==0||cc.2z(1g,c.$T[0]).1b!==0){c.1d.b2(1F)}},c))},7J:j(){q il=$('<1z />').C(c.N.C()).1y('a').1b;q $1w=$(c.N.1w());q cd=c.1c.4E($1w);$.1G(c.F.1V.7J,$.1j(j(1g,1F){q 1V=1F.1V,1t=1V.1t,$2F=1F.2F,ce=1h 1V.in!=='1k'?1V.in:J,cf=1h 1V.72!=='1k'?1V.72:J;if(($1w.2z(1t).g8()>0&&cd)||(1t==='a'&&il!==0)){c.1V.cg($2F,ce,cf)}R{c.1V.cg($2F,cf,ce)}},c))},cg:j($2F,8p,9X){if(9X&&1h 9X.12!=='1k'){c.1V.ch($2F,9X.12,1i)}if(1h 8p.12!=='1k'){c.1V.ch($2F,8p.12)}if(1h 8p.1E!=='1k'){$2F.1y('2h').1l(8p.1E)}},ch:j($2F,im,ci){$.1G(im,j(1g,1F){if(1g==='21'){if(!ci){$2F.2k(1F)}R{$2F.2T(1F)}}R{if(!ci){$2F.12(1g,1F)}R{$2F.2P(1g)}}})},b1:j($2F,2r,2l){if(1h 2l.1V===\"1k\"){E}2l.2F=$2F;c.F.1V.7J.3k(2l)},4X:j(){c.M.T().1y('2B').1G($.1j(j(i,2B){q $2B=$(2B);$2B.2z('a',c.$T[0]).on('26',j(e){e.2d()});c.1n.go($2B)},c))},3O:j(){if(!c.F.db){E}c.M.T().1y('a').on('5E.G.'+c.1T+' 26.G.'+c.1T,$.1j(c.1V.io,c));c.M.T().on('5E.G.'+c.1T+' 26.G.'+c.1T,$.1j(c.1V.cj,c));$(1r).on('5E.G.'+c.1T+' 26.G.'+c.1T,$.1j(c.1V.cj,c))},ip:j($O){E $O.2U()},io:j(e){q $el=$(e.1R);if($el[0].1o==='6p'){E}if($el[0].1o!=='A'){$el=$el.2z('a',c.$T[0])}if($el[0].1o!=='A'){E}q $O=$el;q 6v=c.1V.ip($O);q 4o=$('<2h 21=\"G-O-4o\"></2h>');q 2g=$O.12('2g');if(2g===1k){2g=''}if(2g.1b>24){2g=2g.bW(0,24)+'...'}q iq=$('<a 2g=\"'+$O.12('2g')+'\" 1R=\"7g\" />').C(2g).2k('G-O-4o-6x');q ir=$('<a 2g=\"#\" />').C(c.1I.1f('3h')).on('26',$.1j(c.O.2n,c)).2k('G-O-4o-6x');q it=$('<a 2g=\"#\" />').C(c.1I.1f('4N')).on('26',$.1j(c.O.4N,c)).2k('G-O-4o-6x');4o.1C(iq).1C(' | ').1C(ir).1C(' | ').1C(it);q ck=bq($O.2e('4y-4t'),10);q iu=bp.mp((e.mq-6v.2y)/ck);q 2y=6v.2y+iu*ck;4o.2e({2y:2y+'4D',3m:6v.3m+'4D'});$('.G-O-4o').1D();$('3c').1C(4o)},9Q:j(){$('.G-O-4o').1D()},cj:j(e){e=e.8d||e;q 1R=e.1R;q $1L=$(1R).2z('a',c.$T[0]);if($1L.1b!==0&&$1L[0].1o==='A'&&1R.1o!=='A'){E}R if((1R.1o==='A'&&c.1c.4E(1R))||$(1R).2Z('G-O-4o-6x')){E}c.1V.9Q()}}},2U:j(){E{1f:j(K){q 6y=c.2U.9O(K);if(6y===J){E 0}q 1z=1r.3T('1z');1z.bH(6y.iv());1z.3r=1z.3r.Q(/<2B(.*?[^>])>$/gi,'i');q 1l=$.3d($(1z).1l()).Q(/[\\t\\n\\r\\n]/g,'').Q(/\\4u/g,'');E 1l.1b},9O:j(K){q 1v=c.N.1f();q 15=c.N.15(1v);if(15===1Z&&1h K==='1k'){E J}K=(1h K==='1k')?c.$T:K;if(K===J){E J}K=K[0]||K;q 6y=15.9K();6y.77(K);6y.9e(15.cl,15.iw);E 6y},2A:j(1W,2E){2E=(1h 2E==='1k')?1W:2E;if(!c.2t.is()){c.2t.1W()}q 1v=c.N.1f();q 15=c.N.15(1v);q K,2U=0;q ix=1r.mr(c.$T[0],ms.mt,1Z,1Z);51((K=ix.cm())!==1Z){2U+=K.5Q.1b;if(2U>1W){15.75(K,K.5Q.1b+1W-2U);1W=mu}if(2U>=2E){15.9e(K,K.5Q.1b+2E-2U);iy}}15.4c(J);c.N.3N(1v,15)}}},3g:j(){E{3K:j(C){if(c.F.3g===J||c.F.Y==='14'||c.F.Y==='1J'){E C}if(C===''||C==='<p></p>'){E c.F.41}C=C+\"\\n\";c.3g.cn=[];c.3g.z=0;C=C.Q(/(<br\\s?\\/?>){1,}\\n?<\\/2D>/gi,'</2D>');C=C.Q(/<\\/1J>/gi,\"</1J>\\n\\n\");C=c.3g.iz(C);C=C.Q('<br>',\"\\n\");C=c.3g.iA(C);C=c.3g.iB(C);C=c.3g.iC(C);C=C.Q(1N 2j('<br\\\\s?/?>\\n?<('+c.F.aG.4h('|')+')(.*?[^>])>','gi'),'<p><br /></p>\\n<$1$2>');E $.3d(C)},iz:j(C){q $1z=$('<1z />').1C(C);$1z.1y('2D p').3n(j(){E $(c).1C('<br />').3j()});$1z.1y(c.F.aG.4h(', ')).1G($.1j(j(i,s){c.3g.z++;c.3g.cn[c.3g.z]=s.mv;E $(s).3n('\\n{Q'+c.3g.z+'}\\n\\n')},c));E $1z.C()},iC:j(C){$.1G(c.3g.cn,j(i,s){s=(1h s!=='1k')?s.Q(/\\$/g,'&#36;'):s;C=C.Q('{Q'+i+'}',s)});E C},iA:j(C){C=C.Q(/\\r\\n/g,\"9Y\");C=C.Q(/\\n/g,\"9Y\");C=C.Q(/\\r/g,\"9Y\");q 8i=/\\s+/g;C=C.Q(8i,\" \");C=$.3d(C);q 7j=/mw/gi;C=C.Q(7j,\"</p><p>\");q 9R=/9Y/gi;C=C.Q(9R,\"<br>\");C='<p>'+C+'</p>';C=C.Q(\"<p></p>\",\"\");C=C.Q(\"\\r\\n\\r\\n\",\"\");C=C.Q(/<\\/p><p>/g,\"</p>\\r\\n\\r\\n<p>\");C=C.Q(1N 2j(\"<br\\\\s?/?></p>\",\"g\"),\"</p>\");C=C.Q(1N 2j(\"<p><br\\\\s?/?>\",\"g\"),\"<p>\");C=C.Q(1N 2j(\"<p><br\\\\s?/?>\",\"g\"),\"<p>\");C=C.Q(1N 2j(\"<br\\\\s?/?></p>\",\"g\"),\"</p>\");C=C.Q(/<p>&5j;<\\/p>/gi,\"\");C=C.Q(/<p>\\s?<br>&5j;<\\/p>/gi,'');C=C.Q(/<p>\\s?<br>/gi,'<p>');E C},iB:j(C){C=C.Q(/<p>(.*?){Q(.*?)\\}\\s?<\\/p>/gi,'{Q$2}');C=C.Q(1N 2j('</2D></p>','gi'),'</2D>');C=C.Q(1N 2j('<p></2D>','gi'),'</2D>');C=C.Q(1N 2j('<p><2D>','gi'),'<2D>');C=C.Q(1N 2j('<2D></p>','gi'),'<2D>');C=C.Q(1N 2j('<p><p ','gi'),'<p ');C=C.Q(1N 2j('<p><p>','gi'),'<p>');C=C.Q(1N 2j('</p></p>','gi'),'</p>');C=C.Q(1N 2j('<p>\\\\s?</p>','gi'),'');C=C.Q(1N 2j(\"\\n</p>\",'gi'),'</p>');C=C.Q(1N 2j('<p>\\t?\\t?\\n?<p>','gi'),'<p>');C=C.Q(1N 2j('<p>\\t*</p>','gi'),'');E C}}},47:j(){E{2X:j(e){c.7f=1i;q 1J=(c.F.Y==='1J'||c.1c.4Y('1J'));if(!c.47.1J&&c.F.au&&c.F.48&&c.47.iD(e)){if(c.2c.5G()){3E($.1j(c.47.co,c),5B)}E}c.1c.9N();c.N.3l();c.47.iE(1J);$(2G).on('6j.G-iF',$.1j(j(){$(2G).3L(c.mx)},c));3E($.1j(j(){q C=c.47.iG(1J);c.2m.2A();c.N.2M();c.1c.9F();q V=c.1X.b9(C);C=c.1X.b7(C,V);q 3D=c.M.1m('47',C);C=(1h 3D==='1k')?C:3D;c.47.1M(C,V);c.7f=J;if(1J){c.1X.bb()}$(2G).2a('6j.G-iF')},c),1)},iG:j(1J){q C=(1J)?c.$5T.2I():c.$5T.C();c.$5T.1D();E C},iE:j(1J){q 2e={2Q:'5k',2N:0,2y:0,3m:'-my'};c.$5T=(1J)?$('<3b>').2I('').2e(2e):$('<1z>').C('').12('aW','1i').2e(2e);c.47.iH();c.$5T[0].2t()},iH:j(){if(c.2c.5G()){c.M.2f().1C(c.$5T)}R{q $cp=$('.1e-3c:9Z');if($cp.1b>0){$cp.1C(c.$5T)}R{$('3c').1C(c.$5T)}}},iD:j(e){e=e.8d||e;q 6z=e.mz;if(c.2c.5G()){E 1i}if(c.2c.5g()){E J}q cq=6z.cq;if(cq.4R('iI.mA')!==-1){e.2d();E J}if(!6z.7l||!6z.7l.1b){E}q 1Q=6z.7l[0].mB();if(1Q===1Z){E J}q cr=1N mC();cr.mD(1Q);cr.iJ=$.1j(c.47.iK,c);E 1i},co:j(){q iL=c.$T.1y('2B');$.1G(iL,$.1j(j(i,s){if(s.3A.3s(/^V\\:1n/i)===-1){E}q 2V=!!2G.50?1N 50():1Z;if(!2G.50){E}c.2m.2A();c.1s.3H=1i;c.1s.Y='1n';c.1s.1x=c.F.48;c.1s.1m=$.1j(j(V){if(c.2c.5G()){$(s).bF($('<2S />'))}R{q $1L=$(s).1L();c.1c.42($1L,'2S')}s.3A=V.mE;c.M.1m('48',$(s),V)},c);q a0=c.1c.cs(s.3A);2V.1C('6z',1);2V.1C(c.F.8F,a0);c.2K.2n();c.1s.4F(2V,J);c.23.5M()},c))},iK:j(e){q 2V=!!2G.50?1N 50():1Z;if(!2G.50){E}c.2m.2A();c.1s.3H=1i;c.1s.Y='1n';c.1s.1x=c.F.48;c.1s.1m=c.1n.1M;q a0=c.1c.cs(e.1R.9H);2V.1C('6z',1);2V.1C(c.F.8F,a0);c.2K.2n();c.1s.4F(2V,e)},1M:j(C,V){if(V.1J){c.1M.9J(C)}R if(V.1l){c.1M.1l(C)}R{c.1M.C(C,V)}if(c.2c.5g()&&c.F.au){3E($.1j(c.47.co,c),5B)}}}},1U:j(){E{5I:j(){3E($.1j(j(){E(c.1U.iM())?c.1U.2n():c.1U.2b()},c),5)},2n:j(){c.M.T().2k('G-1U')},3N:j(1l){c.F.1U=1l;c.M.T().12('1U',1l)},2b:j(){c.M.T().2T('G-1U')},is:j(){E c.M.T().2Z('G-1U')},2X:j(){if(!c.1U.4Q()){E}if(!c.1c.iN()){c.1c.iO()}c.1U.29();c.1U.iP();c.1U.5I();c.1U.6m()},4Q:j(){E(c.F.1U)?c.M.1t().12('1U',c.F.1U):c.1U.iQ()},6m:j(){c.M.T().on('1p.G-1U.'+c.1T,$.1j(c.1U.5I,c))},9V:j(){c.M.T().2a('.G-1U.'+c.1T)},29:j(){c.M.T().12('1U',c.M.1t().12('1U'))},iP:j(){q $3i=$('<3i />');$3i.2k('G-1U-3i-1u');$3i.C('#'+c.M.id()+'.G-1U::2w '+c.1U.iR());$('fe').1C($3i)},iR:j(){E'{ 2y: '+c.M.T().2e('a1-2y')+'; 3m: '+c.M.T().2e('a1-3m')+'; }'},iM:j(){q C=$.3d(c.M.T().C()).Q(/[\\t\\n]/g,'');q iS=['','<p>​</p>','<p>​<br></p>'];E($.3S(C,iS)!==-1)},iQ:j(){E(1h c.M.1t().12('1U')!=='1k'&&c.M.1t().12('1U')!=='')},5c:j(){c.M.T().2P('1U');c.1U.2b();c.1U.9V();$('.G-1U-3i-1u').1D()}}},2K:j(){E{$2f:1Z,$8q:1Z,1R:1r.3c,2n:j(){if(!c.2K.is()){c.2K.29();c.2K.$2f.4p('c5')}R{c.2K.$2f.2n()}},2b:j(){if(c.2K.is()){c.2K.$2f.4p('7Q',{4w:0.35},$.1j(c.2K.5c,c))}},3N:j(1F){c.2K.2n();c.2K.$8q.2e('2N',1F+'%')},is:j(){E(c.2K.$2f===1Z)?J:1i},29:j(){c.2K.$8q=$('<2h />');c.2K.$2f=$('<1z id=\"G-2K\" />');c.2K.$2f.1C(c.2K.$8q);$(c.2K.1R).1C(c.2K.$2f)},5c:j(){if(c.2K.is()){c.2K.$2f.1D()}c.2K.$2f=1Z;c.2K.$8q=1Z}}},N:j(){E{1f:j(){if(2G.5h){E 2G.5h()}R if(1r.N&&1r.N.Y!==\"mF\"){E 1r.N}E 1Z},15:j(1v){if(1h 1v==='1k'){1v=c.N.1f()}if(1v.7o&&1v.9I){E 1v.7o(0)}E 1Z},is:j(){E(c.N.4j())?J:1i},cd:j(){q 15=c.N.15();if(15!==1Z){q el=15.ct.6A;if($(el).2Z('G-in')||$(el).7k('.G-in').1b!==0){E 1i}}E J},4j:j(){q 1v=c.N.1f();E(1v===1Z)?J:1v.4j},3N:j(1v,15){if(15===1Z){E}1v.5i();1v.5L(15)},1w:j(){q 1v=c.N.1f();E(1v===1Z)?J:1v.mG},1L:j(){q 1w=c.N.1w();E(1w===1Z)?J:1w.6A},L:j(K){K=K||c.N.1w();51(K){if(c.1c.6f(K.1o)){E($(K).2Z('G-in'))?J:K}K=K.6A}E J},14:j(K){K=K||c.N.1w();51(K){if(c.1c.83(K.1o)){E($(K).2Z('G-in'))?J:K}K=K.6A}E J},1t:j(K){if(!K){K=c.N.1w()}51(K){if(K.6e===1){if($(K).2Z('G-in')){E J}E K}K=K.6A}E J},28:j(){q 1w=c.N.1w();E(1w===1Z)?J:c.N.1w().mH},1B:j(){q 1w=c.N.1w();E(1w===1Z)?J:c.N.1w().cu},2O:j(1u){q 2O=[];q 4d=c.N.4d(1u);$.1G(4d,$.1j(j(i,K){if(c.1c.9M(K)){2O.3k(K)}},c));q L=c.N.L();if(2O.1b===0&&L===J){E[]}R if(2O.1b===0&&L!==J){E[L]}R{E 2O}},3V:j(1u){q 3V=[];q 4d=c.N.4d(1u);$.1G(4d,$.1j(j(i,K){if(c.1c.8Q(K)){3V.3k(K)}},c));q 14=c.N.14();if(3V.1b===0&&14===J){E[]}R if(3V.1b===0&&14!==J){E[14]}R{E 3V}},4d:j(1u){q 5d=(1h 1u==='1k')?[]:(($.8g(1u))?1u:[1u]);q 1v=c.N.1f();q 15=c.N.15(1v);if(c.1c.4j()){E[c.N.1w()]}R{q K=15.ct;q cv=15.cl;if(K===cv){E[K]}q 4d=[];51(K&&K!==cv){4d.3k(K=c.N.cm(K))}K=15.ct;51(K&&K!==15.mI){4d.mJ(K);K=K.6A}q a2=[];$.1G(4d,j(i,s){q 1o=(s.6e!==1)?J:s.1o.3J();if($(s).2Z('G-3Y-1u, G-N-1H')){E}R if(1o&&5d.1b!==0&&$.3S(1o,5d)===-1){E}R{a2.3k(s)}});E(a2.1b===0)?[]:a2}},cm:j(K){if(K.mK()){E K.gJ}R{51(K&&!K.cu){K=K.6A}if(!K){E 1Z}E K.cu}},3l:j(){c.1H.1M();c.iT=c.M.T().C()},2M:j(86){q 4V=c.1H.1y(1);q 5J=c.1H.1y(2);if(c.2c.5g()){c.M.T().2t()}if(4V.1b!==0&&5J.1b!==0){c.1O.2A(4V,5J)}R if(4V.1b!==0){c.1O.1W(4V)}R{c.M.T().2t()}if(86!==J){c.1H.1D();c.iT=J}},K:j(K){$(K).70(c.1H.1f(1));$(K).1C(c.1H.1f(2));c.N.2M()},eT:j(){c.M.T().2t();q 1v=c.N.1f();q 15=c.N.15(1v);15.77(c.M.T()[0]);c.N.3N(1v,15)},1D:j(){c.N.1f().5i()},Q:j(C){c.1M.C(C)},1l:j(){E c.N.1f().7S()},C:j(){q C='';q 1v=c.N.1f();if(1v.9I){q 8I=1r.3T('1z');q 2i=1v.9I;3a(q i=0;i<2i;++i){8I.bH(1v.7o(i).iv())}C=c.1X.b6(8I.3r)}E C},bK:j(K){q 1v=c.N.1f();q 15=c.N.15(1v);q a3=15.9K();a3.77(K);a3.75(15.cl,15.iw);E a3.mL()},86:j(){c.1H.1D()},1H:j(3W){E c.1H.1f(3W)},mM:j(3W){E c.1H.C(3W)}}},4f:j(){E{iU:{8:\"mN\",9:\"4g\",10:\"E\",13:\"E\",16:\"5q\",17:\"3F\",18:\"9z\",19:\"mO\",20:\"mP\",27:\"mQ\",32:\"4W\",33:\"mR\",34:\"mS\",35:\"2E\",36:\"mT\",37:\"3m\",38:\"mU\",39:\"a4\",40:\"mV\",45:\"1M\",46:\"4z\",59:\";\",61:\"=\",96:\"0\",97:\"1\",98:\"2\",99:\"3\",5B:\"4\",mW:\"5\",mX:\"6\",mY:\"7\",mZ:\"8\",i9:\"9\",n0:\"*\",n1:\"+\",n2:\"-\",n3:\".\",n4:\"/\",n5:\"f1\",n6:\"f2\",n7:\"f3\",n8:\"f4\",n9:\"f5\",na:\"f6\",nb:\"f7\",nc:\"f8\",nd:\"f9\",ne:\"nf\",ng:\"nh\",ni:\"nj\",nk:\"nl\",nm:\"6j\",nn:\"-\",no:\";\",np:\"=\",nq:\",\",nr:\"-\",ns:\".\",nt:\"/\",nu:\"`\",bN:\"[\",nv:\"\\\\\",bM:\"]\",nw:\"'\"},cw:{\"`\":\"~\",\"1\":\"!\",\"2\":\"@\",\"3\":\"#\",\"4\":\"$\",\"5\":\"%\",\"6\":\"^\",\"7\":\"&\",\"8\":\"*\",\"9\":\"(\",\"0\":\")\",\"-\":\"hD\",\"=\":\"+\",\";\":\": \",\"'\":\"\\\"\",\",\":\"<\",\".\":\">\",\"/\":\"?\",\"\\\\\":\"|\"},2X:j(e,1g){if(c.F.4f===J){if((e.6a||e.5A)&&(1g===66||1g===73)){e.2d()}E J}R{$.1G(c.F.4f,$.1j(j(3P,2H){c.4f.29(e,3P,2H)},c))}},29:j(e,3P,2H){q 4Z=$.1j(j(){c.4f.iV(2H)},c);q 4K=3P.4e(',');q 2i=4K.1b;3a(q i=0;i<2i;i++){if(1h 4K[i]==='ag'){c.4f.4Z(e,$.3d(4K[i]),4Z)}}},iV:j(2H){q 1A;if(2H.1A.3s(/\\./)!=='-1'){1A=2H.1A.4e('.');if(1h c[1A[0]]!=='1k'){c[1A[0]][1A[1]].5V(c,2H.5s)}}R{c[2H.1A].5V(c,2H.5s)}},4Z:j(e,4K,iW){4K=4K.3J().4e(\" \");q a5=c.4f.iU[e.2u];q 8r=7a.nx(e.69).3J();q 7u=\"\",7v={};$.1G([\"9z\",\"3F\",\"5r\",\"5q\"],j(5C,a6){if(e[a6+'ny']&&a5!==a6){7u+=a6+'+'}});if(a5){7v[7u+a5]=1i}if(8r){7v[7u+8r]=1i;7v[7u+c.4f.cw[8r]]=1i;if(7u===\"5q+\"){7v[c.4f.cw[8r]]=1i}}q 2i=4K.1b;3a(q i=0;i<2i;i++){if(7v[4K[i]]){e.2d();E iW.5V(c,cT)}}}}},3X:j(){E{V:[],5D:j(V){V.5o=1i;V.1x=iX(c.O.bS(V.1x));c.3X.V[V.1x]=V},5o:j(1x,5o){c.3X.V[iX(1x)].5o=5o},1V:j(){q a7=c;q $4X=c.M.T().1y('[V-1n]');$4X.1G(j(i,s){a7.3X.5D({Y:'1n',K:s,1x:s.3A,id:$(s).12('V-1n')})});q $4x=c.M.T().1y('[V-1Q]');$4x.1G(j(i,s){a7.3X.5D({Y:'1Q',K:s,1x:s.2g,id:$(s).12('V-1Q')})});q $3R=c.M.T().1y('[V-3R]');$3R.1G(j(i,s){q 1x=(s.1o==='6p')?s.3A:s.2g;a7.3X.5D({Y:'3R',K:s,1x:1x,id:$(s).12('V-3R')})})},nz:j(){3a(q 1g in c.3X.V){q V=c.3X.V[1g];q 12=(V.K.1o==='6p')?'3A':'2g';q $el=c.M.T().1y('[V-'+V.Y+']['+12+'=\"'+V.1x+'\"]');if($el.1b===0){c.3X.5o(V.1x,J)}R{c.3X.5o(V.1x,1i)}}E c.3X.V}}},1q:j(){E{29:j(){c.1d.aL();c.1d.aM();if(c.F.3I.1b===0){E}c.$1q=c.1q.8W();c.1q.1C();c.1d.$1q=c.$1q;c.1d.aN();c.1d.3K(c.$1q);c.1q.iY()},8W:j(){E $('<3t>').2k('G-1q').12({'id':'G-1q-'+c.1T,'68':'1q'})},1C:j(){if(c.F.8J){c.$1q.2k('G-1q-nA');$(c.F.8J).C(c.$1q)}R{if(c.F.Y==='3b'){c.$2f.70(c.$1q)}R{c.$1t.4G(c.$1q)}}},iY:j(){if(!c.F.df||c.F.8J){E}if(c.F.49!==1r){q $el=$(c.F.49);c.iZ=($el.1b===0)?0:c.M.2f().2U().2y-$el.2U().2y}q j0=(c.M.2f().2z('.1e-3c').1b!==0)?nB:0;3E($.1j(j(){c.1q.a8(J);if(c.2c.3G()){$(c.F.49).on('6j.G.'+c.1T,$.1j(c.1q.a8,c))}R{q 2q=c;$(c.F.49).on('6j.G.'+c.1T,j(){2q.M.1q().2b();bv($.V(c,\"j1\"));$.V(c,\"j1\",3E(j(){2q.M.1q().2n();2q.1q.a8()},nC))})}},c),j0)},j2:j(){E(c.F.49===1r)?c.M.2f().2U().2y:c.iZ},a8:j(1W){q cx=0;if(1W!==J){cx=(c.F.49===1r)?20:0}q 3L=$(c.F.49).3L();q 6B=c.1q.j2();if((3L+c.F.5Z+cx)>6B){c.1q.j3(3L,6B)}R{c.1q.cy()}},j4:j(){c.$1q.2e({2N:c.M.2f().7O(),3m:c.M.2f().2U().3m})},j3:j(3L,6B){if(1h c.j5!=='1k'&&c.j5.nD===J){c.1q.cy();E}q 2E=6B+c.M.2f().ic()-32;q 2N=c.M.2f().7O();q 2Q=(c.2c.3G())?'5k':'6l';q 2y=(c.2c.3G())?c.F.5Z:($(c.F.49).3L()-6B);q 3m=(c.2c.3G())?c.M.2f().2U().3m:0;if(c.F.49!==1r){2Q='6l';2y=c.F.5Z+$(c.F.49).3L()-6B;3m=0}c.$1q.2k('1q-5k-2f');c.$1q.2e({2Q:2Q,2N:2N,2y:2y,3m:3m});if(3L>2E){$('.G-1a-'+c.1T+':9Z').2b()}c.1q.j6();c.$1q.2e('j7',(3L<2E)?'9Z':'aV');$(2G).on('9T.G-1q.'+c.1T,$.1j(c.1q.j4,c))},cy:j(){c.$1q.2e({2Q:'cz',2N:'eJ',2y:0,3m:0,j7:'9Z'});c.1q.j8();c.$1q.2T('1q-5k-2f');$(2G).2a('9T.G-1q.'+c.1T)},j6:j(){q 2Q=(c.F.49===1r&&c.2c.3G())?'5k':'6l';c.1q.cA(2Q)},j8:j(){c.1q.cA('6l')},cA:j(2Q){q 2q=c;$('.G-1a-'+c.1T).1G(j(){q $el=$(c);q $1d=2q.1d.1f($el.12('4m'));q 2y=(2Q==='5k')?2q.F.5Z:$1d.2U().2y;$el.2e({2Q:2Q,2y:($1d.9o()+2y)+'4D'})})}}},1s:j(){E{2X:j(id,1x,1m){c.1s.3H=J;c.1s.1m=1m;c.1s.1x=1x;c.1s.$el=$(id);c.1s.$3U=$('<1z id=\"G-3U\" />');c.1s.$cB=$('<1z id=\"G-3U-1U\" />').1l(c.1I.1f('1s-2o'));c.1s.$3u=$('<3u Y=\"1Q\" 1S=\"1Q\" />');c.1s.$cB.1C(c.1s.$3u);c.1s.$3U.1C(c.1s.$cB);c.1s.$el.1C(c.1s.$3U);c.1s.$3U.2a('G.1s');c.1s.$3u.2a('G.1s');c.1s.$3U.on('6o.G.1s',$.1j(c.1s.j9,c));c.1s.$3U.on('9r.G.1s',$.1j(c.1s.ja,c));c.1s.$3u.on('bi.G.1s',$.1j(j(e){e=e.8d||e;c.1s.8s(c.1s.$3u[0].4x[0],e)},c));c.1s.$3U.on('5l.G.1s',$.1j(j(e){e.2d();c.1s.$3U.2T('7w-cC').2k('7w-5l');c.1s.9t(e)},c))},gh:j(1Q,e){c.1s.3H=1i;c.1s.8s(1Q,e)},9t:j(e){e=e.8d||e;q 4x=e.9s.4x;if(c.F.d7){q 2i=4x.1b;3a(q i=0;i<2i;i++){c.1s.8s(4x[i],e)}}R{c.1s.8s(4x[0],e)}},8s:j(1Q,e){if(c.F.3R){c.1s.cD(1Q);c.6E.4F(1Q,e);E}q 2V=!!2G.50?1N 50():1Z;if(2G.50){c.1s.cD(1Q);q 1S=(c.1s.Y==='1n')?c.F.8F:c.F.d8;2V.1C(1S,1Q)}c.2K.2n();c.M.1m('nE',e,2V);c.1s.4F(2V,e)},cD:j(1Q){c.1s.jb(1Q);if(c.1s.3H){c.1s.1x=(c.1s.Y==='1n')?c.F.48:c.F.57;c.1s.1m=(c.1s.Y==='1n')?c.1n.1M:c.1Q.1M}},jb:j(1Q){c.1s.Y=(c.F.dH.4R(1Q.Y)===-1)?'1Q':'1n';if(c.F.48===1Z&&c.F.57!==1Z){c.1s.Y='1Q'}},7R:j(53,fd){if(53===J||1h 53!=='3y'){E fd}$.1G(53,$.1j(j(k,v){if(v!==1Z&&v.7S().4R('#')===0){v=$(v).2I()}fd.1C(k,v)},c));E fd},4F:j(2V,e){if(c.1s.Y==='1n'){2V=c.1c.7x(c.F.d4,2V);2V=c.1c.7y(c.F.d5,2V);2V=c.1s.7R(c.1s.a9,2V)}R{2V=c.1c.7x(c.F.d9,2V);2V=c.1c.7y(c.F.da,2V);2V=c.1s.7R(c.1s.aa,2V)}q 2R=1N ab();2R.7s('nF',c.1s.1x);2R.cE(\"X-nG-nH\",\"ab\");2R.jc=$.1j(j(){if(2R.jd===4){q V=2R.je;V=V.Q(/^\\[/,'');V=V.Q(/\\]$/,'');q 2v;6X{2v=(1h V==='ag'?$.e7(V):V)}6Y(nI){2v={6D:1i}}c.2K.2b();if(!c.1s.3H){c.1s.$3U.2T('7w-5l')}c.1s.1m(2v,c.1s.3H,e)}},c);2R.4F(2V)},j9:j(e){e.2d();c.1s.$3U.2k('7w-cC')},ja:j(e){e.2d();c.1s.$3U.2T('7w-cC')},nJ:j(){c.1s.a9={}},nK:j(1S,1F){c.1s.a9[1S]=1F},nL:j(1S){60 c.1s.a9[1S]},nM:j(){c.1s.aa={}},nN:j(1S,1F){c.1s.aa[1S]=1F},nO:j(1S){60 c.1s.aa[1S]}}},6E:j(){E{4F:j(1Q,e){c.6E.jf(1Q,$.1j(j(jg){c.6E.jh(1Q,jg,e)},c))},jf:j(1Q,1m){q 2R=1N ab();q 8C=(c.F.3R.3s(/\\?/)===-1)?'?':'&';2R.7s('nP',c.F.3R+8C+'1S='+1Q.1S+'&Y='+1Q.Y,1i);if(2R.ji){2R.ji('1l/nQ; nR=x-nS-nT')}q jj=c;2R.jc=j(e){if(c.jd===4&&c.5o===8X){jj.2K.2n();1m(hP(c.je))}};2R.4F()},jk:j(8A,1x){q 2R=1N ab();if(\"nU\"in 2R){2R.7s(8A,1x,1i)}R if(1h jl!==\"1k\"){2R=1N jl();2R.7s(8A,1x)}R{2R=1Z}E 2R},jh:j(1Q,1x,e){q 2R=c.6E.jk('nV',1x);if(!2R){E}2R.iJ=$.1j(j(){q 2v;c.2K.2b();if(2R.5o!==8X){2v={6D:1i};c.1s.1m(2v,c.1s.3H,2R);E}q 8t=1x.4e('?');if(!8t[0]){E J}if(!c.1s.3H){c.1s.$3U.2T('7w-5l')}2v={1x:8t[0],id:8t[0],3R:1i};if(c.1s.Y==='1Q'){q 31=8t[0].4e('/');2v.1S=31[31.1b-1]}c.1s.1m(2v,c.1s.3H,e)},c);2R.nW=j(){};2R.1s.nX=j(e){};2R.cE('nY-nZ',1Q.Y);2R.cE('x-o0-o1','iI-o2');2R.4F(1Q)}}},1c:j(){E{3w:j(C){C=(1h C==='1k')?c.M.T().C():C;C=C.Q(/[\\4u-\\o3\\o4]/g,'');C=C.Q(/&5j;/gi,'');C=C.Q(/<\\/?br\\s?\\/?>/g,'');C=C.Q(/\\s/g,'');C=C.Q(/^<p>[^\\W\\w\\D\\d]*?<\\/p>$/i,'');C=C.Q(/<63(.*?[^>])>$/i,'63');C=C.Q(/<6W(.*?[^>])>$/i,'6W');C=C.Q(/<[^\\/>][^>]*><\\/[^>]+>/gi,'');C=C.Q(/<[^\\/>][^>]*><\\/[^>]+>/gi,'');C=$.3d(C);E C===''},o5:j(53){6X{E 53 o6 o7}6Y(e){E(1h 53===\"3y\")&&(53.6e===1)&&(1h 53.3i===\"3y\")&&(1h 53.o8===\"3y\")}},o9:j(jm,jn,2U){q i=jm.4R(jn,2U);E i>=0?i:J},cs:j(8u){q 7z;if(8u.4e(',')[0].4R('oa')>=0){7z=ob(8u.4e(',')[1])}R{7z=oc(8u.4e(',')[1])}q jo=8u.4e(',')[0].4e(':')[1].4e(';')[0];q ia=1N od(7z.1b);3a(q i=0;i<7z.1b;i++){ia[i]=7z.oe(i)}E 1N of([ia],{Y:jo})},8f:j(el){E $('<1z>').1C($(el).eq(0).9O()).C()},jp:j(8v,3v){8v=8v[0]||8v;3v=$(3v);q cF=8v.4s;q 2i=cF.1b;51(2i--){q 12=cF[2i];3v.12(12.1S,12.1F)}E 3v},6t:j(){q L=c.N.L();q 3w=c.1c.3w(L.3r);q 1u=L.1o.3J();if(1u==='1J'||1u==='li'||1u==='3Q'||1u==='5p'){E J}if(!3w&&c.1c.6u(L)){E{$L:$(L),$1B:$(L).1B(),Y:'1W'}}R if(!3w&&c.1c.5m(L)){E{$L:$(L),$1B:$(L).1B(),Y:'2E'}}R{q 9L=c.N.bK(L);q $8w=$('<'+1u+' />').1C(9L);$8w=c.1c.jp(L,$8w);$(L).2w($8w);E{$L:$(L),$1B:$8w,Y:'iy'}}},hR:j(1K){1K=($.8g(1K))?1K:[1K];q 2O=c.N.2O();q 2i=2O.1b;q 7A=J;3a(q i=0;i<2i;i++){if(2O[i]!==J){q 1u=2O[i].1o.3J();if($.3S(1u,1K)!==-1){7A=1i}}}E 7A},og:j(1K){1K=($.8g(1K))?1K:[1K];q 3V=c.N.3V();q 2i=3V.1b;q 7A=J;3a(q i=0;i<2i;i++){q 1u=3V[i].1o.3J();if($.3S(1u,1K)!==-1){7A=1i}}E 7A},4r:j(1w,1u){q 1t=$(1w).2z(1u,c.M.T()[0]);if(1t.1b===1){E 1t[0]}E J},9M:j(L){if(L===1Z){E J}L=L[0]||L;E L&&c.1c.6f(L.1o)},6f:j(1u){E(1h 1u==='1k')?J:c.dW.5N(1u)},8Q:j(14){14=14[0]||14;E 14&&c.1c.83(14.1o)},83:j(1u){E(1h 1u==='1k')?J:c.dX.5N(1u)},4E:j(el){if(!el){E J}if($(el).7k('.G-in').1b===0||$(el).2Z('G-in')){E J}E el},bh:j(){E c.1c.4Y(['ea','eb','ec','ed','ee','ef'])},4Y:j(1o){q 1L=c.N.1L();q 1w=c.N.1w();if($.8g(1o)){q cG=0;$.1G(1o,$.1j(j(i,s){if(c.1c.cH(1w,1L,s)){cG++}},c));E(cG===0)?J:1i}R{E c.1c.cH(1w,1L,1o)}},cH:j(1w,1L,1o){1o=1o.8P();E 1L&&1L.1o===1o?1L:1w&&1w.1o===1o?1w:J},iN:j(){q 2Q=c.M.T().2e('2Q');q 31=['6l','5k','cz'];E($.3S(31,2Q)!==-1)},iO:j(){c.M.T().2k('G-cz')},eQ:j(){c.ac=$(1r).3L();$(1r).3L(c.ac)},eS:j(){if(1h c.ac==='1k'){E}$(1r).3L(c.ac)},9N:j(){c.cI=$(1r).3L()},9F:j(){if(1h c.cI==='1k'){E}$(1r).3L(c.cI)},6u:j(1t){if(1h 1t==='1k'){1t=c.N.L();if(!1t){E J}}E(c.2U.1f(1t)===0)?1i:J},5m:j(1t){if(1h 1t==='1k'){1t=c.N.L();if(!1t){E J}}q 1l=$.3d($(1t).1l()).Q(/[\\t\\n\\r\\n]/g,'').Q(/\\4u/g,'');q 2U=c.2U.1f(1t);E(2U===1l.1b)?1i:J},gG:j(el,12){q $el=$(el);if(1h $el.12(12)==='1k'){E 1i}if($el.12(12)===''){$el.2P(12);E 1i}E J},42:j(K,1u){q 6i;$(K).3n(j(){6i=$('<'+1u+' />').1C($(c).3j());3a(q i=0;i<c.4s.1b;i++){6i.12(c.4s[i].1S,c.4s[i].1F)}E 6i});E 6i},6s:j(){E c.cJ},hm:j(){c.cJ=1i},7e:j(){c.cJ=J},bl:j(){q $3c=$('C');q 7t=2G.7O;if(!7t){q cK=1r.oh.oi();7t=cK.a4-bp.oj(cK.3m)}q jq=1r.3c.jr<7t;q ad=c.1c.js();$3c.2e('cb','aV');if(jq){$3c.2e('a1-a4',ad)}},js:j(){q $3c=$('3c');q 7B=1r.3T('1z');7B.b4='G-jt-ju';$3c.1C(7B);q ad=7B.ok-7B.jr;$3c[0].om(7B);E ad},8a:j(){$('C').2e({'cb':'','a1-a4':''});$('3c').1D('G-jt-ju')},7x:j(7x,V){if(!7x){E V}q $cL=$(7x);if($cL.1b===0){E V}R{q 3P='';$cL.1G(j(){V.1C($(c).12('1S'),$(c).2I())});E V}},7y:j(7y,V){if(!7y){E V}q $cM=$(7y);if($cM.1b===0){E V}R{q 2V=$cM.oo();$.1G(2V,j(z,f){V.1C(f.1S,f.1F)});E V}},4j:j(){E c.N.4j()},5y:j(){E c.2c.5y()},3G:j(){E c.2c.3G()},op:j(){E c.2c.fT()}}},cU:j(){E{9m:j(){E c.2c.bj()},ff:j(){E c.2c.5g()},ie:j(){E c.2c.5G()}}}};$(2G).on('3K.jv.G',j(){$('[V-jv=\"G\"]').G()});3q.54.2X.54=3q.54})(jw);(j($){$.fn.4p=j(3C,2W,1m){E c.1G(j(){1N 4p(c,3C,2W,1m)})};j 4p(1t,3C,2W,1m){q F={4w:0.5,ae:1,8x:0,af:'G-',5n:'cN'};c.3C=3C;c.cO=(c.3C==='bm'||c.3C==='bs');c.$1t=$(1t);c.7C=['','-oq-','-o-3C-','-9m-'];c.5U=[];if(1h 2W==='j'){1m=2W;c.F=F}R{c.F=$.5w(F,2W)}if(c.cO){c.$1t.4t(c.$1t.4t())}c.2X(1m)}4p.54={2X:j(1m){c.5U.3k(c.3C);c.1X();if(c.3C==='2n'){c.F.5n='cN';c.$1t.2T('2b').2n();if(1h 1m==='j'){1m(c)}}R if(c.3C==='2b'){c.F.5n='cN';c.$1t.2b();if(1h 1m==='j'){1m(c)}}R{c.9P(1m)}},9P:j(1m){c.$1t.2k('jx').2e('9d','').2T('2b');c.$1t.2k(c.F.af+c.5U[0]);c.2A(c.F.4w+'s',c.F.8x+'s',c.F.ae,c.F.5n);q jy=(c.5U.1b>1)?1Z:1m;c.jz('os',$.1j(j(){if(c.$1t.2Z(c.F.af+c.5U[0])){c.1X();c.5U.5q();if(c.5U.1b){c.9P(1m)}}},c),jy)},2A:j(4w,8x,ae,5n){q 2i=c.7C.1b;51(2i--){c.$1t.2e(c.7C[2i]+'3C-4w',4w);c.$1t.2e(c.7C[2i]+'3C-8x',8x);c.$1t.2e(c.7C[2i]+'3C-ot-ou',ae);c.$1t.2e(c.7C[2i]+'3C-5n-j',5n)}},1X:j(){c.$1t.2T('jx');c.$1t.2T(c.F.af+c.5U[0]);c.2A('','','','')},jz:j(Y,cP,1m){c.$1t.ov(Y.3J()+' 9m'+Y+' o'+Y+' ow'+Y,$.1j(j(){if(1h cP==='j'){cP()}if(1h 1m==='j'){1m(c)}q jA=['7Q','bs','ox','oy','oz','oA'];if($.3S(c.3C,jA)!==-1){c.$1t.2e('9d','aZ')}if(c.cO){c.$1t.2e('4t','')}},c))}}})(jw);",62,1525,"||||||||||||this|||||||function|||||||var||||||||||||html||return|opts|redactor|||false|node|block|core|selection|link||replace|else||editor||data|||type||||attr||inline|range|||||dropdown|length|utils|button|modal|get|key|typeof|true|proxy|undefined|text|callback|image|tagName|keydown|toolbar|document|upload|element|tag|sel|current|url|find|div|func|next|append|remove|title|value|each|marker|lang|pre|tags|parent|insert|new|caret|events|file|target|name|uuid|placeholder|observe|start|clean|list|null||class|air|code|||click||prev|build|off|hide|detect|preventDefault|css|box|href|span|len|RegExp|addClass|btnObject|buffer|show|label|last|self|btnName|btn|focus|keyCode|json|after|format|top|closest|set|img|first|blockquote|end|item|window|command|val|keyup|progress|section|restore|width|blocks|removeAttr|position|xhr|figure|removeClass|offset|formData|options|init|linkify|hasClass||arr|||||||||for|textarea|body|trim|autosave|indent|paragraphize|edit|style|contents|push|save|left|replaceWith|match|args|Redactor|innerHTML|search|ul|input|to|isEmpty|figcaption|object|replaced|src|active|animation|returned|setTimeout|ctrl|isDesktop|direct|buttons|toLowerCase|load|scrollTop|aria|update|links|str|td|s3|inArray|createElement|droparea|inlines|num|storage|script|close||emptyHtml|replaceToTag|modalBox|breaked|||paste|imageUpload|toolbarFixedTarget|lists|regexps|collapse|nodes|split|shortcuts|tab|join|mousedown|isCollapsed|currentTag|re|rel|insertNode|tooltip|redactorAnimation|toggle|isTag|attributes|height|u200B|tmp|duration|files|line|del|bold|italic|caption|px|isRedactorParent|send|before|arrow|lastNode|getInlines|keys|callbacks|deleted|unlink|DELETE|ENTER|enabled|indexOf|setAttr|getBlocks|execCommand|node1|space|images|isCurrentOrParent|handler|FormData|while|matches|obj|prototype|call|settings|fileUpload|blockTags||userAgent|BACKSPACE|destroy|filter|shiftKey|disabled|isFirefox|getSelection|removeAllRanges|nbsp|fixed|drop|isEndOfElement|timing|status|th|shift|meta|params|langs|abbr|https|extend|methods|isMobile|deleteContents|metaKey|100|index|add|touchstart|blur|isIe|btns|enable|node2|createTextNode|addRange|sync|test|dropdownObject|children|nodeValue|modalBody|templateName|pasteBox|queue|apply|instance|plugins|preSpaces|toolbarFixedTopOffset|delete||inlineTags|iframe|form|||module|role|which|ctrlKey|not|BR|textNode|nodeType|isBlockTag|UL|OL|replacement|scroll|modalOverlay|absolute|enableEvents|dropImage|dragover|IMG|stop|LI|isSelectAll|breakBlockTag|isStartOfElement|pos|blockElem|action|cloned|clipboard|parentNode|boxTop|isFunction|error|uploads3|structure|enterKey|strong|horizontalrule|orderedlist|strike|underline|cancel|Heading|filename|outdent|navigator|www|PRE|initToEdit|syncFire|collapsed|source|try|catch|Attr|prepend|decrease|out||hideAll|setStart|createRange|selectNodeContents|lastChild|quot|String|getEvent|itemContainer|dropact|disableSelectAll|rtePaste|_blank|blank|pattern|re2|parents|items|converted|breakpoint|getRangeAt|FIGURE|nextList|listParent|open|windowWidth|modif|possible|drag|appendFields|appendForms|byteString|contains|scrollDiv|prefixes|Array|tabindex|pasteInlineTags|linkSize|unorderedlist|rebuffer|dropdowns|linkyoutube|linkvimeo|ESC|namespace|innerWidth|setInactiveAll|fadeOut|getHiddenFields|toString|toggleClass|onSync|margin|toolbarsButtons|cleaned|curLang|increase|returnValue|act|prepare|isInlineTag|setStartAfter|amp|removeMarkers|htmlCleaned|addEvent|event|enableBodyScroll|closeHandler|elements|originalEvent|http|getOuterHtml|isArray|deleteContent|re1|newBlock|cmd|insertedList|tabs|modalHeader|modalClose|addProperties|bar|character|traverseFile|s3file|dataURI|from|nextPart|delay|bind|methodVal|method|table|mark|tabAsSpaces|autosaveFields|imageUploadParam|dragImageUpload|dragFileUpload|container|toolbarExternal|Insert|x200b|com|linkimage|SPACE|toUpperCase|isInline|DIV|clickToCancelStorage|clickToCancel|clickToSave|property|createContainer|200|autosaveTimeout|formatCollapsed|||formatUncollapsed|unwrap|addAttr|undo|||||voice|max|inactive|display|setEnd|parseHTML|encode|encodeEntities|normalize|stopDetectChanges|startDetectChanges|plugin|webkit|stopPropagation|innerHeight|blured|stopChanges|dragleave|dataTransfer|onDrop|scrollTimer|imageEditing|nodeToPoint|getActionButton|FIGCAPTION|alt||prop|checked|ftp|linkProtocol|restoreScroll|removeItemEmpty|result|rangeCount|raw|cloneRange|endOfNode|isBlock|saveScroll|clone|animate|closeAllTooltip|re3|checkbox|resize|number|disableEvents|parentEl|deleteProperties|xparagraphmarkerz|visible|blob|padding|resultNodes|clonedRange|right|special|specialKey|_this|observeScroll|imageFields|fileFields|XMLHttpRequest|freezeScrollTop|scrollbarWidth|iterate|prefix|string|modules|direction|minHeight|maxHeight|maxWidth|pastePlainText|pasteImages|pasteLinks|pasteBlockTags|sup|sub|preClass|autosaveName|clipboardImageUpload|video|airWidth|formatting|formattingAdd|buttonsHide|buttonsHideOnMobile|removeFormat|Cancel|quote|optional|header|paragraphizeBlocks|invisibleSpace|TAB|getModuleMethods|collapseToStart|hideButtons|hideButtonsOnMobile|setFormatting|appendTo|leftFix|clientX|altKey|disable|removeInlineTags|redo|hidden|contenteditable|RedactorPlugins|hideButtonsSlicer|none|addCallback|addDropdown|setActive|textnode|className|onSet|onGet|onPaste|getPlainText|getCurrentType|isHtmlBlocked|cleanPre|denied|z0||removeSpacesHard|heading|isCurrentOrParentHeader|change|isWebkit|mouseover|disableBodyScroll|slideDown|enableCallback|dropdownWidth|Math|parseInt||slideUp|focused|isCallback|clearTimeout|500|redactorImageLink|newList|removeEmpty|insertBreakpoint|formatSet|oldEl|newEl|placeHtml|wrap|frag|appendChild|gap|placeNode|extractEndOfNode|endRange|221|219|insertNewLine|replaceToParagraph|insertBreakLineProcessing|removeIt|removeSelfHostFromUrl|cleanUrl|cleanText|getText|substring|parse|mailto|buildTarget|unlinked|iframeStart|iframeEnd|regexB|buildWidth|fadeIn|175|windowHeight|bottom|16px|tabsBox|overflow|currentEl|isRedactor|inValues|outValues|setDropdownProperties|setDropdownAttr|isDelete|closeTooltip|lineHeight|endContainer|nextNode|safes|clipboardUpload|visibleModals|types|reader|dataURItoBlob|startContainer|nextSibling|endNode|hotkeysShiftNums|tolerance|observeScrollDisable|relative|setDropdownPosition|placeholdler|hover|setConfig|setRequestHeader|attrs|matched|isCurrentOrParentOne|tmpScrollTop|selectAll|documentElementRect|fields|forms|linear|slide|make|Function|scope|slice|arguments|browser|focusEnd|clickToEdit|tr|ins|samp|kbd|cite|small|tabKey|imageUploadFields|imageUploadForms|imageCaption|multipleImageUpload|fileUploadParam|fileUploadFields|fileUploadForms|linkTooltip|linkNofollow||videoContainerClass|toolbarFixed|superscript|subscript|shortcutsAdd|activeButtons|activeButtonsStates||Edit|Delete|paragraph|heading1|heading2|heading3|heading4||heading5|heading6|List|bulletslist|numberslist|accessibility|help|address|footer|aside|article|select|area|imageTypes|png|gif|youtube|vimeo|UP|DOWN|CTRL|META|SHIFT|ALT|LEFT_WIN|loadOptions|loadModules|loadToEdit|reIsBlock|reIsInline|detectType|startToEdit|bindModuleMethods|collapseToEnd|mouseup|clientY|bindHide|jsxhr|success|parseJSON|callbackName|clearInterval|H1|H2|H3|H4|H5|H6|splice|Class|removeAll|replaceClass|removeAllClass||||replaceAttr|toggleAttr||removeAllAttr|setUndo|setRedo|getUndo|pop|getRedo|startTextarea|setIn|setId|enableEditor|setOptions|callEditor|createContainerBox|getName|loadFromTextarea|toolbarMobile|dir|min|auto|disableBrowsersEditing|setHelpers|templates|bull|setEvent|haspopup|freezeScroll|clickCallback|unfreezeScroll|all|afterkey|beforekey|icon|invisible|setStartBefore|TABLE|savePreCode||||||||||saveFormTags|marker1|marker2||head||stripTags|restoreFormTags|nofollow|chars|msword|isHtmlMsWord|cleanMsWord||replaceBrToNl|removeTagsInsidePre|removeSpans|removeEmptyInlineTags|convertTags|reconvertTags|replaceNbspToSpaces|encodeHtml|isHtmlLine|match1|match2|matchBR|matchNL|bmso|concat|textContent|innerText|savePreFormatting|saveCodeFormatting|restoreSelectionMarkers|normalizeCurrentHeading|isSync|startSync|eventNamespace|destroyed|touchmove|iPhone|iPod|BlackBerry|Android|iPad|isIpad|buildFormatting|buildItem|classname|divider|itemSpan|buildClick|buildCommand|getButtonPosition|showIsFixedToolbar|showIsUnFixedToolbar|dropdownHide|mouseout|hideOut|onDropUpload|size|touchImageEditing|createObserver|setupObserver|observer|mutations|iterateObserver|mutation|changeHandler|directUpload||700|release|HR|activeElement|imageDelete|setEditable|showEdit|buttonDelete|getDeleteButton|buttonSave||preview|xn|boolean|listTag|repositionItem|formatblock|strikethrough|formatConvert|formatted|unline|decoration|SPAN|removeEmptyAttr|endTag|appendLists|firstChild|caretPositionFromPoint|caretRangeFromPoint|createTextRange|moveToPoint|keydownStop|checkEvents|setupBuffer|addArrowsEvent|setupSelectAll|onArrowDown|onArrowUp|wrapToParagraph|onShiftSpace|onShiftEnter|onEnter|onTab|onBackspaceAndDeleteBefore|||||||tagLi|removeOnBackspace|combineAfterAndBefore|removeInvisibleSpace|removeEmptyListInTable|onBackspaceAndDeleteAfter|removeEmptyLists|formatEmpty|exitFromBlockquote|insertBreakLine|insertParagraph|checkKeyEvents|insertAfterLastElement|insertBeforeFirstElement|u00a0|enableSelectAll|dbl|br1|br2|blockHtml||newTag|isContainImage|isKey|getLineHtml|replaceLinksToText|buildLinkFromObject|insertedLink|buildModal|buildLinkFromElement|setModalValues|buildLinkFromModal|_|truncateUrl|isUrl|re4|re5|isMailto|isLink|isFiltered|convertVideoLinks|convertImages|convertLinks|objects|decodeURIComponent|regexp|inBlocks|isEmptyBlock|isBlockWrapped|iterateRemove|General|Upload|URL|template|getTemplate|getCancelButton|setTitle|setDraggable|setContent|buildTabber|cubic|bezier|885|320|105||setEnter|outerHeight|||||tabber|showTab|draggable|buildOverlay|finded|properties||showTooltip|getTooltipPosition|aLink|aEdit||aUnlink|lineClicked|cloneContents|endOffset|walker|break|getSafes|convert|clear|restoreSafes|detectClipboardUpload|createPasteBox|freeze|getPasteBoxCode|appendPasteBox|public|onload|insertFromClipboard|imgs|isEditorEmpty|isEditorRelative|setEditorRelative|buildPosition|isAttr|getPosition|states|savedSel|hotkeysSpecialKeys|buildHandler|origHandler|decodeURI|setFixed|toolbarOffsetTop|late|scrollCheck|getBoxTop|observeScrollEnable|observeScrollResize|fullscreen|setDropdownsFixed|visibility|unsetDropdownsFixed|onDrag|onDragLeave|getType|onreadystatechange|readyState|responseText|executeOnSignedUrl|signedURL|sendToS3|overrideMimeType|that|createCORSRequest|XDomainRequest|haystack|needle|mimeString|cloneAttributes|isOverflowing|clientWidth|measureScrollbar|scrollbar|measure|tools|jQuery|animated|_callback|complete|effects|use|strict|No|such|VERSION|ltr|tbody|thead|tfoot|Format|Image|File|Link|Bold|Italic|Strikethrough|Underline|Lists|Open|Unlink|Close|Save|Text|Title|Normal|Quote|Code|Name|Unordered|Ordered|Outdent|Indent|Line|Drop|here|Caption|Bullets|Numbers|Rich|output|option|map|math|fieldset|legend|hgroup|nav|details|menu|summary|jpeg|youtu|jpe|RIGHT|LEFT|Object|getOwnPropertyNames|collapsedEnd|ajax|post|done|autosaveError|application|content|insertAfter|labelledby|presentation|TEXTAREA|40px|enableObjectResizing|enableInlineTableEditing|AutoUrlDetect|javascript|void|getButtons|getButtonsKeys|addFirst|addAfter|addBefore|setIcon|setInactive|disableAll|enableAll|setEndBefore|reg|font|applet|u2122|trade|u00a9|copy|u2026|hellip|u2014|mdash|u2010|dash|Mso|WordDocument|replaceNlToBr|colspan|rowspan|removeSpaces|syncBefore|_data||removeData|firefox|msie|isNaN|Trident|rv|getDropdown|dropdownShow|dropdownShown|dragenter||MutationObserver|forEach|subtree|childList|characterData|characterDataOldValue|300|stopDetect|startDetect|fileUploadError|imageUploadError|dragstart|705|formatBreak|through|createDocumentFragment|empty|offsetNode|duplicate|setEndPoint|EndToEnd|nodeToCaretPositionFromPoint|editter|enter|insertDblBreakLine|insertedLine|deletedLink|600|php|tel|location|addBack|281|frameborder|allowfullscreen|embed|player|grep|parentsUntil|group|side|desc|addTemplate|getModal|modalOpened|focusin|email|handle|cursor|move|dialog|times|overlay|bodyOveflow|modalClosed|isCurrent|toggleActive|ceil|pageY|createTreeWalker|NodeFilter|SHOW_TEXT|Infinity|outerHTML|xparagraphmarkerzxparagraphmarkerz|saveBodyScroll|9999px|clipboardData|tiff|getAsFile|FileReader|readAsDataURL|filelink|Control|anchorNode|previousSibling|commonAncestorContainer|unshift|hasChildNodes|extractContents|markerHtml|backspace|pause|capslock|esc|pageup|pagedown|home|up|down|101|102|103|104|106|107|109|110|111|112|113|114|115|116|117|118|119|120|121|f10|122|f11|123|f12|144|numlock|145|173|186|187|188|189|190|191|192|220|222|fromCharCode|Key|changes|external|1000|250|isOpened|uploadStart|POST|Requested|With|err|clearImageFields|addImageFields|removeImageFields|clearFileFields|addFileFields|removeFileFields|GET|plain|charset|user|defined|withCredentials|PUT|onerror|onprogress|Content|Type|amz|acl|read|u200D|uFEFF|isElement|instanceof|HTMLElement|ownerDocument|strpos|base64|atob|unescape|Uint8Array|charCodeAt|Blob|inInlines|documentElement|getBoundingClientRect|abs|offsetWidth||removeChild||serializeArray|isPad|moz||AnimationEnd|iteration|count|one|MS|zoomOut|slideOutUp|slideOutRight|slideOutLeft".split("|"),0,{}));
"use strict";ApplicationConfiguration.registerModule("users",["core"]);
"use strict";angular.module("admins").config(["$compileProvider",function($compileProvider){$compileProvider.debugInfoEnabled(!1)}]).run(["$rootScope","$state","Authentication",function($rootScope,$state,Authentication){var $currentUser=Authentication.user;$rootScope.$on("$stateChangeStart",function(e,to){if(angular.isFunction(to.data)){var result=to.data($currentUser);result&&result.to&&(e.preventDefault(),$state.go(result.to,result.params,{notify:!1}))}})}]);
"use strict";angular.module("admins").config(["$stateProvider",function($stateProvider){$stateProvider.state("admin",{"abstract":!0,url:"/admin",template:"<ui-view>",data:{authenticate:!0,roles:["admin"]},authPermissions:{roles:["admin","superUser"]}}).state("admin.dashboard",{url:"/dashboard",templateUrl:"modules/admins/client/views/admins.client.view.html",data:{authenticate:!0,data:{roles:["admin","superUser"]}}}).state("admin.adminProjectsQueue",{url:"/projects-queue",templateUrl:"modules/admins/client/views/projects/admin-projects-list.client.view.html"}).state("admin.adminEditProject",{url:"/edit-project/:projectId",templateUrl:"modules/admins/client/views/projects/admin-view-project.client.view.html"}).state("admin.adminListMessages",{url:"/messages",templateUrl:"modules/admins/client/views/messages/admin-list-messages.client.view.html"}).state("admin.adminViewMessage",{url:"/messages/:contactId",templateUrl:"modules/admins/client/views/messages/admin-view-message.client.view.html"}).state("admin.adminListUsers",{url:"/list-users",templateUrl:"modules/admins/client/views/users/admin-list-users.client.view.html"}).state("admin.adminViewUser",{url:"/users/:userId",templateUrl:"modules/admins/client/views/users/admin-view-user.client.view.html"}).state("adminEditUser",{url:"/users/:userId/edit",templateUrl:"modules/admins/client/views/users/admin-edit-user.client.view.html"}).state("admin.createUser",{url:"/create-user",templateUrl:"modules/users/client/views/create-user.client.view.html"})}]);
"use strict";angular.module("admins").controller("AdminsController",["$scope","d3","$stateParams","$location","Authentication","Projects","UserData","Contacts","AdminAuthService",function($scope,d3,$stateParams,$location,Authentication,Projects,UserData,Contacts,AdminAuthService){$scope.authentication=Authentication,$scope.isAdmin=AdminAuthService,$scope.colors=[{name:"Red",hex:"#F21B1B"},{name:"Blue",hex:"#1B66F2"},{name:"Green",hex:"#07BA16"}],$scope.color="";$scope.admin||$location.path("/"),$scope.remove=function(project){if(project){project.$remove();for(var i in $scope.projects)$scope.projects[i]===project&&$scope.projects.splice(i,1)}else $scope.project.$remove(function(){$location.path("projects")})},$scope.update=function(){var project=$scope.project;project.$update(function(){$location.path("projects/"+project._id)},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.findProjects=function(){$scope.projects=Projects.query()},$scope.findOneProject=function(){$scope.project=Projects.get({projectId:$stateParams.projectId})},$scope.updateUserProfile=function(){$scope.success=$scope.error=null;var user=new UserData($scope.user);user.$update(function(response){$scope.success=!0,Authentication.user=response},function(response){$scope.error=response.data.message})},$scope.hasConnectedAdditionalSocialAccounts=function(provider){for(var i in $scope.user.additionalProvidersData)return!0;return!1},$scope.isConnectedSocialAccount=function(provider){return $scope.user.provider===provider||$scope.user.additionalProvidersData&&$scope.user.additionalProvidersData[provider]}}]);
"use strict";angular.module("admins").factory("Admins",["$resource",function($resource){return $resource("api/v1/admins/:adminId",{adminId:"@_id"},{update:{method:"PUT"}})}]);
"use strict";angular.module("admins").directive("projectAdminFeatures",function(){return{restrict:"EA",templateUrl:"/modules/admins/client/directives/views/project-admin-features.html",link:function($scope){"published"===$scope.project.status}}});
"use strict";angular.module("admins").directive("projectEditor",function(){return{restrict:"E",templateUrl:"/modules/admins/client/directives/views/project-editor.html"}});
"use strict";angular.module("admins").directive("projectMainTab",function(){return{restrict:"E",templateUrl:"/modules/admins/client/directives/views/project-main-tab.html"}});
"use strict";angular.module("admins").directive("projectMultimedia",function(){return{restrict:"E",templateUrl:"/modules/admins/client/directives/views/project-multimedia.html"}});
"use strict";angular.module("admins").directive("projectViewForm",function(){return{restrict:"E",templateUrl:"/modules/admins/client/directives/views/project-view-form.html"}});
"use strict";angular.module("admins").directive("userViewForm",function(){return{restrict:"E",templateUrl:"/modules/admins/client/directives/views/user-view-form.html"}});
"use strict";angular.module("admins").directive("userViewFormWrapper",function(){return{restrict:"E",templateUrl:"/modules/admins/client/directives/views/user-view-form-wrapper.html",controller:["$scope","UserData","$state",function($scope,UserData,$state){$scope.userToEdit={},$scope.userToEditFn=function(){"admin.adminEditProject"===$state.current.name?$scope.userToEdit=UserData.get({userId:$scope.project.user._id}):$scope.userToEdit=UserData.get({userId:$state.params.userId})}()}]}});
"use strict";angular.module("contacts").config(["$compileProvider",function($compileProvider){$compileProvider.debugInfoEnabled(!1)}]);
"use strict";angular.module("contacts").config(["$stateProvider",function($stateProvider){$stateProvider.state("createContact",{url:"/contact-us",templateUrl:"modules/contacts/client/views/contact-us.client.view.html"}).state("editContact",{url:"/contacts/:contactId/edit",templateUrl:"modules/contacts/client/views/edit-contact.client.view.html"}).state("aboutMappingSlc",{url:"/about-mapping-slc",templateUrl:"modules/contacts/client/views/about-mapping-slc.client.view.html"}).state("aboutUs",{url:"/about-us",templateUrl:"modules/contacts/client/views/about-us.client.view.html"})}]);
"use strict";angular.module("contacts").controller("ContactsController",["$scope","$stateParams","$location","Authentication","Contacts","$http","AdminAuthService","UtilsService","notify",function($scope,$stateParams,$location,Authentication,Contacts,$http,AdminAuthService,UtilsService,notify){$scope.authentication=Authentication,$scope.isAdmin=AdminAuthService,$scope.viewMessage=function(contactId){$location.path("admin/messages/"+contactId)},UtilsService.cssLayout(),$scope.toggleSort=!0,$scope.oneAtATime=!0,$scope.create=function(){var contact=new Contacts({firstName:this.firstName,lastName:this.lastName,email:this.email,zip:this.zip,newsletter:this.newsletter,message:this.message});contact.$save(function(response){$location.path("/"),$scope.firstName="",$scope.lastName="",$scope.email="",$scope.zip="",$scope.newsletter="",$scope.message="",console.log("response:\n",response),notify(response.$resolved?{message:"Thanks for the message!",classes:"ng-notify-contact-success"}:{message:"Something went wrong, and we didn't receive your message We apologize.",classes:"ng-notify-contact-failure"})},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.remove=function(contact){if(contact){contact.$remove();for(var i in $scope.contacts)$scope.contacts[i]===contact&&$scope.contacts.splice(i,1)}else $scope.contact.$remove(function(){$location.path("contacts")})},$scope.update=function(){var contact=$scope.contact;contact.$update(function(){$location.path("contacts/"+contact._id)},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.find=function(){$scope.contacts=Contacts.query()},$scope.findOne=function(){$scope.contact=Contacts.get({contactId:$stateParams.contactId})},$http.get("/contacts").success(function(messageData){$scope.messageData=messageData,$scope.sentToday=function(){console.log("Date.now(messageData.created): ",Date.now(messageData.created));var today=Date.now(messageData.created);return today}}).error(function(data,status){})}]);
"use strict";angular.module("contacts").factory("Contacts",["$resource",function($resource){return $resource("api/v1/contacts/:contactId",{contactId:"@_id"},{update:{method:"PUT"}})}]);
"use strict";angular.module("core").config(["$compileProvider",function($compileProvider){$compileProvider.debugInfoEnabled(!1)}]);
"use strict";angular.module("core").config(["$stateProvider","$urlRouterProvider",function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise(function($injector,$location){$injector.get("$state").transitionTo("not-found",null,{location:!1})}),$stateProvider.state("home",{url:"/",templateUrl:"modules/core/client/views/home.client.view.html"}).state("not-found",{url:"/not-found",templateUrl:"modules/core/client/views/404.client.view.html",data:{ignoreState:!0}}).state("bad-request",{url:"/bad-request",templateUrl:"modules/core/client/views/400.client.view.html",data:{ignoreState:!0}}).state("forbidden",{url:"/forbidden",templateUrl:"modules/core/client/views/403.client.view.html",data:{ignoreState:!0}})}]);
"use strict";angular.module("core").controller("RandomMapController",["$scope","RandomMapService",function($scope,RandomMapService){$scope.staticMap=RandomMapService.getRandomMap(),$scope.myFunction=function(){console.log("error loading that map!")}}]);
"use strict";angular.module("core").controller("HomeController",["$scope","Authentication","ApiKeys","$http","MarkerDataService","mapService","AdminAuthService","$rootScope","$location","$sce","UtilsService","MenuService",function($scope,Authentication,ApiKeys,$http,MarkerDataService,mapService,AdminAuthService,$rootScope,$location,$sce,UtilsService,MenuService){$scope.authentication=Authentication,$scope.isAdmin=AdminAuthService,$scope.featuredProjects=[],$scope.featuredProjects=[];var getFeatured=function(){console.log("`getFeatured()`:\n"),$http.get("/api/v1/featured",{cache:!0}).then(function(resolved,rejected){console.log("rejected:\n",rejected),console.log("resolved.data:\n",resolved.data),$scope.featuredProjects=resolved.data})};getFeatured(),UtilsService.cssLayout(),$scope.trustAsHtml=$sce.trustAsHtml,$scope.goToProject=function(id){$location.path("projects/"+id)},$scope.projectMarker=null,$scope.markerData=null,$scope.overlayActive=!0,$scope.sourceTo="",$scope.sourceFrom="",$scope.menuOpen=!1,$scope.shadeMap=!1,$scope.toggleOverlayFunction=function(sourceFrom,sourceTo){console.log("::::::toggleOverlayFunction::::::  sourceFrom\n",sourceFrom,"\nsourceTo:\n",sourceTo,"$scope.overlayActive:\n",$scope.overlayActive),$scope.sourceFrom=sourceFrom,$scope.sourceTo=sourceTo,$scope.overlayActive&&"overlay"===sourceFrom?($scope.overlayActive=!$scope.overlayActive,$scope.shadeMap=!0):$scope.overlayActive&&"menu-closed"===sourceFrom?($scope.overlayActive=!1,$scope.menuOpen=!0,$scope.shadeMap=!0):$scope.overlayActive||"menu-closed"!==sourceFrom||$scope.menuOpen?$scope.overlayActive||"home"!==sourceFrom||($scope.menuOpen=!1,$scope.overlayActive=!0,$scope.shadeMap=!1,MenuService.setShowAll(!1),MenuService.setShowPart(!1)):($scope.menuOpen=!$scope.menuOpen,$scope.shadeMap=!1,MenuService.setShowAll(!1),MenuService.setShowPart(!1))},$scope.attributionFull=!1,$scope.attributionText='<div style="padding: 0 5px 0 2px"><a href="http://www.mapbox.com/about/maps/" target="_blank">Mapbox</a>(the world\'s best maps) & <a href="http://leafletjs.com/" target="_blank">Leaflet</a>, with map data by <a href="http://openstreetmap.org/copyright">OpenStreetMap©</a> | <a href="http://mapbox.com/map-feedback/" class="mapbox-improve-map">Improve this map</a></div>',$scope.markers=!0,$scope.filters=!0,$scope.censusDataTractLayer=!0,$scope.googlePlacesLayer=!1,ApiKeys.getApiKeys().then(function(resolved,rejected){mapFunction(resolved.data.MAPBOX_KEY,resolved.data.MAPBOX_SECRET)});var mapFunction=function(mapboxKey,mapboxAccessToken){L.mapbox.accessToken=mapboxAccessToken;var map=(document.getElementById("info"),L.mapbox.map("map",null,{infoControl:!1,attributionControl:!1,legendControl:{position:"bottomleft"}}).on("click",function(e){$scope.showAll?(console.log("map click!::::: if ($scope.showAll)  :::: `e`\n",e),MenuService.setShowAll(!1),$scope.showAll=!1):console.log("`$scope.showAll = false` map click!  `e`\n",e)}).setView([40.7630772,-111.8689467],12).addControl(L.control.zoom({position:"topright"}))),grayMap=L.mapbox.tileLayer("poetsrock.b06189bb"),mainMap=L.mapbox.tileLayer("poetsrock.la999il2"),topoMap=L.mapbox.tileLayer("poetsrock.la97f747"),greenMap=L.mapbox.tileLayer("poetsrock.jdgpalp2"),landscape=L.tileLayer("http://{s}.tile.thunderforest.com/landscape/{z}/{x}/{y}.png"),comic=L.mapbox.tileLayer("poetsrock.23d30eb5"),watercolor=L.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"),layers={"Main Map":mainMap,"Topo Map":topoMap,"Green Map":greenMap,Landscape:landscape,"Comically Yours":comic,"Gray Day":grayMap,Watercolor:watercolor};mainMap.addTo(map),L.control.layers(layers).addTo(map);var legend='<div style="padding: 0 5px 0 2px"><a href="http://www.mapbox.com/about/maps/" target="_blank">Mapbox</a>(the world\'s best maps) & <a href="http://leafletjs.com/" target="_blank">Leaflet</a>, with map data by <a href="http://openstreetmap.org/copyright">OpenStreetMap©</a> | <a href="http://mapbox.com/map-feedback/" class="mapbox-improve-map">Improve this map</a></div>';map.getContainer().querySelector("#legend").onclick=function(){return"active"===this.className?(map.legendControl.removeLegend(legend),this.className=""):(map.legendControl.addLegend(legend),this.className="active"),!1},MarkerDataService.getMarkerData().success(function(markerData){$scope.addProjectMarkers(markerData)}).error(function(data,status){alert("Failed to load project markers. Status: "+status)}),$scope.markerArray=[],$scope.addProjectMarkers=function(markerData){$scope.markerData=markerData;var index=0;for(var prop in markerData)$scope.projectMarker=L.mapbox.featureLayer({type:"Feature",geometry:{type:"Point",coordinates:[markerData[prop].lng,markerData[prop].lat]},properties:{"marker-size":"large","marker-color":markerData[prop].markerColor,"marker-symbol":"marker-stroked",projectId:markerData[prop]._id,summary:markerData[prop].storySummary,title:markerData[prop].title,mainImage:markerData[prop].mainImage,category:markerData[prop].category,mapImage:markerData[prop].mapImage,mainImgThumbnail:markerData[prop].mainImgThumbnail,lat:markerData[prop].lat,lng:markerData[prop].lng,published:markerData[prop].createdOn,leafletId:null,arrayIndexId:index}}).on("click",function(e){$scope.$apply(function(){$scope.overlayActive||($scope.shadeMap=!0),$scope.projectProperties=e.target._geojson.properties,$scope.markerId=e.target._leaflet_id,$scope.showSidebar($scope.markerId,$scope.projectProperties)});var popupIndex=0,popupMenuToggle=function(e){$scope.menuOpen||popupIndex===e.target._leaflet_id?($scope.menuOpen||popupIndex!==e.target._leaflet_id)&&($scope.menuOpen&&popupIndex!==e.target._leaflet_id?popupIndex=e.target._leaflet_id:$scope.menuOpen&&popupIndex===e.target._leaflet_id&&(popupIndex=0)):($scope.toggleOverlayFunction("menu-closed"),popupIndex=e.target._leaflet_id)};return map.panTo(e.layer.getLatLng()),popupMenuToggle(e),$scope.projectMarker[prop]}),$scope.projectMarker.addTo(map),$scope.markerArray.push($scope.projectMarker),index++;return $scope.markerArray};new L.Point(30,-16);$scope.toggleGooglePlacesData=function(){$scope.googlePlacesLayer?map.removeLayer(googlePlacesMarkerLayer):map.addLayer(googlePlacesMarkerLayer)},$scope.getProjectMarkers=function(markerData){}}}]);
"use strict";angular.module("core").controller("ModalController",["$scope","$uibModalInstance","items",function($scope,$uibModalInstance,items){$scope.items=items,$scope.selected={item:$scope.items[0],toStateUrl:items.toStateUrl},$scope.selected.item?$scope.ok=function(){$uibModalInstance.close($scope.selected.item)}:$scope.ok=function(){$uibModalInstance.close($scope.selected.toStateUrl)},$scope.cancel=function(){$uibModalInstance.dismiss("user cancelled modal")}}]);
"use strict";angular.module("core").directive("featuredProjects",function(){return{restrict:"EA",templateUrl:"modules/core/client/directives/views/featured-projects.html",controller:["$scope","$http",function($scope,$http){}]}});
"use strict";angular.module("core").directive("footerDirective",["UtilsService",function(UtilsService){return{restrict:"AE",priority:0,templateUrl:"/modules/core/client/directives/views/footer-directive.html",controller:["$scope","$http",function($scope,$http){UtilsService.cssLayout()}]}}]);
"use strict";angular.module("core").directive("googleMenu",["AdminAuthService",function(AdminAuthService){return{restrict:"EA",templateUrl:"modules/core/client/directives/views/google-menu.client.view.html",controller:["$scope",function($scope){$scope.isAdmin=AdminAuthService.user}],link:function($scope){}}}]);
"use strict";angular.module("core").directive("mainPageOverlay",function(){return{restrict:"AE",priority:10,templateUrl:"/modules/core/client/directives/views/main-page-overlay.html"}});
"use strict";angular.module("core").directive("leftMenu",["MenuService",function(MenuService){return{restrict:"EA",templateUrl:"modules/core/client/directives/views/google-left-menu.client.view.html",controller:["$scope","Authentication",function($scope,Authentication){$scope.user=Authentication.user}],replace:!0,link:function(scope,elm,attrs){scope.itemsMenu=MenuService.itemsMenu,scope.showAll=MenuService.open.all,scope.showPart=MenuService.open.part,scope.showNone=MenuService.open.none,scope.$on("$stateChangeStart",function(){MenuService.setShowAll(!1)}),scope.mouseenter=function(){MenuService.setShowPart(!0)},scope.mouseleave=function(){MenuService.setShowPart(!1)},scope.menuHover=function(event){MenuService.setShowAll(!0),scope.toggleOverlayFunction("overlay")},scope.menuToggle=function(event){"triggerMenu"===event.target.id&&(event.stopPropagation(),MenuService.setShowAll(!scope.showAll))},scope.$on("MenuService.update",function(event,open){console.log("MenuService.update... open:\n",open),scope.showAll=open.all,scope.showPart=open.part,scope.showNone=open.none})}}}]);
"use strict";angular.module("core").directive("projectSideBar",function(){return{restrict:"EA",templateUrl:"/modules/core/client/directives/views/projects-sidebar.html",controller:["$scope",function($scope){var currentMarkerId="";$scope.toggleSidebar=!1,$scope.hideSidebar=function(){$scope.toggleSidebar=!1,$scope.shadeMap=!0},$scope.$on("MenuService.update",function(){$scope.hideSidebar()}),$scope.showSidebar=function(markerId,projectData){currentMarkerId!==markerId||currentMarkerId===markerId&&!$scope.toggleSidebar?($scope.project=projectData,$scope.toggleSidebar=!0,currentMarkerId=markerId):$scope.toggleSidebar=!1}}]}});
"use strict";angular.module("core").directive("secondaryMenuDirective",function(){return{restrict:"E",templateUrl:"/modules/core/client/directives/views/secondary-menu-directive.html",controller:["Authentication","$scope",function(Authentication,$scope){$scope.user=Authentication.user,$scope.toggleSecondMenu=!1}]}});
"use strict";angular.module("core").directive("showErrors",["$timeout","$interpolate",function($timeout,$interpolate){var linkFn=function(scope,el,attrs,formCtrl){var inputEl,inputName,inputNgEl,options,showSuccess,toggleClasses,initCheck=!1,showValidationMessages=!1;if(options=scope.$eval(attrs.showErrors)||{},showSuccess=options.showSuccess||!1,inputEl=el[0].querySelector(".form-control[name]")||el[0].querySelector("[name]"),inputNgEl=angular.element(inputEl),inputName=$interpolate(inputNgEl.attr("name")||"")(scope),!inputName)throw"show-errors element has no child input elements with a 'name' attribute class";var reset=function(){return $timeout(function(){el.removeClass("has-error"),el.removeClass("has-success"),showValidationMessages=!1},0,!1)};scope.$watch(function(){return formCtrl[inputName]&&formCtrl[inputName].$invalid},function(invalid){return toggleClasses(invalid)}),scope.$on("show-errors-check-validity",function(event,name){return angular.isUndefined(name)||formCtrl.$name===name?(initCheck=!0,showValidationMessages=!0,toggleClasses(formCtrl[inputName].$invalid)):void 0}),scope.$on("show-errors-reset",function(event,name){return angular.isUndefined(name)||formCtrl.$name===name?reset():void 0}),toggleClasses=function(invalid){return el.toggleClass("has-error",showValidationMessages&&invalid),showSuccess?el.toggleClass("has-success",showValidationMessages&&!invalid):void 0}};return{restrict:"A",require:"^form",compile:function(elem,attrs){if(-1===attrs.showErrors.indexOf("skipFormGroupCheck")&&!elem.hasClass("form-group")&&!elem.hasClass("input-group"))throw"show-errors element does not have the 'form-group' or 'input-group' class";return linkFn}}}]);
"use strict";angular.module("core").directive("signInDirective",function(){return{restrict:"EA",templateUrl:"/modules/core/client/directives/views/sign-in-directive.html",controller:["$scope","$http","Authentication",function($scope,$http,Authentication){$scope.user=Authentication.user,""!==$scope.user&&("default.png"===Authentication.user.profileImageFileName||""===Authentication.user.profileImageFileName?$scope.user.profileImage="modules/users/client/img/profile/default.png":""!==Authentication.user.profileImageFileName&&($scope.user.profileImage="modules/users/client/img/profile/uploads/uploaded-profile-image.jpg"))}]}});
"use strict";angular.module("core").directive("submitProjectDirective",function(){return{restrict:"E",templateUrl:"/modules/core/client/directives/views/submit-project-directive.html"}});
"use strict";angular.module("core").service("MenuService",["$rootScope",function($rootScope){this.open={part:!1,all:!1,none:!1,chatSideClosed:!1},this.setShowPart=function(val){this.open.part=val,$rootScope.$broadcast("MenuService.update",this.open)},this.setShowAll=function(val){console.log("this.setShowAll\nval\n",val,"\n\n"),this.open.all=val,val&&(this.open.part=!1,this.open.none=!1),$rootScope.$broadcast("MenuService.update",this.open)},this.setShowNone=function(val){console.log("setShowNone\nval\n",val,"\n\n"),this.open.none=val,val&&(this.open.all=!1),$rootScope.$broadcast("MenuService.update",this.open)}}]);
"use strict";angular.module("core").service("ApiKeys",["$http",function($http){this.getApiKeys=function(){return $http.get("/api/v1/keys")},this.getTractData=function(){return $http.get("api/v1/tractData")}}]);
"use strict";angular.module("core").factory("Authentication",[function(){var _this=this;return _this._data={user:window.user},_this._data}]);
"use strict";angular.module("core").service("CensusDataService",["$http","ApiKeys",function($http,ApiKeys){var censusYear=[2e3,2010,2011,2012,2013,2014],population="";this.callCensusApi=function(){ApiKeys.getApiKeys().success(function(keys){censusData(keys.CENSUS_KEY)}).error(function(data,status){alert("Failed to load Mapbox API key. Status: "+status)}),censusData=function(censusKey){return $http.get("http://api.census.gov/data/"+censusYear[1]+"/sf1?get="+population+"&for=tract:*&in=state:49+county:035&key="+censusKey)}}}]);
"use strict";angular.module("core").factory("ErrorHandleService",["$httpProvider",function($httpProvider){$httpProvider.interceptors.push(["$q",function($q){return{responseError:function(rejection){switch(console.log(rejection),rejection.status){case 400:return"400";case 404:return"404"}return $q.reject(rejection)},response:function(response){return console.log(response),response}}}])}]);
"use strict";angular.module("core").service("RandomMapService",[function(){var staticMap=null,maps={mapbox:{originalMap:"poetsrock.j5o1g9on",grayMap:"poetsrock.b06189bb",mainMap:"poetsrock.la999il2",topoMap:"poetsrock.la97f747",greenMap:"poetsrock.jdgpalp2",comic:"poetsrock.23d30eb5",fancyYouMap:"poetsrock.m6b73kk7",pencilMeInMap:"poetsrock.m6b7f6mj"}},url={mapbox:"http://api.tiles.mapbox.com/v4"},randomMap=[["mapbox",maps.mapbox.originalMap],["mapbox",maps.mapbox.grayMap],["mapbox",maps.mapbox.mainMap],["mapbox",maps.mapbox.topoMap],["mapbox",maps.mapbox.greenMap],["mapbox",maps.mapbox.comic],["mapbox",maps.mapbox.fancyYouMap],["mapbox",maps.mapbox.pencilMeInMap]],getRandomArbitrary=function(min,max){return Math.random()*(max-min)+min},randomLat=function(){var randomLngInt=Math.floor(getRandomArbitrary(111,113));if(111===randomLngInt)return"-111."+Math.floor(getRandomArbitrary(7840,9999));var randomDecimal=Math.floor(getRandomArbitrary(100,600));return"-112.0"+randomDecimal},randomLng=function(){return"40."+Math.floor(getRandomArbitrary(0,9999))},randomZoom=function(){return Math.floor(getRandomArbitrary(9,16))};this.getRandomMap=function(){var randomNum=Math.floor(getRandomArbitrary(0,7)),mapVendor=randomMap[randomNum][0],randomMapId=randomMap[randomNum][1];return"mapbox"===mapVendor?staticMap={mapUrl:url.mapbox+"/"+randomMapId+"/"+randomLat()+","+randomLng()+","+randomZoom()+"/1280x720.png32?access_token=pk.eyJ1IjoicG9ldHNyb2NrIiwiYSI6Imc1b245cjAifQ.vwb579x58Ma-CcnfQNamiw"}:void console.log("Error!\nrandomNum: ",randomNum,"\nmapVendor",mapVendor,"\nrandomMapId: ",randomMapId)}}]);
"use strict";angular.module("core").factory("googlePlacesService",["$http",function($http){}]);
"use strict";angular.module("core").service("mapService",[function($scope){this.featuredProjects=function(markerData){var featureProjectsArray=[];for(var prop in markerData){var i=0;if(2>i&&markerData[prop].featured){var featuredProject={thumb:markerData[prop].thumbnail,projectId:markerData[prop]._id,shortTitle:markerData[prop].shortTitle};featureProjectsArray.push(featuredProject)}i++}}}]);
"use strict";angular.module("core").service("MarkerDataService",["$http",function($http){this.getMarkerData=function(){return $http.get("/api/v1/markerData").success(function(projects){}).error(function(error){console.log("marker data error: \n",error)})}}]);
"use strict";angular.module("core").service("Socket",["Authentication","$state","$timeout",function(Authentication,$state,$timeout){this.connect=function(){Authentication.user&&(this.socket=io())},this.connect(),this.on=function(eventName,callback){this.socket&&this.socket.on(eventName,function(data){$timeout(function(){callback(data)})})},this.emit=function(eventName,data){this.socket&&this.socket.emit(eventName,data)},this.removeListener=function(eventName){this.socket&&this.socket.removeListener(eventName)}}]);
"use strict";angular.module("core").factory("tractDataService",["$scope","ApiKeys",function($scope,ApiKeys){var dataBoxStaticPopup=null,censusTractData=null;ApiKeys.getTractData().success(function(tractData){tractDataLayer(tractData)}).error(function(tractData){alert("Failed to load tractData. Status: "+status)});var tractDataLayer=function(tractData){censusTractData=L.geoJson(tractData,{style:style,onEachFeature:function(feature,layer){if(feature.properties){var popupString='<div class="popup">';for(var k in feature.properties){var v=feature.properties[k];popupString+=k+": "+v+"<br />"}popupString+="</div>",layer.bindPopup(popupString)}layer instanceof L.Point||(layer.on("mouseover",function(){layer.setStyle(hoverStyle)}),layer.on("mouseout",function(){layer.setStyle(style)}))}})};$scope.dataBoxStaticPopupFn=function(dataBoxStaticPopup){function empty(){info.innerHTML="<div><strong>Click a marker</strong></div>"}dataBoxStaticPopup.on("mouseover",function(e){e.layer.closePopup();var feature=e.layer.feature,content="<div><strong>"+feature.properties.title+"</strong><p>"+feature.properties.description+"</p></div>";info.innerHTML=content}),map.on("move",empty),empty()},$scope.toggleCensusData=function(){$scope.censusDataTractLayer?(map.addLayer(censusTractData),map.addLayer(dataBoxStaticPopup)):(map.removeLayer(censusTractData),map.removeLayer(dataBoxStaticPopup))}}]);
"use strict";angular.module("core").factory("_",[function(){return window._}]);
"use strict";angular.module("core").service("UtilsService",["$http","$window","$filter","AdminUpdateUser",function($http,$window,$filter,AdminUpdateUser){this.cssLayout=function(){function onInputFocus(ev){classie.add(ev.target.parentNode,"input-filled")}function onInputBlur(ev){""===ev.target.value.trim()&&classie.remove(ev.target.parentNode,"input-filled")}[].slice.call(document.querySelectorAll("input.input_field")).forEach(function(inputEl){""!==inputEl.value.trim()&&classie.add(inputEl.parentNode,"input-filled"),inputEl.addEventListener("focus",onInputFocus),inputEl.addEventListener("blur",onInputBlur)})},this.pagination=function(){AdminUpdateUser.query(function(data){$scope.users=data,$scope.buildPager()}),$scope.buildPager=function(){$scope.pagedItems=[],$scope.itemsPerPage=15,$scope.currentPage=1,$scope.figureOutItemsToDisplay()},$scope.figureOutItemsToDisplay=function(){$scope.filteredItems=$filter("filter")($scope.users,{$:$scope.search}),$scope.filterLength=$scope.filteredItems.length;var begin=($scope.currentPage-1)*$scope.itemsPerPage,end=begin+$scope.itemsPerPage;$scope.pagedItems=$scope.filteredItems.slice(begin,end)},$scope.pageChanged=function(){$scope.figureOutItemsToDisplay()}}}]);
"use strict";angular.module("projects").config(["$compileProvider",function($compileProvider){$compileProvider.debugInfoEnabled(!1)}]);
"use strict";angular.module("projects").config(["$stateProvider",function($stateProvider){$stateProvider.state("listProjects",{url:"/projects",templateUrl:"modules/projects/client/views/list-projects.client.view.html"}).state("createProject",{url:"/projects/create",templateUrl:"modules/projects/client/views/create-project.client.view.html",loginRequired:!0}).state("viewProject",{url:"/projects/:projectId",templateUrl:"modules/projects/client/views/view-project.client.view.html"}).state("viewProjectPreview",{url:"/projects/:projectId/preview",templateUrl:"modules/projects/client/views/view-project.client.view.html"}).state("editProject",{url:"/projects/:projectId/edit",templateUrl:"modules/projects/client/views/edit-project.client.view.html",data:{authenticate:!0,roles:["contributor","admin","superUser"]}}).state("confirmCreateProject",{url:"/projects/:projectId/status",templateUrl:"modules/projects/client/views/project-for-submission.client.view.html"})}]);
"use strict";angular.module("projects").controller("ProjectsUploadController",["$scope","$timeout","$window","Authentication","Upload","$http",function($scope,$timeout,$window,Authentication,Upload,$http){$scope.user=Authentication.user,$scope.imageURL=$scope.user.profileImageURL,$scope.uploading=!1,$scope.onFileSelect=function(files){if(files.length>0){$scope.uploading=!0;var filename=files[0].name,type=files[0].type,query={filename:filename,type:type,user:$scope.user,project:$scope.project},configObj={cache:!0};$http.post("api/v1/s3/upload/project",query,configObj).success(function(result){console.log("result v1\n",result),Upload.upload({url:result.url,transformRequest:function(data,headersGetter){var headers=headersGetter();return delete headers.Authorization,console.log("data v1\n",data),data},fields:result.fields,method:"POST",file:files[0]}).progress(function(evt){console.log("progress: "+parseInt(100*evt.loaded/evt.total))}).success(function(data,status,headers,config){$scope.uploading=!1,console.log("file "+config.file.name+"is uploaded successfully. Response: "+data),data&&data.s3Url&&(console.log("data v2\n",data),$scope.user.profileImageURL=data.s3Url,$scope.imageURL=data.s3Url),console.log("$scope.imageURL:\n",$scope.imageURL)}).error(function(){}),result&&result.s3Url&&(console.log("result v2\n",result),$scope.user.profileImageURL=result.s3Url,$scope.imageURL=result.s3Url)}).error(function(data,status,headers,config){$scope.uploading=!1})}}}]);
"use strict";angular.module("projects").controller("ProjectsController",["$scope","$stateParams","$location","Authentication","Projects","$http","$sce","ApiKeys","GeoCodeApi","$rootScope","AdminAuthService","User","AdminUpdateUser","$state","UtilsService","$uibModal","$window","$log","notify","$document","publishedProjectsService","userFavoritesService","UserData",function($scope,$stateParams,$location,Authentication,Projects,$http,$sce,ApiKeys,GeoCodeApi,$rootScope,AdminAuthService,User,AdminUpdateUser,$state,UtilsService,$uibModal,$window,$log,notify,$document,publishedProjectsService,userFavoritesService,UserData){$scope.user=Authentication.user,$scope.isAdmin=AdminAuthService,$scope.logo="../../../modules/core/img/brand/mapping_150w.png";var width="800",height="250",markerUrl="url-http%3A%2F%2Fwww.mappingslc.org%2Fimages%2Fsite_img%2Flogo_marker_150px.png";$scope.mapImage="",$rootScope.signInBeforeProject=!1,$scope.updateToContrib=null,$scope.isPublished=!1,$scope.userToEdit={},$scope.images=[],$scope.override=!1,$scope.isFavorite=!1,$scope.trustAsHtml=$sce.trustAsHtml,$scope.project={},$scope.init=function(){$scope.publishedProjectsFn()},$scope.initSubmissionStatus=function(){$scope.findOne()},UtilsService.cssLayout(),$scope.showUpload=!1,$scope.showSubmit=!1,$scope.showUploadFunction=function(){""!==project.street&&($scope.showUpload=!0),$scope.showUpload&&""!==this.project.story&&($scope.showSubmit=!0)},$scope.projectStatusChanged=function(){"published"===$scope.project.status?$scope.publishProject():$scope.update(),$scope.toggleEdit=!1},$scope.confirmPublishModal=function(){$scope.animationsEnabled=!0,$uibModal.open({animation:$scope.animationsEnabled,templateUrl:"/modules/projects/client/directives/views/project-warning-modal.html",controller:"ModalController",size:"lg"})};var publishUser=function(project){console.log("publishUser ::::  project.user._id:: ",project.user._id),AdminUpdateUser.get({userId:project.user._id},function(userData){("admin"!==userData.roles[0]||"superUser"!==userData.roles[0]&&"published"===project.status)&&(userData.roles[0]="contributor"),console.log("userData  :::: ::\n",userData),console.log("publishUser ::::  project._id:: ",project._id),userData.associatedProjects.push(project._id),userData.$update(function(userData,putResponseHeaders){})})};$scope.publishProject=function(){$scope.confirmPublishModal(),$scope.project.publishedDate=new Date,$scope.update(),publishUser($scope.project)};var saveProject=null;$scope.updateLatLng=function(project){console.log("project ctrl",project),$http.get("/api/v1/keys").then(function(keys,revoked){GeoCodeApi.callGeoCodeApi(project,keys,saveProject).success(function(data){var mapboxKey=keys.data.MAPBOX_KEY,mapboxSecret=keys.data.MAPBOX_SECRET;project.lat=data.Response.View[0].Result[0].Location.DisplayPosition.Latitude,project.lng=data.Response.View[0].Result[0].Location.DisplayPosition.Longitude,project.mapImage="http://api.tiles.mapbox.com/v4/"+mapboxKey+"/"+markerUrl+"("+project.lng+","+project.lat+")/"+project.lng+","+project.lat+",15/"+width+"x"+height+".png?access_token="+mapboxSecret,saveProject()}).error(function(data,status){})})},$scope.publishedProjects=[],$scope.publishedProjectsFn=function(){$http.get("/api/v1/projects/published",{cache:!0}).then(function(publishedProjects){$scope.publishedProjects=publishedProjects.data})},$scope.create=function(isValid){if($scope.error=null,!isValid)return $scope.$broadcast("show-errors-check-validity","projectForm"),!1;var project=new Projects({createdBy:Authentication.user._id,street:this.project.street,city:this.project.city,state:"UT",zip:this.project.zip,story:"",title:this.project.title});saveProject=function(){project.$save(function(response){$scope.override=!0,$location.path("projects/"+response._id+"/status"),$scope.street="",$scope.city="",$scope.state="",$scope.zip="",$scope.story="",$scope.title="",publishUser(response)},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.updateLatLng(project),$scope.override=!1},$scope.remove=function(project){if(project){project.$remove();for(var i in $scope.projects)$scope.projects[i]===project&&$scope.projects.splice(i,1)}else $scope.project.$remove(function(){$location.path()==="/admin/edit-project/"+$scope.project._id?$location.path("admin/projects-queue"):$location.path("projects")})},$scope.update=function(isValid,toggleId){console.log("inside func $scope.update():::: logging var `$scope.project`",$scope.project);var project=$scope.project;project.$update(function(response){response.$resolved?($location.path()==="/admin/edit-project/"+project._id?($location.path("/admin/edit-project/"+project._id),$scope.toggleEditFn(0)):($location.path("projects/"+project._id),$scope.toggleEditFn(0)),notify({message:"Project updated successfully",classes:"ng-notify-contact-success"})):notify({message:"Something went wrong, and we didn't receive your message. We apologize.",classes:"ng-notify-contact-failure"})},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.updateFeatured=function(){$scope.toggleEditFn(0),console.log("route:\napi/v1/projects/"+$scope.project._id+"/featured/"+$scope.project.featured),console.log("$scope.project:\n",$scope.project),$http.put("api/v1/projects/"+$scope.project._id+"/featured/"+$scope.project.featured,$scope.project).then(function(resolved){console.log("resolved:\n",resolved)})},$scope.find=function(){$scope.projects=Projects.query()},$scope.findOne=function(){Projects.get({projectId:$stateParams.projectId},function(project){if($scope.project=project,console.log(" ::: $scope.findOne()  :::  var `$scope.project`:",$scope.project),project.vimeoId&&($scope.vimeo={video:$sce.trustAsResourceUrl("http://player.vimeo.com/video/"+project.vimeoId),width:$window.innerWidth/1.75,height:$window.innerHeight/1.75}),project.soundCloudId&&($scope.soundCloud={audio:"https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/"+project.soundCloudId+"&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false&amp;visual=true",width:$window.innerWidth/1.75,height:$window.innerHeight/1.75}),project.imageGallery)for(var i=0;i<project.imageGallery.length;i++)$scope.images.push(project.imageGallery[i]);getUserFavoriteStoriesFn($scope.user.favorites,$scope.project.id)})},$scope.completed=function(){var formField;for(formField in $scope.createProject){if(null===$scope.createProject)return $scope.completed=!1;$scope.completed=!0}},$rootScope.previousState="",$rootScope.currentState="",$rootScope.$on("$stateChangeSuccess",function(ev,to,toParams,from){$rootScope.previousState=from.name,$rootScope.currentState=to.name}),$scope.goBack=function(){"listProjects"===$rootScope.previousState?$state.go($rootScope.previousState):$state.go("admin")},$scope.run=function($rootScope,$state,Authentication){$rootScope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams){toState.authenticate&&!Authentication.isLoggedIn(),event.preventDefault()})},$scope.userLoggedin=function(){"/projects/create"===$location.path()&&$http.get("/api/v1/users/me").success(function(data){null===data&&($rootScope.signInBeforeProject=!0,$location.path("/authentication/signin"))})}(),$scope.$watchCollection("user.favorites",function(newVal,oldVal){$scope.user.favorites&&newVal.length!==oldVal.length&&($scope.user.favorites=newVal)});var getUserFavoriteStoriesFn=function(userFavoriteProjects,projectId){userFavoritesService.getUserFavoriteStories(userFavoriteProjects,projectId,function(err,data){$scope.isFavorite=data})};$scope.toggleFavProjectFn=function(){userFavoritesService.toggleFavProject($scope.isFavorite,$scope.project,function(err,data){$scope.isFavorite=data})},$scope.preventRunning=!0,$scope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams){if($scope.preventRunning&&!$scope.override){var template="";$scope.items=[],"/projects/create"===fromState.url&&"/signin?err"!==toState.url&&(event.preventDefault(),$scope.items.toStateUrl=toState.url,template="/modules/projects/client/directives/views/project-warning-modal.html",$scope.openModal("lg",template))}}),$scope.animationsEnabled=!0,$scope.openModal=function(size,template,backdropClass,windowClass){var modalInstance=$uibModal.open({templateUrl:template,controller:"ModalController",animation:$scope.animationsEnabled,backdrop:"static",backdropClass:backdropClass,windowClass:windowClass,size:size,resolve:{items:function(){return $scope.items}}});modalInstance.result.then(function(selectedItem){return $scope.preventRunning=!1,$location.path(selectedItem)},function(){$log.info("Modal dismissed at: "+new Date)}),$scope.toggleAnimation=function(){$scope.animationsEnabled=!$scope.animationsEnabled}},$scope.toggleEdit=!1,$scope.toggleId=0,$scope.toggleEditFn=function(editNum){console.log("$scope.toggleEditFn  var `editNum`:",editNum),$scope.toggleEdit=!$scope.toggle,$scope.toggleId=editNum},$scope.nlpData=null,$scope.processNlpData=function(){$http.get("api/v1/nlp").success(function(nlpData){console.log(nlpData),$scope.nlpData=nlpData}).error(function(){})},$scope.sorts=[{category:"sortOrder",name:"Date Submitted",value:"createdOn"},{category:"sortOrder",name:"Title",value:"title"},{category:"sortOrder",name:"Author Name",value:"user.lastName"},{category:"sortOrder",name:"Submission Status",value:"status"}],$scope.predicate="title",$scope.reverse=!0,$scope.order=function(predicate){$scope.reverse=$scope.predicate===predicate?!$scope.reverse:!1,$scope.predicate=predicate,console.log("predicate:\n",predicate)}}]);
"use strict";angular.module("projects").directive("projectStatusOverview",function(){return{restrict:"EA",templateUrl:"/modules/projects/client/directives/views/project-status-overview.html"}});
"use strict";angular.module("projects").directive("projectStatusProjectEditor",function(){return{restrict:"EA",templateUrl:"modules/projects/client/directives/views/project-status-project-editor.html"}});
"use strict";angular.module("projects").directive("projectStatusProjectInfo",function(){return{restrict:"EA",templateUrl:"modules/projects/client/directives/views/project-status-project-info.html"}});
"use strict";angular.module("projects").directive("projectStatusUserBio",function(){return{restrict:"EA",templateUrl:"modules/projects/client/directives/views/project-status-user-bio.html"}});
"use strict";angular.module("projects").directive("projectStatusUserInfo",function(){return{restrict:"EA",templateUrl:"modules/projects/client/directives/views/project-status-user-info.html"}});
"use strict";angular.module("projects").directive("projectUploaderDirective",function(){return{restrict:"AE",templateUrl:"/modules/projects/client/directives/views/projectUploader.html",controller:["$scope","$http",function($scope,$http){$scope.uploading=!1,$scope.projectUpload=function(files){if(files.length>0){$scope.uploading=!0;var filename=files[0].name,type=files[0].type,query={filename:filename,type:type,user:$scope.user,project:$scope.project},configObj={cache:!0};$http.post("api/v1/s3/upload/project",query,configObj).success(function(result){console.log("result v1\n",result),Upload.upload({url:result.url,transformRequest:function(data,headersGetter){var headers=headersGetter();return delete headers.Authorization,console.log("data v1\n",data),data},fields:result.fields,method:"POST",file:files[0]}).progress(function(evt){console.log("progress: "+parseInt(100*evt.loaded/evt.total))}).success(function(data,status,headers,config){$scope.uploading=!1,console.log("file "+config.file.name+"is uploaded successfully. Response: "+data),data&&data.s3Url&&(console.log("data v2\n",data),$scope.project.file=data.s3Url),console.log("$scope.imageURL:\n",$scope.imageURL)}).error(function(){}),result&&result.s3Url&&(console.log("result v2\n",result),$scope.user.profileImageURL=result.s3Url,$scope.imageURL=result.s3Url)}).error(function(data,status,headers,config){$scope.uploading=!1})}}}]}});
"use strict";angular.module("projects").directive("staticMap",["$scope",function($scope){return{template:"<div></div>",restrict:"E",link:function(scope,element,attrs){$scope.mapImage="http://api.tiles.mapbox.com/v4/{"+data.mapboxKey+"/"+this.geocode["long"]+","+this.geocode.lat+",10/"+width+"x"+height+".png?access_token="+data.mapboxSecret,element.text("this is the staticMap directive")}}}]);
"use strict";angular.module("projects").service("GeoCodeApi",["$http",function($http){this.callGeoCodeApi=function(project,keys,projectSaveCallback){console.log("keys::::::::\n",keys),console.log("keys.data.::::::::\n",keys.data),console.log("data.HERE_KEY::::::::\n",keys.data.HERE_KEY),console.log("data.HERE_SECRET::::::::\n",keys.data.HERE_SECRET);var hereKey=keys.data.HERE_KEY,hereSecret=keys.data.HERE_SECRET;return project&&project.state&&project.city&&project.zip&&project.street&&hereKey&&hereSecret?$http.get("http://geocoder.cit.api.here.com/6.2/geocode.json?state="+project.state+"&city="+project.city+"&postalcode="+project.zip+"&street="+project.street+"&gen=8&app_id="+hereKey+"&app_code="+hereSecret).success(function(geoData){project.lat=geoData.Response.View[0].Result[0].Location.DisplayPosition.Latitude,project.lng=geoData.Response.View[0].Result[0].Location.DisplayPosition.Longitude}).error(function(data,status){console.log("geocode error:\n",data,"status:\n",status)}):(projectSaveCallback(),void console.log("err, there's an error, yo."))}}]);
"use strict";angular.module("projects").factory("userFavoritesService",["$http","Authentication",function($http,Authentication){var user=Authentication.user,removeItemFromArray=function(item){var updatedFavProjects=user.favorites.indexOf(item);return-1!==updatedFavProjects?user.favorites.splice(updatedFavProjects,1):void 0},addItemToArray=function(addedItem){return user.favorites.push(addedItem)};return{getUserFavoriteStories:function(userFavoriteProjects,projectId,callback){var err,isFavorite;userFavoriteProjects.forEach(function(userFavoriteProject){return userFavoriteProject===projectId?(isFavorite=!0,callback(err,isFavorite)):void 0})},toggleFavProject:function(isFavorite,project,callback){var err;isFavorite=!isFavorite;var updateFavoriteObj={favorite:project.id};return isFavorite?(addItemToArray(project.id),updateFavoriteObj.isFavorite=!0):(updateFavoriteObj.isFavorite=!1,removeItemFromArray(project.id)),$http.put("/api/v1/users/"+user._id,updateFavoriteObj).then(function(resolved,rejected){rejected&&console.log("error removing project: var `rejected`\n:",rejected),console.log("SUCCESS!!: var `resolved`\n:",resolved)}),callback(err,updateFavoriteObj.isFavorite)}}}]);
"use strict";angular.module("projects").factory("Projects",["$resource",function($resource){return $resource("api/v1/projects/:projectId",{projectId:"@_id"},{update:{method:"PUT"}},{create:{method:"POST"}},{read:{method:"GET"}})}]);
"use strict";angular.module("projects").factory("publishedProjectsService",["$resource",function($resource){return $resource("api/v1/projects/published",{read:{method:"GET"}})}]);
"use strict";angular.module("angular-redactor").config(["$stateProvider",function($stateProvider){$stateProvider.state("redactorEditor",{url:"/editor",templateUrl:"modules/redactor/client/views/editor.html"})}]);
"use strict";angular.module("angular-redactor").controller("RedactorController",["$scope","$stateParams","Authentication","$http","AdminAuthService",function($scope,$stateParams,Authentication,$http,AdminAuthService){$scope.authentication=Authentication,$scope.isAdmin=AdminAuthService,$scope.redactorOptions={},$scope.changeContent=function(){$scope.content="<h1>Some bogus content</h1>"},$scope.content="<p>This is my awesome content</p>"}]);
!function(){var redactorOptions={s3:""};angular.module("angular-redactor").constant("redactorOptions",redactorOptions).directive("redactor",["$timeout",function($timeout){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ngModel){scope.redactorLoaded=!1;var editor,updateModel=function(value){$timeout(function(){scope.$apply(function(){ngModel.$setViewValue(value)})})},options={callbacks:{change:updateModel}},additionalOptions=attrs.redactor?scope.$eval(attrs.redactor):{};angular.extend(options,redactorOptions,additionalOptions),$timeout(function(){editor=element.redactor(options),ngModel.$render()}),ngModel.$render=function(){angular.isDefined(editor)&&$timeout(function(){element.redactor("code.set",ngModel.$viewValue||""),scope.redactorLoaded=!0})}}}}])}();
!function($){$.Redactor.prototype.imagemanager=function(){return{langs:{en:{upload:"Upload",choose:"Choose"}},init:function(){this.opts.imageManagerJson&&this.modal.addCallback("image",this.imagemanager.load)},load:function(){var $box=$('<div style="overflow: auto; height: 300px; display: none;" class="redactor-modal-tab" data-title="Choose">');this.modal.getModal().append($box),$.ajax({dataType:"json",cache:!1,url:this.opts.imageManagerJson,success:$.proxy(function(data){$.each(data,$.proxy(function(key,val){var thumbtitle="";"undefined"!=typeof val.title&&(thumbtitle=val.title);var img=$('<img src="'+val.thumb+'"  data-params="'+encodeURI(JSON.stringify(val))+'" style="width: 100px; height: 75px; cursor: pointer;" />');$box.append(img),$(img).click($.proxy(this.imagemanager.insert,this))},this))},this)})},insert:function(e){var $el=$(e.target),json=$.parseJSON(decodeURI($el.attr("data-params")));this.image.insert(json,null)}}}}(jQuery);
!function($){$.Redactor.prototype.video=function(){return{reUrlYoutube:/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,reUrlVimeo:/https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,langs:{en:{video:"Video","video-html-code":"Video Embed Code or Youtube/Vimeo Link"}},getTemplate:function(){return String()+'<div class="modal-section" id="redactor-modal-video-insert"><section><label>'+this.lang.get("video-html-code")+'</label><textarea id="redactor-insert-video-area" style="height: 160px;"></textarea></section><section><button id="redactor-modal-button-action">Insert</button><button id="redactor-modal-button-cancel">Cancel</button></section></div>'},init:function(){var button=this.button.addAfter("image","video",this.lang.get("video"));this.button.addCallback(button,this.video.show)},show:function(){this.modal.addTemplate("video",this.video.getTemplate()),this.modal.load("video",this.lang.get("video"),700),this.modal.getActionButton().text(this.lang.get("insert")).on("click",this.video.insert),this.modal.show(),this.detect.isDesktop()&&setTimeout(function(){$("#redactor-insert-video-area").focus()},1)},insert:function(){var data=$("#redactor-insert-video-area").val();if(!data.match(/<iframe|<video/gi)){data=this.clean.stripTags(data),this.opts.videoContainerClass="undefined"==typeof this.opts.videoContainerClass?"video-container":this.opts.videoContainerClass;var iframeStart='<div class="'+this.opts.videoContainerClass+'"><iframe style="width: 500px; height: 281px;" src="',iframeEnd='" frameborder="0" allowfullscreen></iframe></div>';data.match(this.video.reUrlYoutube)?data=data.replace(this.video.reUrlYoutube,iframeStart+"//www.youtube.com/embed/$1"+iframeEnd):data.match(this.video.reUrlVimeo)&&(data=data.replace(this.video.reUrlVimeo,iframeStart+"//player.vimeo.com/video/$2"+iframeEnd))}this.modal.close(),this.placeholder.hide(),this.buffer.set(),this.air.collapsed(),this.insert.html(data)}}}}(jQuery);
"use strict";angular.module("users").config(["$stateProvider",function($stateProvider){$stateProvider.state("settings",{"abstract":!0,url:"/settings",templateUrl:"modules/users/client/views/settings/settings.client.view.html",data:{authenticate:!0,roles:["user","registered","contributor","admin","superUser"]}}).state("settings.profile",{url:"/profile",templateUrl:"modules/users/client/views/settings/edit-profile.client.view.html"}).state("settings.password",{url:"/password",templateUrl:"modules/users/client/views/settings/change-password.client.view.html"}).state("settings.accounts",{url:"/accounts",templateUrl:"modules/users/client/views/settings/manage-social-accounts.client.view.html"}).state("settings.favorites",{url:"/favorites",templateUrl:"modules/users/client/views/settings/favorites.client.view.html"}).state("settings.submissions",{url:"/submissions",templateUrl:"modules/users/client/views/settings/submissions-list.client.view.html"}).state("settings.submissionsView",{url:"/:projectId/status/",templateUrl:"modules/users/client/views/settings/submissions-view.client.view.html"}).state("settings.picture",{url:"/picture",templateUrl:"modules/users/client/views/settings/change-profile-picture.client.view.html"}).state("authentication",{"abstract":!0,url:"/authentication",templateUrl:"modules/users/client/views/authentication/authentication.client.view.html"}).state("authentication.signup",{url:"/signup",templateUrl:"modules/users/client/views/authentication/signup.client.view.html"}).state("authentication.signin",{url:"/signin?err",templateUrl:"modules/users/client/views/authentication/signin.client.view.html"}).state("password",{"abstract":!0,url:"/password",template:"<ui-view/>"}).state("password.forgot",{url:"/forgot",templateUrl:"modules/users/client/views/password/forgot-password.client.view.html"}).state("password.reset",{"abstract":!0,url:"/reset",template:"<ui-view/>"}).state("password.reset.invalid",{url:"/invalid",templateUrl:"modules/users/client/views/password/reset-password-invalid.client.view.html"}).state("password.reset.success",{url:"/success",templateUrl:"modules/users/client/views/password/reset-password-success.client.view.html"}).state("password.reset.form",{url:"/:token",templateUrl:"modules/users/client/views/password/reset-password.client.view.html"}).state("contributors",{url:"/contributors",templateUrl:"modules/users/client/views/contributors/contributors.client.list.html"}).state("contributor",{url:"/contributors/:userId",templateUrl:"modules/users/client/views/contributors/contributors.client.view.html"})}]);
"use strict";angular.module("users").controller("AuthenticationController",["$scope","$state","$http","$location","$window","Authentication","PasswordValidator","$uibModal","UtilsService",function($scope,$state,$http,$location,$window,Authentication,PasswordValidator,$uibModal,UtilsService){$scope.authentication=Authentication,$scope.popoverMsg=PasswordValidator.getPopoverMsg(),$scope.error=$location.search().err,UtilsService.cssLayout(),$scope.authentication.user&&$location.path("/"),$scope.signup=function(isValid){return $scope.error=null,isValid?$scope.credentials.password!==$scope.credentials.passwordVerify?($scope.$broadcast("show-errors-check-validity","userForm"),!1):($scope.credentials.username=$scope.credentials.email,void $http.post("/api/v1/auth/signup",$scope.credentials).success(function(response){$scope.authentication.user=response,$state.go($state.previous.state.name||"home",$state.previous.params)}).error(function(response){$scope.error=response.message})):($scope.$broadcast("show-errors-check-validity","userForm"),!1)},$scope.signin=function(isValid){return $scope.error=null,isValid?void $http.post("/api/v1/auth/signin",$scope.credentials).success(function(response){$scope.user=$scope.authentication.user=response,$state.go($state.previous.state.name||"home",$state.previous.params)}).error(function(response){$scope.error=response.message}):($scope.$broadcast("show-errors-check-validity","userForm"),!1)},$scope.callOauthProvider=function(url){$state.previous&&$state.previous.href&&(url+="?redirect_to="+encodeURIComponent($state.previous.href)),$window.location.href=url},$scope.goToSignUp=function($state){$state.go("signup")},$scope.modalOpenSignUp=function(){var isSwitched=!1;$uibModal.open({templateUrl:function(){return isSwitched?"modules/users/client/views/authentication/signin.client.view.html":(isSwitched=!1,"modules/users/client/views/authentication/signup.client.view.html")},size:"lg",backdropClass:"sign-in-modal-background",windowClass:"sign-in-modal-background",backdrop:!1,controller:["$scope",function($scope){}]}).then(function(){console.log("Success!!!!!")})}}]);
"use strict";angular.module("users").controller("ContributorController",["$scope","$animate","$location","Authentication","GetContributors","$stateParams","$http","$uibModal","$window","Lightbox","UtilsService","User","Projects",function($scope,$animate,$location,Authentication,GetContributors,$stateParams,$http,$uibModal,$window,Lightbox,UtilsService,User,Projects){$scope.contributors=null,$scope.contributor={},$scope.contributorProjects=[],$scope.contribData={},$scope.images=[],UtilsService.cssLayout(),$scope.openLightboxModal=function(index){Lightbox.openModal($scope.images,index)},$scope.init=function(){getContribData()};var getContribData=function(){GetContributors.contributors().success(function(contributorsData){return getImages(contributorsData),$scope.contributors=contributorsData,$scope.images}).error(function(errorData){console.log("errorData: ",errorData)})},getImages=function(contribData){for(var i=0;i<contribData.length;i++){var tempData={};tempData.url=contribData[i].profileImageURL,tempData.thumbUrl=contribData[i].profileImageThumbURL,tempData.caption=contribData[i].bio,$scope.images.push(tempData)}};$scope.findContributor=function(){User.get({userId:$stateParams.userId},function(userData){getAssociatedProjects(userData),$scope.contributor=userData})};var getAssociatedProjects=function(userObj){for(var i=0;i<userObj.associatedProjects.length;i++)Projects.get({projectId:userObj.associatedProjects[i]},function(projectObj){$scope.contributorProjects.push(projectObj)})};$scope.changeView=function(view){$location.path(view)}}]);
"use strict";angular.module("users").controller("GalleryController",["$scope","$stateParams","$location","Authentication","$http","$uibModal",function($scope,$stateParams,$location,Authentication,$http,$uibModal){var preventRunning=!1;$scope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams){preventRunning||"/projects/create"===fromState.url&&"/projects/:projectId"!==toState.url&&(event.preventDefault(),$uibModal.open({templateUrl:"/modules/projects/directives/views/modal.html",controller:["$scope","$modalInstance",function($scope,$modalInstance){$scope.closeMe=function(){$modalInstance.dismiss(function(reason){console.log(reason)})},$scope.leave=function(){preventRunning=!0,$scope.closeMe(),$location.path(toState)}}],size:"lg"}))})}]);
"use strict";angular.module("users").controller("PasswordController",["$scope","$stateParams","$http","$location","Authentication","PasswordValidator",function($scope,$stateParams,$http,$location,Authentication,PasswordValidator){$scope.authentication=Authentication,$scope.popoverMsg=PasswordValidator.getPopoverMsg(),$scope.authentication.user&&$location.path("/"),$scope.askForPasswordReset=function(isValid){return $scope.success=$scope.error=null,isValid?void $http.post("/api/v1/auth/forgot",$scope.credentials).success(function(response){$scope.credentials=null,$scope.success=response.message}).error(function(response){$scope.credentials=null,$scope.error=response.message}):($scope.$broadcast("show-errors-check-validity","forgotPasswordForm"),!1)},$scope.resetUserPassword=function(isValid){return $scope.success=$scope.error=null,isValid?void $http.post("/api/v1/auth/reset/"+$stateParams.token,$scope.passwordDetails).success(function(response){$scope.passwordDetails=null,Authentication.user=response,$location.path("/password/reset/success")}).error(function(response){$scope.error=response.message}):($scope.$broadcast("show-errors-check-validity","resetPasswordForm"),!1)}}]);
"use strict";angular.module("users").controller("UserController",["$scope","$state","$stateParams","Authentication","UserData","Users","ProfileImageService","Projects","$http","$resource","Newsletter",function($scope,$state,$stateParams,Authentication,UserData,Users,ProfileImageService,Projects,$http,$resource,Newsletter){$scope.user=Authentication.user,$scope.favoriteProjects=$scope.user.favorites;var associatedProjects=$scope.user.associatedProjects,userProjects=[];$scope.update=function(isValid){return isValid?void user.$update(function(){$state.go("admin.user",{userId:user._id})},function(errorResponse){$scope.error=errorResponse.data.message}):($scope.$broadcast("show-errors-check-validity","userForm"),!1)},$scope.remove=function(user){confirm("Are you sure you want to delete this user?")&&(user?(user.$remove(),$scope.users.splice($scope.users.indexOf(user),1)):$scope.user.$remove(function(){$state.go("admin.users")}))},$scope.find=function(){$scope.users=Users.query($scope.query),ProfileImageService.getUploadedProfilePic()},$scope.findOne=function(){$scope.user=UserData.get({userId:$stateParams.userId||$scope.user.userId})},$scope.getFavorites=function(){$http.get("/api/v1/users/"+$scope.user._id+"/favorites",{cache:!0}).then(function(resolved,rejected){$scope.userFavorites=resolved.data})},$scope.$watchCollection("userFavorites",function(newVal,oldVal){$scope.userFavorites&&$scope.userFavorites.length!==$scope.user.favorites.length&&($scope.userFavorites=newVal)}),$scope.removeFavProject=function(projectId){$scope.$on("$stateChangeStart",function(event){event.preventDefault();var removeItemFromArray=function(item){var updatedFavProjects=$scope.user.favorites.indexOf(item);-1!==updatedFavProjects&&$scope.user.favorites.splice(updatedFavProjects,1)};$scope.isFavorite=!1,removeItemFromArray(projectId);var updateFavoriteObj={favorite:projectId,isFavorite:!1};$http.put("/api/v1/users/"+$scope.user._id+"/favorites",updateFavoriteObj).then(function(resolved,rejected){})})},$scope.findCurrentUserSubmissions=function(){$scope.getProjects=function(associatedProjects){return associatedProjects.forEach(function(associatedProject){userProjects.push(Projects.get({projectId:associatedProject}))}),$scope.userProjects=userProjects,userProjects},$scope.getProjects(associatedProjects)},$scope.newsletterSubscription=function(isValid){return $scope.error=null,isValid?void($scope.users=Newsletter.query({email:$scope.subscribe.newsletter})):void $scope.$broadcast("show-errors-check-validity","userForm")}}]);
"use strict";angular.module("users").directive("changeProfilePicture",function(){return{restrict:"EA",templateUrl:"modules/users/client/directives/views/change-profile-picture.html"}});
"use strict";angular.module("users").directive("editProfile",function(){return{restrict:"EA",templateUrl:"modules/users/client/directives/views/edit-profile.html"}});
"use strict";angular.module("users").directive("passwordValidator",["PasswordValidator",function(PasswordValidator){return{require:"ngModel",link:function(scope,element,attrs,ngModel){ngModel.$validators.requirements=function(password){var status=!0;if(password){var result=PasswordValidator.getResult(password),requirementsIdx=0,requirementsMeter=[{color:"danger",progress:"20"},{color:"warning",progress:"40"},{color:"info",progress:"60"},{color:"primary",progress:"80"},{color:"success",progress:"100"}];result.errors.length<requirementsMeter.length&&(requirementsIdx=requirementsMeter.length-result.errors.length-1),scope.requirementsColor=requirementsMeter[requirementsIdx].color,scope.requirementsProgress=requirementsMeter[requirementsIdx].progress,result.errors.length?(scope.popoverMsg=PasswordValidator.getPopoverMsg(),scope.passwordErrors=result.errors,status=!1):(scope.popoverMsg="",scope.passwordErrors=[],status=!0)}return status}}}}]);
"use strict";angular.module("users").directive("passwordVerify",[function(){return{require:"ngModel",scope:{passwordVerify:"="},link:function(scope,element,attrs,ngModel){scope.$watch(function(){var combined;return(scope.passwordVerify||ngModel)&&(combined=scope.passwordVerify+"_"+ngModel),combined},function(value){value&&(ngModel.$validators.passwordVerify=function(password){var origin=scope.passwordVerify;return origin!==password?!1:!0})})}}}]);
"use strict";angular.module("users").directive("userSubmissionsList",function(){return{restrict:"EA",templateUrl:"modules/users/client/directives/views/user-submissions-list.html",controller:["$scope","Projects",function($scope,Projects){$scope.findCurrentUserSubmissions=function(){var associatedProjects=$scope.user.associatedProjects,userProjects=[];$scope.getProjects=function(associatedProjects){return associatedProjects.forEach(function(associatedProject){userProjects.push(Projects.get({projectId:associatedProject}))}),console.log("userProjects:\n",userProjects),userProjects},$scope.userProjects=$scope.user.projects=$scope.getProjects(associatedProjects)}}]}});
"use strict";angular.module("users").directive("userSubmissionsView",function(){return{restrict:"EA",templateUrl:"modules/users/client/directives/views/user-submissions-view.html",controller:["$scope","Projects",function($scope,Projects){$scope.findCurrentUserSubmissions=function(){var associatedProjects=$scope.user.associatedProjects,userProjects=[],getProjects=function(associatedProjects){return associatedProjects.forEach(function(associatedProject){userProjects.push(Projects.get({projectId:associatedProject}))}),userProjects};$scope.userProjects=$scope.user.projects=getProjects(associatedProjects)}}]}});
"use strict";angular.module("users").directive("lowercase",function(){return{require:"ngModel",link:function(scope,element,attrs,modelCtrl){modelCtrl.$parsers.push(function(input){return input?input.toLowerCase():""}),element.css("text-transform","lowercase")}}});
"use strict";angular.module("users").service("GetContributors",["$http",function($http){this.contributors=function(){return $http.get("/api/v1/contributors")}}]);
"use strict";angular.module("users").service("ProfileImageService",["$http","Authentication",function($http,Authentication){this.getUploadedProfilePic=function(data,callback){var user=data.user,configObj={cache:!0};console.log("ProfileImageService\nuser.profileImageFileName: ",user.profileImageFileName,"\n\n"),$http.get("api/v1/users/"+user._id+"/images/uploaded-profile-image.jpg",configObj).then(function successCallback(successCallback){return console.log("\nProfileImageServicesuccessCallback:::::\n",successCallback,"\n\n"),console.log("user:::::\n",user,"\n\n"),callback(successCallback.data.url)},function errorCallback(errorCallback){console.log("ProfileImageService\nprofile photo error",errorCallback,"\n\n"),user.profileImage="modules/users/client/img/profile/default.png"})}}]);
"use strict";angular.module("users").factory("AdminAuthService",["$window","Authentication",function($window,Authentication){if(""!==Authentication.user){var isAdmin={user:$window.user.roles[0]};return isAdmin}return isAdmin={user:"notAdmin"}}]);
"use strict";angular.module("users").factory("Authentication",["$window",function($window){var auth={user:$window.user};return auth}]);
"use strict";angular.module("users").factory("PasswordValidator",["$window",function($window){var owaspPasswordStrengthTest=$window.owaspPasswordStrengthTest;return{getResult:function(password){var result=owaspPasswordStrengthTest.test(password);return result},getPopoverMsg:function(){var popoverMsg="Please enter a passphrase or password with greater than 10 characters, numbers, lowercase, upppercase, and special characters.";return popoverMsg}}}]);
"use strict";angular.module("users").service("SubscribeService",[function($scope,$location,Projects,$stateParams){$scope.update=function(){var project=$scope.project;project.$update(function(){$location.path("projects/"+project._id)},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.find=function(){$scope.projects=Projects.query()},$scope.findOne=function(){$scope.project=Projects.get({projectId:$stateParams.projectId})},$scope.completed=function(){var formField;for(formField in $scope.createProject){if(null===$scope.createProject)return $scope.completed=!1,$scope.completed;$scope.completed=!0}},$scope.create=function(){new Projects({created:this.created,createdBy:this.createdBy,street:this.street,city:this.city,state:this.state,zip:this.zip,story:this.story,title:this.title})}}]);
"use strict";angular.module("users").factory("UserData",["$resource",function($resource){return $resource("/api/v1/users/:userId",{userId:"@_id"},{update:{method:"PUT"}})}]);
"use strict";angular.module("users").factory("Users",["$resource",function($resource){return $resource("/api/v1/users",{},{update:{method:"PUT"}})}]),angular.module("users").factory("User",["$resource","AdminAuthService",function($resource,AdminAuthService){return"admin"===AdminAuthService.user?$resource("api/v1/user/:userId",{userId:"@_id"},{update:{method:"PUT"}},{create:{method:"POST"}},{read:{method:"GET"}}):$resource("api/v1/users/:userId",{userId:"@_id"},{update:{method:"GET"}})}]),angular.module("users").factory("AdminUpdateUser",["$resource","AdminAuthService",function($resource,AdminAuthService){return"admin"===AdminAuthService.user?$resource("api/v1/users/:userId",{userId:"@_id"},{update:{method:"PUT"}}):"error - user is not admin"}]),angular.module("users").factory("Newsletter",["$resource",function($resource){return $resource("api/v1/newsletter",{email:"@email"},{update:{method:"PUT"}},{create:{method:"POST"}},{read:{method:"GET"}})}]);
"use strict";angular.module("core").factory("authInterceptor",["$q","$injector","Authentication",function($q,$injector,Authentication){return{responseError:function(rejection){if(!rejection.config.ignoreAuthModule)switch(rejection.status){case 401:Authentication.user=null,$injector.get("$state").transitionTo("authentication.signin");break;case 403:$injector.get("$state").transitionTo("forbidden")}return $q.reject(rejection)}}}]);
"use strict";angular.module("users").controller("ChangePasswordController",["$scope","$http","Authentication","PasswordValidator",function($scope,$http,Authentication,PasswordValidator){$scope.user=Authentication.user,$scope.popoverMsg=PasswordValidator.getPopoverMsg(),$scope.changeUserPassword=function(isValid){return $scope.success=$scope.error=null,isValid?void $http.post("/api/v1/users/password",$scope.passwordDetails).success(function(response){$scope.$broadcast("show-errors-reset","passwordForm"),$scope.success=!0,$scope.passwordDetails=null}).error(function(response){$scope.error=response.message}):($scope.$broadcast("show-errors-check-validity","passwordForm"),!1)}}]);
"use strict";angular.module("users").controller("ChangeProfilePictureController",["$scope","$timeout","$window","Authentication","Upload","$http","ProfileImageService",function($scope,$timeout,$window,Authentication,Upload,$http,ProfileImageService){$scope.init=function(){console.log("init me baby!"),ProfileImageService.getUploadedProfilePic(Authentication,function(image,err){console.log("image\n",image),console.log("err\n",err),$scope.user.profileImageURL=image})},$scope.user=Authentication.user,$scope.uploading=!1,$scope.imageURL=$scope.user.profileImageURL;var upload=null;$scope.onFileSelect=function(files){if(files.length>0){$scope.uploading=!0;var filename=files[0].name,type=files[0].type,query={user:$scope.user,filename:filename,type:type},configObj={cache:!0};$http.post("api/v1/s3/upload",query,configObj).success(function(result){console.log("result v1\n",result),Upload.upload({url:result.url,transformRequest:function(data,headersGetter){var headers=headersGetter();return delete headers.Authorization,console.log("data v1\n",data),data},fields:result.fields,method:"POST",file:files[0]}).progress(function(evt){console.log("progress: "+parseInt(100*evt.loaded/evt.total))}).success(function(data,status,headers,config){var s3Result=xmlToJSON.parseString(data);$scope.uploading=!1,console.log("s3Result:::\n",s3Result),console.log("status: ",status),console.log("The file "+config.file.name+" is uploaded successfully.\nResponse:\n",s3Result),$scope.user.profileImageURL="https://s3.amazonaws.com"+s3Result.PostResponse[0].Bucket[0]._text+"/"+s3Result.PostResponse[0].Key[0]._text,console.log("https://s3.amazonaws.com"+s3Result.PostResponse[0].Bucket[0]._text+"/"+s3Result.PostResponse[0].Key[0]._text),console.log("$scope.user.profileImageURL final:\n",user.profileImageURL)})}).error(function(data,status,headers,config){$scope.uploading=!1})}},$scope.getImage=function(){console.log("$scope.user\n:",$scope.user,"\n\n"),console.log("$scope.user.profileImageFileName  :",$scope.user.profileImageFileName),$http.get("/api/v1/users/"+$scope.user._id+"/images/"+$scope.user.profileImageFileName,{cache:!0}).then(function(err,image){return err?void console.log("ERROR IN CHANGE-PROFILE CONTROLLER\nerr in getting image:\n",err,"\n\n"):($scope.image=image,void console.log("image from `change-profile-picture.controller.client.controller.js`:\n",image,"\n\n"))})},$scope.onFileSelectNEW=function(files){$scope.uploading=!0,console.log("files:\n",files[0]),console.log("files:\n",files[0].File);var fileType=files[0].type;"image/jpeg"===fileType?fileType=".jpg":"image/png"===fileType&&(fileType=".png");var fileName="",requestType="profile-image";"profile-image"===requestType&&(fileName={origFileName:files[0].name.replace(/\s/g,"_"),fileName:"uploaded-profile-image"+fileType});var query={user:$scope.user,fileName:fileName.fileName,origFileName:fileName.origFileName,type:files[0].type};console.log("fileType:\n",fileType),console.log("query:\n",query),$http.post("api/v1/s3/upload/media/photo",query).then(function(result){console.log("result:\n",result),console.log("result.data:\n",result.data),console.log("result.status:\n",result.status),console.log("result.config:\n",result.config),upload=Upload.upload({url:result.config.url,file:files[0],method:"POST"}).then(function(resp){console.log("resp:\n",resp);var s3Result=xmlToJSON.parseString(resp.data);console.log("file "+resp.config.data.file.name+"is uploaded successfully. Response: "+s3Result),console.log("status: ",resp.status),$scope.uploading=!1,ProfileImageService.getUploadedProfilePic()},function(resp){},function(evt){console.log("evt:\n",evt),console.log("progress: "+parseInt(100*evt.loaded/evt.total)+"% file :"+evt.config.data.file.name)})})},$scope.abort=function(){console.log("abort!!!"),upload.abort(),$scope.uploading=!1},$scope.getProfilePic=function(){}}]);
"use strict";angular.module("users").controller("EditProfileController",["$scope","$http","$location","Users","UserData","$stateParams","Authentication","AdminAuthService","UtilsService",function($scope,$http,$location,Users,UserData,$stateParams,Authentication,AdminAuthService,UtilsService){$scope.user=Authentication.user,$scope.isAdmin=AdminAuthService,UtilsService.cssLayout(),$scope.updateUserProfile=function(isValid){if($scope.success=$scope.error=null,!isValid)return $scope.$broadcast("show-errors-check-validity","userForm"),!1;var user=new Users($scope.user);user.$update(function(response){$scope.$broadcast("show-errors-reset","userForm"),$scope.success=!0,Authentication.user=response},function(response){$scope.error=response.data.message})},$scope.update=function(isValid){if($scope.error=null,!isValid)return $scope.$broadcast("show-errors-check-validity","userAdminForm"),!1;var userToEdit=$scope.userToEdit;userToEdit.$update(function(){$location.path("users/"+user._id)},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.toggleEdit=!1,$scope.toggleId=0,$scope.toggleEditFn=function(editNum){$scope.toggleEdit=!$scope.toggle,$scope.toggleId=editNum},$scope.toggleEditAllFn=function(){$scope.toggleEdit=!$scope.toggle,$scope.toggleId=editNum},$scope.find=function(){$scope.users=Users.query()},$scope.findAll=function(){$scope.users=Users.query($scope.query)},$scope.findOne=function(userIdToEdit){console.log("here, here  :::: var `userIdToEdit`: ",userIdToEdit),$scope.userToEdit=UserData.get({userId:$stateParams.userId}),console.log("$scope.userToEdit:\n",$scope.userToEdit)}}]);
"use strict";angular.module("users").controller("SocialAccountsController",["$scope","$http","Authentication",function($scope,$http,Authentication){$scope.user=Authentication.user,$scope.hasConnectedAdditionalSocialAccounts=function(provider){for(var i in $scope.user.additionalProvidersData)return!0;return!1},$scope.isConnectedSocialAccount=function(provider){return $scope.user.provider===provider||$scope.user.additionalProvidersData&&$scope.user.additionalProvidersData[provider]},$scope.removeUserSocialAccount=function(provider){$scope.success=$scope.error=null,$http["delete"]("/api/v1/users/accounts",{params:{provider:provider}}).success(function(response){$scope.success=!0,$scope.user=Authentication.user=response}).error(function(response){$scope.error=response.message})}}]);
"use strict";angular.module("users").controller("SettingsController",["$scope","Authentication",function($scope,Authentication){$scope.user=Authentication.user}]);
!function(){"use strict";function templates($templateCache){$templateCache.put("modules/admins/views/admins.client.view.html",'<secondary-menu-directive></secondary-menu-directive>\n\n<section class="content background" data-ng-controller="RandomMapController"\n         ng-style="{\'background-image\': \'url(\' + staticMap.mapUrl + \')\', \'background-size\' : \'cover\' }"\n         data-ng-class="{\'page-view-menu-open\': toggleSecondMenu}">\n\n  <section class="container">\n    <a href="/" class="small-main-logo logo-on-page logo-second-page img-responsive"></a>\n\n    <div class="main-content-outer">\n\n      <section data-ng-controller="ProjectsController" data-ng-init="find()" class="main-content-inner">\n        <div class="admin">\n\n          <div class="page-header">\n            <h1>Admin Panel</h1>\n          </div>\n\n\n          <div class="row">\n            <div class="col-md-4">\n              <a href="/admin/list-users" class="widget-box">\n                <i class="fa fa-users"></i><br/>\n                <span>User Menu</span>\n              </a>\n            </div>\n            <div class="col-md-4">\n              <a href="/admin/projects-queue" class="widget-box">\n                <i class="fa fa-th"></i><br/>\n                <span>Projects</span>\n              </a>\n            </div>\n            <div class="col-md-4">\n              <a href="/admin/messages" class="widget-box">\n                <i class="fa fa-envelope"></i><br/>\n                <span>Messages</span>\n              </a>\n            </div>\n          </div>\n\n        </div>\n\n      </section>\n    </div>\n  </section>\n</section>\n'),$templateCache.put("modules/core/views/400.client.view.html",'<h1>Bad Request</h1>\n<div class="alert alert-danger" role="alert">\n  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>\n  <span class="sr-only">Error:</span>\n  You made a bad request\n</div>\n'),$templateCache.put("modules/core/views/403.client.view.html",'<h1>Forbidden</h1>\n<div class="alert alert-danger" role="alert">\n  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>\n  <span class="sr-only">Error:</span>\n  You are not authorized to access this resource\n</div>\n'),$templateCache.put("modules/core/views/404.client.view.html",'<h1>Page Not Found</h1>\n<div class="alert alert-danger" role="alert">\n  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>\n  <span class="sr-only">Error:</span> Page Not Found\n</div>\n'),$templateCache.put("modules/core/views/home.client.view.html",'<section class="container map" data-ng-controller="HomeController" data-ng-init="mapFunction()">\n\n  <!--logo-->\n  <div data-ng-show="!overlayActive && !menuOpen">\n    <div class="small-main-logo logo-on-page img-responsive" data-ng-click="toggleOverlayFunction(\'home\')"></div>\n  </div>\n\n  <main-page-overlay></main-page-overlay>\n  <project-side-bar></project-side-bar>\n\n  <!--call MapBox map-->\n  <div id="map" class="map" data-ng-class="{\'leaflet-tile-gray\': !shadeMap}">\n    <i class="fa fa-info-circle" data-ng-click="attributionFull = !attributionFull"\n       data-ng-class="{\'atrrib-clicked\': attributionFull}"></i>\n    <div class="attrib" data-ng-show="attributionFull" data-ng-bind-html="attributionText"></div>\n\n    <nav class="menu-ui">\n      <a href="#" id="legend">L</a>\n    </nav>\n\n  </div>\n\n  <div id="main-menu" class="main-menu">\n    <google-menu></google-menu>\n  </div>\n  <div id="info" class="info" data-ng-class="{\'info-project-details\': toggleDetails}"></div>\n\n</section>\n'),$templateCache.put("modules/core/views/modal.client.view.html",'<div data-ng-controller="ModalController">\n\n  <signup-modal></signup-modal>\n</div>\n\n'),$templateCache.put("modules/contacts/views/about-mapping-slc.client.view.html",'<secondary-menu-directive></secondary-menu-directive>\n\n<section class="content background" data-ng-controller="RandomMapController"\n         ng-style="{\'background-image\': \'url(\' + staticMap.mapUrl + \')\', \'background-size\' : \'cover\' }"\n         data-ng-class="{\'page-view-menu-open\': toggleSecondMenu}">\n\n  <section class="container">\n    <a href="/" class="small-main-logo logo-on-page logo-second-page img-responsive"></a>\n\n    <div class="main-content-outer">\n      <section data-ng-controller="ContactsController" class="main-content-inner">\n        <div class="about">\n\n          <div class="row">\n            <div class="col-md-12">\n              <div class="contact home">\n\n                <h1>About Mapping Salt Lake City</h1>\n                <!--<div>-->\n                <!--<img src="{{staticMap.mapUrl}}">-->\n                <!--</div>-->\n\n                <!--<p>-->\n                <!--{{toggleSecondMenu}}-->\n                <!--</p>-->\n\n                <p>Because a city and its history are not static but a complex network of connections,\n                  environment and relationships, the purpose of Mapping Salt Lake City is to create a\n                  continually evolving narrative in which community members and scholars, writers and\n                  artists can be in dialogue. And because there are always absences in any record of\n                  place, we rely on readers to fill in these gaps by writing and submitting their own\n                  content. Over the years, as more people add their own stories, Mapping Salt Lake\n                  City will change, expand and grow in the same ways that a city might, to become a more\n                  inclusive reflection of our community\'s diverse, and diverging, perspectives.</p>\n\n                <p>highlight some of the content categories??</p>\n\n                <p>Mapping Salt Lake City is an independent, not-for-profit community project based on <a\n                  href="http://rebeccasolnit.net/atlases/" target="_blank">Rebecca Solnit\'s book <em>Infinite City</em></a>,\n                  which maps many of the communities and histories\n                  that make up San Francisco. Initially the focus of a 2013 nonfiction writing course at\n                  the University of Utah taught by Paisley Rekdal, Mapping Salt Lake City has quickly\n                  become a city-wide collaboration led by professors, writers and scholars from the University\n                  of Utah and Westminster College.</p>\n\n                <p>Interested participants can <a\n                  href="index.php?option=com_k2&amp;view=item&amp;layout=item&amp;id=4&amp;Itemid=279">contribute</a>\n                  in a number of ways: by writing a critical, historical or personal essay or by\n                  producing\n                  a multi-media project about a subject relevant to Salt Lake; by creating a personal\n                  city\n                  map using mapping technologies such as Google Maps or Google Earth; by drawing their\n                  own\n                  Salt Lake City <a\n                    href="index.php?option=com_k2&amp;view=item&amp;layout=item&amp;id=5&amp;Itemid=280">using\n                    the map found on our site</a>; or by writing for our ongoing project, "This Was\n                  Here."</p>\n\n                <p>Our hope is for Mapping Salt Lake City to become an integral site for the community\n                  to\n                  visit, a place for people to enter the complex conversation about place that has\n                  already\n                  begun, and that continues to evolve, around Salt Lake City.</p>\n\n                <p>We welcome you to join our community, either by assisting in the development of the\n                  site,\n                  or by submitting work to the project.</p>\n\n              </div>\n            </div>\n          </div>\n\n          <div class="links">\n            <div class="row">\n\n              <div class="col-md-4">\n                <a href="/about-us">\n                  <div class="tiles">\n                    <div class="row">\n                      <div><img src="#"></div>\n                      <p>About Us</p>\n                    </div>\n                  </div>\n                </a>\n              </div>\n\n              <div class="col-md-4">\n                <a href="#">\n                  <div class="tiles">\n                    <div class="row">\n                      <div><img src="#"></div>\n                      <p>Get Involved</p>\n                    </div>\n                  </div>\n                </a>\n              </div>\n\n              <div class="col-md-4">\n                <a href="#">\n                  <div class="tiles">\n                    <div class="row">\n                      <div><img src="#"></div>\n                      <p>Support the Project</p>\n                    </div>\n                  </div>\n                </a>\n              </div>\n\n            </div>\n          </div>\n\n        </div>\n      </section>\n    </div>\n  </section>\n</section>\n'),$templateCache.put("modules/contacts/views/about-us.client.view.html",'<secondary-menu-directive></secondary-menu-directive>\n\n<section class="content background" data-ng-controller="RandomMapController"\n         ng-style="{\'background-image\': \'url(\' + staticMap.mapUrl + \')\', \'background-size\' : \'cover\' }"\n         data-ng-class="{\'page-view-menu-open\': toggleSecondMenu}">\n\n  <section class="container">\n    <a href="/" class="small-main-logo logo-on-page logo-second-page img-responsive"></a>\n\n    <div class="main-content-outer">\n      <section data-ng-controller="ContactsController" class="main-content-inner">\n        <div class="about">\n\n          <div class="row">\n            <div class="col-md-12">\n              <div class="contact home">\n\n                <h1>About Mapping Salt Lake City</h1>\n\n                <p>Mapping Salt Lake City is an independent, non-profit organization made possible by grants from the <a\n                  href="http://www.utah.edu/"\n                  target="_blank">University\n                  of Utah</a>, <a href="http://www.westminstercollege.edu/" target="_blank">Westminster\n                  College</a>, the Richard Segal Foundation, and from the <a\n                  href="http://www.utahhumanities.org/" target="_blank">Utah Humanities\n                  Council</a>,\n                  which empowers organizations like ours to improve our community through active\n                  engagement in the humanities.</p>\n\n                <p>Mapping Salt Lake City also occasionally provides teaching resources and exercises\n                  involving creative mapping projects for educators in the Salt Lake City region. For\n                  current examples, see our <a\n                    href="index.php?option=com_k2&amp;view=item&amp;layout=item&amp;id=5&amp;Itemid=280">Resources</a>\n                  page. We are also interested in meeting with small groups and classes to lead\n                  creative\n                  mapping workshops. For more info, <a\n                    href="index.php?option=com_k2&amp;view=item&amp;layout=item&amp;id=6&amp;Itemid=281">please\n                    contact us</a>.</p>\n\n                <p>As Mapping Salt Lake City is an arts and educational resource, the photos and images\n                  on\n                  this site are to be used solely for that purpose. Copyright for photo use must be\n                  obtained from the relevant institutions.</p>\n\n                <div>\n                  <h3>The Mapping SLC Crew</h3>\n                  <a href="#">Paisley Rekdal</a> is the creator and Editor for Mapping Salt Lake\n                  City.</br>\n                  <a href="#">Chris Tanseer</a> serves as the Assistant Editor and Lead Web Developer\n                  for\n                  the\n                  project.</br>\n                </div>\n\n                <div>\n                  <h4>Founding Members</h4>\n                  <ul>\n                    <li>Chris Dunsmore</li>\n                    <li>Jeff Nichols</li>\n                    <li>Paisley Rekdal</li>\n                    <li>Chris Tanseer</li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n    </div>\n  </section>\n</section>\n'),$templateCache.put("modules/contacts/views/contact-us.client.view.html",'<secondary-menu-directive></secondary-menu-directive>\n\n<section class="content background" data-ng-controller="RandomMapController"\n         ng-style="{\'background-image\': \'url(\' + staticMap.mapUrl + \')\', \'background-size\' : \'cover\' }"\n         data-ng-class="{\'page-view-menu-open\': toggleSecondMenu}">\n\n  <section class="container">\n    <a href="/" class="small-main-logo logo-on-page logo-second-page img-responsive"></a>\n\n    <div class="main-content-outer">\n      <section data-ng-controller="ContactsController" class="main-content-inner">\n\n        <div class="contact-form">\n\n          <div class="page-header">\n            <h1>Contact Us</h1>\n          </div>\n\n          <div class="row">\n            <div class="col-md-12">\n              <p>Thank you for your interest in Mapping Salt Lake City. If you have a general question or would like to\n                get involved, please contact us with the form below.</p>\n\n              <p>If you would like to submit a project, please review the guidelines and <a href="/project/create">\n                submit your information</a>.</p>\n\n              <div class="row">\n                <div class="col-md-8">\n\n                  <form class="form-horizontal" data-ng-submit="create()" novalidate>\n                    <fieldset class="contact">\n                      <div class="form-group">\n\n                        <section class="content">\n                          <div class="row">\n\n                            <!--<input type="text" data-ng-model="state" id="state" class="form-control" placeholder="State" required>-->\n                            <div class="col-md-6">\n                                    <span class="input input-secondary">\n                                        <input class="input_field input_field-secondary" type="text" id="firstName"\n                                               data-ng-model="firstName" required/>\n                                        <label class="input_label input_label-secondary" for="firstName">\n                                          <span\n                                            class="input_label-content input_label-content-secondary">First Name</span>\n                                        </label>\n                                    </span>\n                            </div>\n\n                            <div class="col-md-6">\n                                    <span class="input input-secondary">\n                                        <input class="input_field input_field-secondary" type="text" id="lastName"\n                                               data-ng-model="lastName">\n                                        <label class="input_label input_label-secondary" for="lastName">\n                                          <span\n                                            class="input_label-content input_label-content-secondary">Last Name</span>\n                                        </label>\n                                    </span>\n                            </div>\n\n                          </div>\n\n                          <div class="row">\n                            <div class="col-md-8">\n                                        <span class="input input-secondary">\n                                            <input class="input_field input_field-secondary" type="email" id="email"\n                                                   data-ng-model="email" required>\n                                            <label class="input_label input_label-secondary" for="email">\n                                              <span\n                                                class="input_label-content input_label-content-secondary">E-Mail</span>\n                                            </label>\n                                        </span>\n                            </div>\n                            <div class="col-md-4">\n                                        <span class="input input-secondary">\n                                            <input class="input_field input_field-secondary" type="text" id="zip"\n                                                   data-ng-model="zip" required>\n                                            <label class="input_label input_label-secondary" for="zip">\n                                              <span\n                                                class="input_label-content input_label-content-secondary">Zip Code</span>\n                                            </label>\n                                        </span>\n                            </div>\n                          </div>\n                          <!--<div class="row">-->\n                          <!--<div class="col-md-12">-->\n                          <!--<span class="input input-secondary">-->\n                          <!--<input class="input_field input_field-secondary" type="checkbox" id="newsletter" data-ng-model="newsletter">-->\n                          <!--<label class="input_label input_label-secondary" for="newsletter">-->\n                          <!--<span class="input_label-content input_label-content-secondary">Subscribe to our Quarterly Newsletter?</span>-->\n                          <!--</label>-->\n                          <!--</span>-->\n                          <!--</div>-->\n                          <!--</div>-->\n\n\n                          <div class="row">\n                            <div class="col-md-12">\n\n                              <div id="check-awesome" class="form-group filter first-filter">\n                                <input type="checkbox" name="filters" id="newsletter" value="newsletter">\n                                <label for="newsletter">\n                                  <span class="check"></span>\n                                  <span class="box"></span>\n                                  Subscribe to our quarterly e-newsletter\n                                </label>\n                              </div>\n                            </div>\n                          </div>\n\n                          <!--<div class="row">-->\n                          <!--<div class="col-md-12">-->\n                          <!--<label class="checkbox">-->\n                          <!--<input type="checkbox" data-ng-model="newsletter">-->\n                          <!--Subscribe to our quarterly e-newsletter.-->\n                          <!--</label>-->\n                          <!--</div>-->\n                          <!--</div>-->\n\n                          <div class="row">\n                            <div class="col-md-12">\n                              <textarea id="message" data-ng-model="message" name="styled-textarea" required>Let us know what you think</textarea>\n                            </div>\n                          </div>\n\n                        </section>\n\n                      </div>\n\n                      <div class="form-group">\n                        <button class="btn btn-main btn-lg grow btn-contact" type="submit">Send</button>\n                      </div>\n\n                      <div data-ng-show="error" class="text-danger">\n                        <strong data-ng-bind="error"></strong>\n                      </div>\n\n                    </fieldset>\n                  </form>\n\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n    </div>\n  </section>\n</section>\n'),$templateCache.put("modules/contacts/views/edit-contact.client.view.html",'<!--<section class="content background" data-ng-controller="RandomMapController"-->\n<!--ng-style="{\'background-image\': \'url(\' + staticMap.mapUrl + \')\', \'background-size\' : \'cover\' }">-->\n<!--<section class="container">-->\n\n<!--<section data-ng-controller="ContactsController" data-ng-init="findOne()">-->\n<!--<div class="page-header">-->\n<!--<h1>Edit Contact</h1>-->\n<!--</div>-->\n<!--<div class="col-md-12">-->\n<!--<form class="form-horizontal" data-ng-submit="update()" novalidate>-->\n<!--<fieldset>-->\n<!--<div class="form-group">-->\n<!--<label class="control-label" for="name">Name</label>-->\n<!--<div class="controls">-->\n<!--<input type="text" data-ng-model="contact.name" id="name" class="form-control" placeholder="Name" required>-->\n<!--</div>-->\n<!--</div>-->\n<!--<div class="form-group">-->\n<!--<input type="submit" value="Update" class="btn btn-default">-->\n<!--</div>-->\n<!--<div data-ng-show="error" class="text-danger">-->\n<!--<strong data-ng-bind="error"></strong>-->\n<!--</div>-->\n<!--</fieldset>-->\n<!--</form>-->\n<!--</div>-->\n<!--</section>-->\n<!--</section>-->\n<!--</section>-->\n'),$templateCache.put("modules/contacts/views/view-contact.client.view.html",'<!--<secondary-menu-directive></secondary-menu-directive>-->\n\n<!--<section class="content background" data-ng-controller="RandomMapController"-->\n<!--ng-style="{\'background-image\': \'url(\' + staticMap.mapUrl + \')\', \'background-size\' : \'cover\' }" data-ng-class="{\'page-view-menu-open\': toggleSecondMenu}">-->\n<!--<section class="container">-->\n<!--<a href="/" class="small-main-logo logo-on-page logo-second-page img-responsive"></a>-->\n\n<!--<div class="main-content-outer">-->\n<!--<section data-ng-controller="ContactsController" data-ng-init="findOne()" class="main-content-inner">-->\n\n\n<!--<div class="row">-->\n<!--<div class="col-xs-12 ">-->\n\n\n<!--<div class="img-responsive">-->\n<!--<a ng-href="/"><img ng-src="{{logo}}"></a>-->\n<!--</div>-->\n\n<!--<div class="page-header">-->\n<!--<h1 data-ng-bind="contact.title"></h1>-->\n<!--</div>-->\n\n<!--<small>-->\n<!--<em class="text-muted">-->\n\n<!--Published-->\n<!--<span data-ng-bind="contact.created | date:\'mediumDate\'"></span>-->\n<!--by-->\n<!--<span data-ng-bind="contact.user.firstName"></span>-->\n<!--<span data-ng-bind="contact.user.lastName"></span>-->\n<!--</em>-->\n<!--</small>-->\n\n<!--<div>-->\n<!--<p data-ng-bind-html="contact.message"></p>-->\n<!--</div>-->\n\n<!--<hr>-->\n\n<!--&lt;!&ndash;edit and delete message&ndash;&gt;-->\n<!--<div class="pull-right"-->\n<!--data-ng-show="(!authentication.admin)">-->\n<!--<a class="btn btn-primary" href="/contacts/{{contact._id}}/edit">-->\n<!--<i class="glyphicon glyphicon-edit"></i>-->\n<!--</a>-->\n<!--<a class="btn btn-primary" data-ng-click="remove();">-->\n<!--<i class="glyphicon glyphicon-trash"></i>-->\n<!--</a>-->\n<!--</div>-->\n\n<!--</div>-->\n<!--</div>-->\n<!--</section>-->\n<!--</div>-->\n<!--</section>-->\n<!--</section>-->\n'),$templateCache.put("modules/projects/views/create-project.client.view.html",'<secondary-menu-directive></secondary-menu-directive>\n\n<section class="content background" data-ng-controller="RandomMapController"\n         ng-style="{\'background-image\': \'url(\' + staticMap.mapUrl + \')\', \'background-size\' : \'cover\' }"\n         data-ng-class="{\'page-view-menu-open\': toggleSecondMenu}">\n\n  <section class="container">\n    <a href="/" class="small-main-logo logo-on-page logo-second-page img-responsive"></a>\n\n    <div class="main-content-outer">\n      <section data-ng-controller="ProjectsController" class="main-content-inner">\n\n        <div class="page-header">\n          <h1>Project Submission Form</h1>\n        </div>\n        <div class="row">\n          <div class="col-md-12">\n\n            Please include an address for <span>the location of a your essay or project</span>. (Feel free to\n            approximate if there\'s not an exact address.)\n\n            <form name="project" class="form-horizontal" data-ng-submit="create(project.$valid)" novalidate>\n              <fieldset>\n                <div class="form-group">\n\n\n                  <div class="row">\n\n                    <div class="col-md-6">\n                      <span class="input input-secondary">\n                          <input class="input_field input_field-secondary" type="text" id="street"\n                                 data-ng-model="project.street" required ng-change="showUploadFunction()"/>\n                          <label class="input_label input_label-secondary" for="street">\n                            <span\n                              class="input_label-content input_label-content-secondary">Street Address for Project</span>\n                          </label>\n                      </span>\n                    </div>\n\n                    <div class="col-md-6">\n                      <span class="input input-secondary">\n                          <input class="input_field input_field-secondary" type="text" id="city"\n                                 data-ng-model="project.city" required/>\n                          <label class="input_label input_label-secondary" for="city">\n                            <span class="input_label-content input_label-content-secondary">City</span>\n                          </label>\n                      </span>\n                    </div>\n\n                  </div>\n\n                  <div class="row">\n\n                    <div class="col-md-6">\n\n\n\n                      <span class="input input-secondary">\n                          <input class="input_field input_field-secondary" type="zip" id="zip"\n                                 data-ng-model="project.zip" required/>\n                          <label class="input_label input_label-secondary" for="zip">\n                            <span\n                              class="input_label-content input_label-content-secondary">Zip Code</span>\n                          </label>\n                      </span>\n                    </div>\n\n\n                    <div class="col-md-6">\n                      <label for="status">Submission Category\n                        <a href="#" tooltip-placement="right"\n                           uib-tooltip="If you\'re unsure of the best  category, just select whatever you feel is close.">\n                          <i class="fa fa-question-circle"></i>\n                        </a>\n                      </label>\n                      <div class="dropdown">\n                        <select id="status" data-ng-model="project.category">\n                          <option value="essay">Essay</option>\n                          <option value="multimedia">Multimedia</option>\n                          <option value="video">Video</option>\n                          <option value="audio">Audio</option>\n                          <option value="photograhpy">Photography</option>\n                          <option value="this was here">This Was Here</option>\n                        </select>\n                      </div>\n                    </div>\n                  </div>\n\n\n                  <div class="row">\n                    <div class="col-md-12">\n                      <span class="input input-secondary title">\n                          <input class="input_field input_field-secondary" type="text" id="title"\n                                 data-ng-model="project.title" required/>\n                          <label class="input_label input_label-secondary title" for="title">\n                            <span\n                              class="input_label-content input_label-content-secondary">Title</span>\n                          </label>\n                      </span>\n                    </div>\n                  </div>\n\n\n                  <div class="row">\n\n                    <div class="col-md-6">\n                      <project-uploader-directive data-ng-show="showUpload"></project-uploader-directive>\n                    </div>\n\n                  </div>\n\n                  <div class="row">\n                    <div class="col-md-offset-8 col-md-2">\n\n                      <div class="form-group pull-right submit-project">\n                        <input type="submit" class="btn btn-primary btn-lg btn-main grow">\n                      </div>\n\n                      <div data-ng-show="error" class="text-danger">\n                        <strong data-ng-bind="error"></strong>\n                      </div>\n\n                    </div>\n                  </div>\n\n\n                </div>\n\n              </fieldset>\n            </form>\n          </div>\n        </div>\n      </section>\n    </div>\n  </section>\n</section>\n'),$templateCache.put("modules/projects/views/edit-project-old.client.view.html",'<secondary-menu-directive></secondary-menu-directive>\n\n<section class="content background" data-ng-controller="RandomMapController"\n         ng-style="{\'background-image\': \'url(\' + staticMap.mapUrl + \')\', \'background-size\' : \'cover\' }"\n         data-ng-class="{\'page-view-menu-open\': toggleSecondMenu}">\n\n  <section class="container">\n    <a href="/" class="small-main-logo logo-on-page logo-second-page img-responsive"></a>\n    <div class="main-content-outer">\n\n\n      <section data-ng-controller="ProjectsController" data-ng-init="findOne()" class="main-content-inner">\n        <div class="page-header">\n          <h1>Edit Project</h1>\n        </div>\n        <div class="col-md-12">\n          <div class="img-responsive">\n            <a ng-href="/"><img ng-src="{{logo}}"></a>\n          </div>\n          <form class="form-horizontal" data-ng-submit="update()" novalidate>\n            <fieldset>\n              <div class="form-group">\n\n                <div class="controls">\n                  <label class="control-label">Street</label>\n\n                  <div class="controls">\n                    <input type="text" data-ng-model="street" id="street" class="form-control"\n                           placeholder="Street"\n                           required>\n                  </div>\n                  <label class="control-label">City</label>\n\n                  <div class="controls">\n                    <input type="text" data-ng-model="city" id="city" class="form-control"\n                           placeholder="City"\n                           required>\n                  </div>\n                  <label class="control-label">State</label>\n\n                  <div class="controls">\n                    <input type="text" data-ng-model="state" id="state" class="form-control"\n                           placeholder="State"\n                           required>\n                  </div>\n                  <label class="control-label">Zip Code</label>\n\n                  <div class="controls">\n                    <input type="number" data-ng-model="zip" id="zip" class="form-control"\n                           placeholder="Zip Code"\n                           required>\n                  </div>\n\n                  <label class="control-label">Project Title</label>\n\n                  <div class="controls">\n                    <input type="text" data-ng-model="title" id="title" class="form-control"\n                           placeholder="Project Title"\n                           required>\n                  </div>\n\n                  <div class="controls">\n                    <input type="text" data-ng-model="category" id="category" class="form-control"\n                           placeholder="Category">\n                  </div>\n\n                  <div class="controls">\n                    <input type="text" data-ng-model="vimeoId" id="vimeoId" class="form-control"\n                           placeholder="Vimeo ID">\n                  </div>\n\n\n                  <label class="control-label">Story</label>\n                  <div class="controls">\n                    <textarea ckeditor="editorOptions" ng-model="story" id="story" required></textarea>\n                  </div>\n\n\n                </div>\n\n                <div class="form-group">\n                  <input type="submit" value="Update" class="btn btn-primary btn-lg btn-main grow">\n                </div>\n\n                <div data-ng-show="error" class="text-danger">\n                  <strong data-ng-bind="error"></strong>\n                </div>\n              </div>\n            </fieldset>\n          </form>\n        </div>\n      </section>\n    </div>\n  </section>\n</section>\n'),
$templateCache.put("modules/projects/views/edit-project.client.view.html",'<secondary-menu-directive></secondary-menu-directive>\n\n<section class="content background" data-ng-controller="RandomMapController"\n         ng-style="{\'background-image\': \'url(\' + staticMap.mapUrl + \')\', \'background-size\' : \'cover\' }"\n         data-ng-class="{\'page-view-menu-open\': toggleSecondMenu}">\n\n  <section class="container">\n    <a href="/" class="small-main-logo logo-on-page logo-second-page img-responsive"></a>\n\n    <div class="main-content-outer">\n      <section data-ng-controller="ProjectsController" class="main-content-inner">\n\n        <div class="page-header">\n          <h1>Edit</h1>\n        </div>\n\n\n        <div class="row">\n          <div class="col-md-12">\n\n            Please include an address for <span>the location of a your essay or project</span>. (Feel free to\n            approximate if there\'s not an exact address.)\n\n            <form name="project" class="form-horizontal" data-ng-submit="create(project.$valid)" novalidate>\n              <fieldset>\n                <div class="form-group">\n\n\n                  <div class="row">\n\n                    <div class="col-md-6">\n                      <span class="input input-secondary">\n                          <input class="input_field input_field-secondary" type="text" id="street"\n                                 data-ng-model="project.street" required ng-change="showUploadFunction()"/>\n                          <label class="input_label input_label-secondary" for="street">\n                            <span\n                              class="input_label-content input_label-content-secondary">Street Address for Project</span>\n                          </label>\n                      </span>\n                    </div>\n\n\n                    <div class="col-md-6">\n                      <span class="input input-secondary">\n                          <input class="input_field input_field-secondary" type="text" id="city"\n                                 data-ng-model="project.city" required/>\n                          <label class="input_label input_label-secondary" for="city">\n                            <span class="input_label-content input_label-content-secondary">City</span>\n                          </label>\n                      </span>\n                    </div>\n\n                  </div>\n\n                  <div class="row">\n\n                    <div class="col-md-6">\n\n                      <span class="input input-secondary">\n                          <input class="input_field input_field-secondary" type="zip" id="zip"\n                                 data-ng-model="project.zip" required/>\n                          <label class="input_label input_label-secondary" for="zip">\n                            <span\n                              class="input_label-content input_label-content-secondary">Zip Code</span>\n                          </label>\n                      </span>\n                    </div>\n\n\n                    <div class="col-md-6">\n                      <label for="status">Submission Category\n                        <a href="#" tooltip-placement="right"\n                           uib-tooltip="If you\'re unsure of the best  category, just select whatever you feel is close.">\n                          <i class="fa fa-question-circle"></i>\n                        </a>\n                      </label>\n                      <div class="dropdown">\n                        <select id="status" data-ng-model="project.category">\n                          <option value="essay">Essay</option>\n                          <option value="multimedia">Multimedia</option>\n                          <option value="video">Video</option>\n                          <option value="audio">Audio</option>\n                          <option value="photograhpy">Photography</option>\n                          <option value="this was here">This Was Here</option>\n                        </select>\n                      </div>\n                    </div>\n\n                  </div>\n\n\n                  <div class="row">\n                    <div class="col-md-12">\n                      <span class="input input-secondary title">\n                          <input class="input_field input_field-secondary" type="text" id="title"\n                                 data-ng-model="project.title" required/>\n                          <label class="input_label input_label-secondary title" for="title">\n                            <span\n                              class="input_label-content input_label-content-secondary">Title</span>\n                          </label>\n                      </span>\n                    </div>\n                  </div>\n\n\n                  <div class="row">\n                    <div class="col-md-12">\n                      <div class="ck-editor">\n                        <label class="control-label">Story</label>\n                        <div class="controls">\n                          <textarea ckeditor="editorOptions" ng-model="story" id="story" required></textarea>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n\n                  <div class="row">\n\n                    <div class="col-md-6">\n                      <project-uploader-directive data-ng-show="showUpload"></project-uploader-directive>\n                    </div>\n\n                  </div>\n\n                  <div class="row">\n                    <div class="col-md-offset-8 col-md-2">\n\n                      <div class="form-group pull-right submit-project">\n                        <input type="submit" class="btn btn-primary btn-lg btn-main grow">\n                      </div>\n\n                      <div data-ng-show="error" class="text-danger">\n                        <strong data-ng-bind="error"></strong>\n                      </div>\n\n                    </div>\n                  </div>\n\n\n                </div>\n\n              </fieldset>\n            </form>\n          </div>\n        </div>\n      </section>\n    </div>\n  </section>\n</section>\n'),$templateCache.put("modules/projects/views/lightbox.html",'<section data-ng-controller="ContributorController">\n  <div class="modal-body" id="lightbox-modal"\n       ng-swipe-left="Lightbox.nextImage()"\n       ng-swipe-right="Lightbox.prevImage()">\n\n    <div class=lightbox-nav>\n      <button class=close aria-hidden=true ng-click=$dismiss()>×</button>\n      <div class=btn-group>\n        <a class="btn btn-xs btn-default" ng-click=Lightbox.prevImage()><i class="fa fa-chevron-left"></i></a>\n        <a ng-href={{Lightbox.imageUrl}} target=_blank class="btn btn-xs btn-default" title="Open in new tab">Open image\n          in new tab</a>\n        <a class="btn btn-xs btn-default" ng-click=Lightbox.nextImage()><i class="fa fa-chevron-right"></i></a>\n      </div>\n    </div>\n\n    <!-- image -->\n    <div class="lightbox-image-container">\n      <div class="row">\n        <div class="col-md-12">\n\n\n          <div class=lightbox-image-caption>\n            <div><img lightbox-src="{{Lightbox.imageUrl}}"></div>\n\n            <div>{{Lightbox.imageCaption}}</div>\n          </div>\n\n        </div>\n      </div>\n\n    </div>\n  </div>\n</section>\n'),$templateCache.put("modules/projects/views/list-projects.client.view.html",'<!--<secondary-menu-directive></secondary-menu-directive>-->\n<div id="main-menu" class="main-menu">\n  <google-menu></google-menu>\n</div>\n\n<section class="content background" data-ng-controller="RandomMapController"\n         ng-style="{\'background-image\': \'url(\' + staticMap.mapUrl + \')\', \'background-size\' : \'cover\' }"\n         data-ng-class="{\'page-view-menu-open\': toggleSecondMenu}">\n\n  <section class="container">\n    <a href="/" class="small-main-logo logo-on-page logo-second-page img-responsive"></a>\n\n    <div class="main-content-outer">\n\n      <section data-ng-controller="ProjectsController" data-ng-init="init()" class="main-content-inner">\n\n        <div class="list-projects">\n\n          <div class="page-header">\n\n            <div class="row">\n              <div><h1 class="col-md-6">Projects</h1></div>\n              <div class="col-md-6 search-input-div">\n                <span class="input input-secondary pull-right">\n                    <input class="input_field input_field-secondary" type="text" id="search"\n                           data-ng-model="publishedProjects.$"/>\n                    <label class="input_label input_label-secondary" for="search">\n                      <span class="input_label-content input_label-content-secondary">Search Projects</span>\n                    </label>\n                </span>\n              </div>\n            </div>\n\n\n          </div>\n\n          <a class="list-group">\n\n            <!--<div class="row">-->\n              <!--<div class="col-md-12">-->\n                <!--<a data-ng-repeat="publishedProject in publishedProjects" data-ng-href="/projects/{{publishedProject._id}}" class="col-md-4 story-summary animation-cards">-->\n                    <!--<div class="row">-->\n                        <!--<div class="col-md-4">-->\n                            <!--<img class="img-responsive" data-ng-src="{{publishedProject.mainImgThumbnail}}"/>-->\n                        <!--</div>-->\n\n                        <!--<div class="col-md-8">-->\n                            <!--<span data-ng-bind="publishedProject.title"></span><br/>-->\n                            <!--<span data-ng-bind="publishedProject.user.displayName">there</span><br/>-->\n                        <!--</div>-->\n                    <!--</div>-->\n                <!--</a>-->\n              <!--</div>-->\n            <!--</div>-->\n\n            <a data-ng-repeat="publishedProject in publishedProjects" data-ng-href="/projects/{{publishedProject._id}}" class="carddemoBasicUsage">\n              <md-content class="md-padding" layout-xs="column" layout="row">\n                <div flex-xs="" flex-gt-xs="50" layout="column">\n                  <md-card>\n                    <md-card-title>\n                      <md-card-title-text>\n                        <span class="md-headline" data-ng-bind="publishedProject.title"></span>\n                        <span class="md-subhead" data-ng-bind="publishedProject.user.displayName"></span>\n                      </md-card-title-text>\n                      <md-card-title-media>\n                        <div class="md-media-md card-media">\n                          <img class="img-responsive" data-ng-src="{{publishedProject.mainImgThumbnail}}"/>\n                        </div>\n                      </md-card-title-media>\n                    </md-card-title>\n                    <!--<md-card-actions layout="row" layout-align="end center">-->\n                      <!--<md-button>Action 1</md-button>-->\n                      <!--<md-button>Action 2</md-button>-->\n                    <!--</md-card-actions>-->\n                  </md-card>\n                </div>\n              </md-content>\n            </a>\n\n\n            <div class="alert alert-warning text-center"\n                 data-ng-hide="!PublishingService.getPublishedProjects() || projects.length">\n              No Projects yet, why don\'t you <a href="/projects/create">create one</a>?\n            </div>\n\n          </div>\n        </div>\n\n        <!--see `modules/core/client/services/utils.client.service.js` for pagination script`-->\n        <uib-pagination boundary-links="true" max-size="8" items-per-page="itemsPerPage" total-items="filterLength" ng-model="currentPage" ng-change="pageChanged()">\n        </uib-pagination>\n\n      </section>\n    </div>\n  </section>\n</section>\n'),$templateCache.put("modules/projects/views/project-for-submission.client.view.html",'<secondary-menu-directive></secondary-menu-directive>\n\n<section class="content background" data-ng-controller="RandomMapController"\n         ng-style="{\'background-image\': \'url(\' + staticMap.mapUrl + \')\', \'background-size\' : \'cover\' }"\n         data-ng-class="{\'page-view-menu-open\': toggleSecondMenu}">\n\n  <section class="container">\n    <a href="/" class="small-main-logo logo-on-page logo-second-page img-responsive"></a>\n\n    <div class="main-content-outer">\n\n      <project-status-overview></project-status-overview>\n\n    </div>\n  </section>\n</section>\n'),$templateCache.put("modules/projects/views/view-project-preview.client.view.html",'<secondary-menu-directive></secondary-menu-directive>\n\n<section class="content background" data-ng-controller="RandomMapController"\n         ng-style="{\'background-image\': \'url(\' + staticMap.mapUrl + \')\', \'background-size\' : \'cover\' }"\n         data-ng-class="{\'page-view-menu-open\': toggleSecondMenu}">\n\n  <section class="container">\n    <a href="/" class="small-main-logo logo-on-page logo-second-page img-responsive"></a>\n\n    <div class="main-content-outer">\n\n      <section data-ng-controller="ProjectsController" data-ng-init="findOne()" class="main-content-inner">\n\n        <div class="view-project">\n\n          <div class="project-nav">\n            <a class="btn btn-main grow" ui-sref="listProjects">\n              All Projects\n            </a>\n          </div>\n\n          <div class="page-header">\n            <div class="row">\n              <div class="col-lg-10">\n                <h1 data-ng-bind="project.title"></h1>\n              </div>\n              <div class="col-lg-2 pull-left">\n                <i class="fa fa-heart" ng-click="toggleFavProject()"\n                   data-ng-class="{\'favorite-true\' : isFavorite, \'favorite-false\' : !isFavorite}"></i>\n              </div>\n\n            </div>\n\n            <!--<br /><p>{{isFavorite}}</p>-->\n            <em class="text-muted">\n              <span data-ng-bind="project.createdOn | date:\'mediumDate\'"></span>\n              by\n              <a data-ng-href="/contributors/{{project.user._id}}"><span data-ng-bind="project.user.displayName"></span></a>\n            </em>\n          </div>\n\n          <div class="row">\n            <div class="col-xs-12">\n              <div class="videoWrapper" data-ng-show="project.vimeoId">\n                <iframe data-ng-show="!videoSizeSelect()" width="{{vimeo.width}}" height="{{vimeo.height}}"\n                        data-ng-src="{{vimeo.video}}" frameborder="0" webkitallowfullscreen mozallowfullscreen\n                        allowfullscreen>\n                </iframe>\n              </div>\n\n              <div class="videoWrapper" data-ng-show="project.soundCloudId">\n                <iframe width="100%" height="450" scrolling="no" frameborder="no" data-ng-src="{{soundCloud.audio}}">\n                </iframe>\n              </div>\n\n              <div data-ng-show="project.imageGallery || images">\n                <div class="row">\n                  <ul id="grid-view">\n                    <a ng-click="openLightboxModal($index)" data-ng-repeat="image in images" class="col-md-3">\n                      <li>\n                        <img ng-src="{{image}}" class="img-thumbnail">\n                      </li>\n                    </a>\n                  </ul>\n                </div>\n\n\n                <div data-ng-show="project.story !== \'\'">\n                  <p data-ng-bind-html="trustAsHtml(project.story)"></p>\n                </div>\n                <hr>\n                <div>\n                  <img ng-src="{{project.mapImage}}" class="img-responsive">\n                </div>\n\n                <hr/>\n                <h3>Related Stories</h3>\n\n                <div class="pull-right"\n                     data-ng-show="((authentication.user) && (authentication.user._id == project.user._id)) || isAdmin.user === \'admin\'">\n                  <a class="btn btn-main grow" href="/projects/{{project._id}}/edit">\n                    <i class="glyphicon glyphicon-edit"></i>\n                  </a>\n                  <a class="btn btn-primary btn-warning" data-ng-click="remove();">\n                    <i class="glyphicon glyphicon-trash"></i>\n                  </a>\n                </div>\n\n                <!--facebook comments plugin - see the SDK code in `modules/core/server/views/layout.server.view.html` -->\n                <div class="fb-comments" data-href="http://localhost:3000" data-width="700px" data-numposts="5"></div>\n                <!--<div class="fb-comments" data-href="http://www.mappingslc.org" data-width="700px" data-numposts="5"></div>-->\n\n\n              </div>\n            </div>\n          </div>\n        </div>\n\n      </section>\n    </div>\n  </section>\n</section>\n'),$templateCache.put("modules/projects/views/view-project.client.view.html",'<secondary-menu-directive></secondary-menu-directive>\n\n<section class="content background" data-ng-controller="RandomMapController"\n         ng-style="{\'background-image\': \'url(\' + staticMap.mapUrl + \')\', \'background-size\' : \'cover\' }"\n         data-ng-class="{\'page-view-menu-open\': toggleSecondMenu}">\n\n  <section class="container">\n    <a href="/" class="small-main-logo logo-on-page logo-second-page img-responsive"></a>\n\n    <div class="main-content-outer">\n\n      <section data-ng-controller="ProjectsController" data-ng-init="findOne()" class="main-content-inner">\n\n        <div class="view-project">\n\n          <div class="project-nav">\n            <a class="btn btn-main grow" ui-sref="listProjects">\n              All Projects\n            </a>\n          </div>\n\n          <div class="page-header">\n            <div class="row">\n              <div class="col-lg-10">\n                <h1 data-ng-bind="project.title"></h1>\n                <p data-ng-bind="isFavorite"></p>\n              </div>\n              <div class="col-lg-2 pull-left">\n                <i class="fa fa-heart" ng-click="toggleFavProjectFn()"\n                   data-ng-class="{\'favorite-true\' : isFavorite, \'favorite-false\' : !isFavorite}"></i>\n              </div>\n\n            </div>\n\n            <!--<br /><p>{{isFavorite}}</p>-->\n            <em class="text-muted">\n              <span data-ng-bind="project.createdOn | date:\'mediumDate\'"></span>\n              by\n              <a data-ng-href="/contributors/{{user._id}}"><span data-ng-bind="user.displayName"></span></a>\n            </em>\n          </div>\n\n          <div class="row">\n            <div class="col-xs-12">\n              <div class="videoWrapper" data-ng-show="project.vimeoId">\n                <iframe data-ng-show="!videoSizeSelect()" width="{{vimeo.width}}" height="{{vimeo.height}}"\n                        data-ng-src="{{vimeo.video}}" frameborder="0" webkitallowfullscreen mozallowfullscreen\n                        allowfullscreen>\n                </iframe>\n              </div>\n\n              <div class="videoWrapper" data-ng-show="project.soundCloudId">\n                <iframe width="100%" height="450" scrolling="no" frameborder="no" data-ng-src="{{soundCloud.audio}}">\n                </iframe>\n              </div>\n\n              <div data-ng-show="project.imageGallery || images">\n                <div class="row">\n                  <ul id="grid-view">\n                    <a ng-click="openLightboxModal($index)" data-ng-repeat="image in images" class="col-md-3">\n                      <li>\n                        <img ng-src="{{image}}" class="img-thumbnail">\n                      </li>\n                    </a>\n                  </ul>\n                </div>\n\n                <md-content flex="" layout-padding=""data-ng-show="project.story !== \'\'">\n                  <p data-ng-bind-html="trustAsHtml(project.story)"></p>\n                </md-content>\n\n                <!--<div data-ng-show="project.story !== \'\'">-->\n                  <!--<p data-ng-bind-html="trustAsHtml(project.story)"></p>-->\n                <!--</div>-->\n\n                <hr>\n                <div>\n                  <img ng-src="{{project.mapImage}}" class="img-responsive">\n                </div>\n\n                <hr/>\n                <h3>Related Stories</h3>\n\n                <div class="pull-right"\n                     data-ng-show="((authentication.user) && (authentication.user._id == user._id)) || isAdmin.user === \'admin\'">\n                  <a class="btn btn-main grow" ui-sref="admin.adminEditProject({ \'projectId\' : project._id })">\n                    <i class="glyphicon glyphicon-edit"></i>\n                  </a>\n                </div>\n\n                <!--facebook comments plugin - see the SDK code in `modules/core/server/views/layout.server.view.html` -->\n                <div class="fb-comments" data-href="http://localhost:3000" data-width="700px" data-numposts="5"></div>\n                <!--<div class="fb-comments" data-href="http://www.mappingslc.org" data-width="700px" data-numposts="5"></div>-->\n\n\n              </div>\n            </div>\n          </div>\n        </div>\n\n      </section>\n    </div>\n  </section>\n</section>\n'),$templateCache.put("modules/redactor/views/editor.html",'<section class="content background" data-ng-controller="RedactorController">\n\n  <h1>Demo</h1>\n\n  <div class="panel panel-default">\n    <div class="panel-heading"><h3>Default</h3></div>\n    <div class="panel-body">\n      <div class="form-group">\n\n        <textarea ng-model="content" redactor="{plugins: [\'image\', \'video\']}" cols="30" rows="10"></textarea>\n\n      </div>\n      <br/>\n      <p>{{content}}</p>\n      <div class="form-group">\n        <button class="btn btn-default" ng-click="changeContent()">Change content</button>\n      </div>\n\n    </div>\n  </div>\n\n\n  <!--<div class="panel panel-default">-->\n    <!--<div class="panel-heading">Air Option</div>-->\n    <!--<div class="panel-body">-->\n      <!--<div class="form-group">-->\n        <!--<textarea ng-model="content" redactor="{air: true, plugins: [\'source\']}" cols="30" rows="10"></textarea>-->\n      <!--</div>-->\n      <!--<strong>Markup</strong>-->\n      <!--<pre>-->\n        <!--&lt;textarea ng-model="content" redactor="{air: true, plugins: [\'source\']}" cols="30" rows="10"&gt;&lt;/textarea&gt;-->\n      <!--</pre>-->\n    <!--</div>-->\n  <!--</div>-->\n\n</section>\n'),$templateCache.put("modules/admins/views/messages/admin-list-messages.client.view.html",'<secondary-menu-directive></secondary-menu-directive>\n\n<section class="content background" data-ng-controller="RandomMapController"\n         ng-style="{\'background-image\': \'url(\' + staticMap.mapUrl + \')\', \'background-size\' : \'cover\' }"\n         data-ng-class="{\'page-view-menu-open\': toggleSecondMenu}">\n\n  <section class="container">\n\n    <div class="main-content-outer">\n\n      <section class="main-content-inner" data-ng-controller="ContactsController" data-ng-init="find()">\n\n\n        <div class="admin">\n\n          <div class="admin-messages">\n\n            <div class="admin-nav">\n              <a class="btn btn-main grow" ui-sref="admin.dashboard">\n                Admin Home Page\n              </a>\n              <a class="btn btn-main grow" ui-sref="admin.adminProjectsQueue">\n                Admin Project Page\n              </a>\n            </div>\n\n            <div class="page-header">\n              <h1>Messages</h1>\n            </div>\n\n            <table class="table table-bordered table-striped">\n              <thead ts-wrapper>\n              <tr>\n                <th ts-criteria="firstName">First Name</th>\n                <th ts-criteria="lastName|lowercase" ts-default>Last Name</th>\n                <th ts-criteria="email">E-Mail</th>\n                <th ts-criteria="created">Date Sent</th>\n                <!--<th ts-criteria="read">Read</th>-->\n                <!--<th ts-criteria="flag">Flag</th>-->\n              </tr>\n              </thead>\n\n\n              <tbody>\n\n              <tr data-ng-repeat="contact in contacts | orderBy: \'-created\'"\n                  data-ng-class="{\'message-read\' : contact.read}" data-ng-click="viewMessage(contact._id)">\n                <td>{{ contact.firstName }}</td>\n                <td>{{ contact.lastName }}</td>\n                <!--<td>{{ contact.email }}</td>-->\n                <td>{{ contact._id }}</td>\n                <td>{{ contact.created | date : short }}</td>\n                <!--<td>{{ contact.read }}</td>-->\n                <!--<td align="center"><i class="fa fa-flag" data-ng-click="toggleFlag = !toggleFlag" data-ng-class="{\'select\' : toggleFlag = true}"></i></td>-->\n              </tr>\n\n              </tbody>\n\n            </table>\n\n            <!--see `modules/core/client/services/utils.client.service.js` for pagination script`-->\n            <uib-pagination boundary-links="true" max-size="8" items-per-page="itemsPerPage" total-items="filterLength"\n                            ng-model="currentPage" ng-change="pageChanged()"></uib-pagination>\n\n\n          </div>\n        </div>\n      </section>\n    </div>\n\n\n  </section>\n</section>\n'),$templateCache.put("modules/admins/views/messages/admin-view-message.client.view.html",'<secondary-menu-directive></secondary-menu-directive>\n\n<section class="content background" data-ng-controller="RandomMapController"\n         ng-style="{\'background-image\': \'url(\' + staticMap.mapUrl + \')\', \'background-size\' : \'cover\' }"\n         data-ng-class="{\'page-view-menu-open\': toggleSecondMenu}">\n\n  <section class="container">\n\n    <div class="main-content-outer admin">\n\n      <section data-ng-controller="ContactsController" data-ng-init="findOne()" class="main-content-inner">\n\n        <div class="admin">\n\n          <div class="admin-messages">\n\n            <div class="admin-nav">\n              <a class="btn btn-main grow" ui-sref="admin.dashboard">\n                Admin Home Page\n              </a>\n            </div>\n\n            <div class="page-header">\n              <h1 data-ng-bind="contact.name"></h1>\n            </div>\n\n            <div class="row">\n\n\n              <div class="row">\n                <!--<div class="col-md-5" data-ng-bind="contact.fullName"></div>-->\n                <div class="col-md-8">{{contact.firstName}} {{contact.lastName}}</div>\n                <div class="col-md-2" data-ng-bind="contact.email"></div>\n              </div>\n              <div class="row">\n                <div data-ng-bind="contact.message"></div>\n              </div>\n              <small>\n                <em class="text-muted">\n                  <span data-ng-bind="contact.created | date:\'mediumDate\'"></span>\n                  from\n                  <span data-ng-bind="contact.user.displayName"></span>\n                </em>\n              </small>\n            </div>\n\n            <div class="pull-right" data-ng-show="isAdmin.user">\n              <a class="btn btn-primary btn-warning" data-ng-click="remove();">\n                <i class="glyphicon glyphicon-trash"></i>\n              </a>\n            </div>\n\n          </div>\n        </div>\n      </section>\n    </div>\n  </section>\n</section>\n'),$templateCache.put("modules/admins/views/projects/admin-projects-list.client.view.html",'<secondary-menu-directive></secondary-menu-directive>\n\n<section class="content background" data-ng-controller="RandomMapController"\n         ng-style="{\'background-image\': \'url(\' + staticMap.mapUrl + \')\', \'background-size\' : \'cover\' }"\n         data-ng-class="{\'page-view-menu-open\': toggleSecondMenu}">\n\n  <section class="container">\n    <a href="/" class="small-main-logo logo-on-page logo-second-page img-responsive"></a>\n\n    <div class="main-content-outer">\n\n      <section data-ng-controller="ProjectsController" data-ng-init="find()" class="main-content-inner">\n\n        <div class="admin">\n\n          <div class="admin-projects">\n\n            <div class="admin-nav">\n              <a class="btn btn-main grow" ui-sref="admin.dashboard">\n                Admin Home Page\n              </a>\n            </div>\n\n            <div class="page-header">\n              <h1>Admin Panel</h1>\n            </div>\n            \n            <div layout="row">\n              <md-input-container>\n                <label>Sort Order</label>\n                <md-select id="sortAdminProjectList" data-ng-model="sorts">\n                  <md-optgroup label="Sort By">\n                    <md-option ng-value="sort.value" ng-repeat="sort in sorts">{{sort.name}}\n                    </md-option>\n                  </md-optgroup>\n                </md-select>\n              </md-input-container>\n            </div>\n\n\n            <div class="row">\n              <a data-ng-repeat="project in projects | orderBy:sorts" data-ng-href="/admin/edit-project/{{project._id}}" class="col-md-6 col-sm-12 admin-list" id="admin-projects-list">\n                <h3 class="list-group-item-heading" data-ng-bind="project.title"></h3>\n                <div data-ng-bind="project.user.displayName"></div>\n                <small>\n                  Submitted:\n                  <span data-ng-bind="project.createdOn | date:\'medium\'"></span>\n                </small>\n\n              </a>\n\n            </div>\n\n            <div class="alert alert-warning text-center" data-ng-hide="!projects.$resolved || projects.length">\n              No projects are currently waiting for approval. Check <a href="#">blah blah</a> for blah blah.\n            </div>\n\n          </div>\n        </div>\n\n      </section>\n    </div>\n  </section>\n</section>\n'),$templateCache.put("modules/admins/views/projects/admin-view-project.client.view.html",'<!--<secondary-menu-directive></secondary-menu-directive>-->\n<div id="main-menu" class="main-menu">\n  <google-menu></google-menu>\n</div>\n\n<section class="content background" data-ng-controller="RandomMapController"\n         ng-style="{\'background-image\': \'url(\' + staticMap.mapUrl + \')\', \'background-size\' : \'cover\' }"\n         data-ng-class="{\'page-view-menu-open\': toggleSecondMenu}" onerror="myFunction()">\n\n  <section class="container">\n    <a href="/" class="small-main-logo logo-on-page logo-second-page img-responsive"></a>\n\n    <div class="main-content-outer">\n\n      <section data-ng-controller="ProjectsController" data-ng-init="findOne()" class="main-content-inner">\n\n        <div class="admin">\n          <div class="admin-projects">\n\n            <div class="admin-nav">\n              <a class="btn btn-main grow" ui-sref="admin.dashboard">\n                Admin Home Page\n              </a>\n              <a class="btn btn-main grow" ui-sref="admin.adminProjectsQueue">\n                Admin Project Page\n              </a>\n              <a class="btn btn-main grow" ui-sref="viewProjectPreview({projectId: project.id})">\n                Go to Preview\n              </a>\n              <a class="btn btn-main grow" ui-sref="viewProject({projectId: project.id})">\n                Go to Project\n              </a>\n            </div>\n\n\n            <div class="row projects-profile">\n              <div class="col-xs-12">\n                <form class="form-horizontal" data-ng-submit="update(project.$valid, toggleId)" novalidate>\n                  <fieldset>\n                    <project-view-form></project-view-form>\n                  </fieldset>\n                </form>\n\n              </div>\n            </div>\n\n            <hr>\n\n            <div class="pull-right">\n              <a class="btn btn-main grow btn-warning" data-ng-click="remove();">\n                <i class="glyphicon glyphicon-trash"></i>\n              </a>\n            </div>\n\n          </div>\n        </div>\n      </section>\n    </div>\n  </section>\n</section>\n'),
$templateCache.put("modules/admins/views/users/admin-list-users.client.view.html",'<secondary-menu-directive></secondary-menu-directive>\n\n<section class="content background" data-ng-controller="RandomMapController"\n         ng-style="{\'background-image\': \'url(\' + staticMap.mapUrl + \')\', \'background-size\' : \'cover\' }"\n         data-ng-class="{\'page-view-menu-open\': toggleSecondMenu}">\n\n  <section class="container">\n    <a href="/" class="small-main-logo logo-on-page logo-second-page img-responsive"></a>\n\n    <div class="main-content-outer">\n\n      <section data-ng-controller="UserController" data-ng-init="find()" class="main-content-inner">\n\n        <div class="admin">\n\n          <div class="admin-user">\n\n            <div class="admin-nav">\n              <a class="btn btn-main grow" ui-sref="admin.dashboard">\n                Admin Home Page\n              </a>\n              <a class="btn btn-main grow" ui-sref="admin.adminListUsers">\n                Admin User Page\n              </a>\n            </div>\n\n            <div class="page-header">\n              <h1>List of Users</h1>\n            </div>\n\n            <div class="row">\n\n                <a data-ng-repeat="user in users" ui-sref="admin.adminViewUser({userId: user._id})" class="col-md-6 col-sm-12 admin-list">\n                  <div class="row">\n                    <div class="col-md-4">\n                      <img data-ng-src="{{user.profileImageURL}}" class="header-profile-image">\n                    </div>\n                    <div class="col-md-8">\n                      <h3 class="list-group-item-heading" data-ng-bind="user.displayName">{{user._id}}></h3>\n                    </div>\n                  </div>\n\n                </a>\n\n            </div>\n\n          </div>\n\n          <div class="container">\n            <div class="gridStyle" data-ng-grid="gridOptions"></div>\n          </div>\n\n        </div>\n      </section>\n    </div>\n  </section>\n</section>\n'),$templateCache.put("modules/admins/views/users/admin-view-user.client.view.html",'<secondary-menu-directive></secondary-menu-directive>\n\n<section class="content background" data-ng-controller="RandomMapController"\n         ng-style="{\'background-image\': \'url(\' + staticMap.mapUrl + \')\', \'background-size\' : \'cover\' }"\n         data-ng-class="{\'page-view-menu-open\': toggleSecondMenu}">\n\n  <section class="container">\n    <a href="/" class="small-main-logo logo-on-page logo-second-page img-responsive"></a>\n\n    <div class="main-content-outer">\n\n      <!--<section data-ng-controller="EditProfileController" data-ng-init="findOne()" class="main-content-inner">-->\n      <section data-ng-controller="EditProfileController" class="main-content-inner">\n\n        <div class="admin">\n\n          <div class="admin-user">\n\n            <div class="admin-nav">\n              <a class="btn btn-main grow" ui-sref="admin.dashboard">\n                Admin Home Page\n              </a>\n              <a class="btn btn-main grow" ui-sref="admin.adminListUsers">\n                Admin User Page\n              </a>\n            </div>\n\n            <user-view-form-wrapper></user-view-form-wrapper>\n\n          </div>\n        </div>\n      </section>\n    </div>\n  </section>\n</section>\n'),$templateCache.put("modules/users/views/admin/edit-user.client.view.html",'<section>\n  <div class="page-header">\n    <h1>User <span ng-bind="user.username"></span></h1>\n  </div>\n  <div class="col-md-12">\n    <form name="userForm" ng-submit="update(userForm.$valid)" novalidate>\n      <fieldset>\n        <div class="form-group" show-errors>\n          <label for="firstName">First Name</label>\n          <input type="text" id="firstName" name="firstName" class="form-control" ng-model="user.firstName"\n                 placeholder="First Name" required/>\n          <div ng-messages="userForm.firstName.$error" role="alert">\n            <p class="help-block error-text" ng-message="required">First name is required.</p>\n          </div>\n        </div>\n        <div class="form-group" show-errors>\n          <label for="lastName">Last Name</label>\n          <input type="text" id="lastName" name="lastName" class="form-control" ng-model="user.lastName"\n                 placeholder="Last Name" required/>\n          <div ng-messages="userForm.lastName.$error" role="alert">\n            <p class="help-block error-text" ng-message="required">Last name is required.</p>\n          </div>\n        </div>\n        <div class="form-group" show-errors>\n          <label class="control-label" for="roles">Roles</label>\n          <div class="controls">\n            <input class="form-control" type="text" name="roles" ng-model="user.roles" id="roles" ng-list required/>\n            <div ng-messages="userForm.roles.$error" role="alert">\n              <p class="help-block error-text" ng-message="required">At least one role is required.</p>\n            </div>\n          </div>\n        </div>\n        <div class="form-group">\n          <input type="submit" value="Update" class="btn btn-default">\n        </div>\n        <div ng-show="error" class="text-danger">\n          <strong ng-bind="error"></strong>\n        </div>\n      </fieldset>\n    </form>\n  </div>\n</section>\n'),$templateCache.put("modules/users/views/admin/list-users.client.view.html",'<section>\n  <div class="page-header">\n    <div class="row">\n      <div class="col-md-4">\n        <h1>Users</h1>\n      </div>\n      <div class="col-md-4" style="margin-top: 2em">\n        <input class="form-control col-md-4" type="text" ng-model="search" placeholder="Search"\n               ng-change="figureOutItemsToDisplay()"/>\n      </div>\n    </div>\n  </div>\n  <div class="list-group">\n    <a ng-repeat="user in pagedItems" ui-sref="admin.user({userId: user._id})" class="list-group-item">\n      <h4 class="list-group-item-heading" ng-bind="user.username"></h4>\n      <p class="list-group-item-text pull-right small" ng-bind="user.roles"></p>\n      <p class="list-group-item-text" ng-bind="user.email"></p>\n    </a>\n  </div>\n\n  <!--see `modules/core/client/services/utils.client.service.js` for pagination script`-->\n  <uib-pagination boundary-links="true" max-size="8" items-per-page="itemsPerPage" total-items="filterLength"\n                  ng-model="currentPage" ng-change="pageChanged()"></uib-pagination>\n</section>\n'),$templateCache.put("modules/users/views/admin/view-user.client.view.html",'<section>\n  <div class="page-header">\n    <div class="row">\n      <div class="col-md-6">\n        <h1 ng-bind="user.username"></h1>\n      </div>\n      <div class="col-md-4">\n        <a class="btn btn-primary" ui-sref="admin.user-edit({userId: user._id})">\n          <i class="glyphicon glyphicon-edit"></i>\n        </a>\n        <a class="btn btn-primary" ng-click="remove();" ng-if="user._id !== authentication.user._id">\n          <i class="glyphicon glyphicon-trash"></i>\n        </a>\n      </div>\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="col-md-8">\n      <div class="row">\n        <div class="col-md-3"><strong>First Name</strong></div>\n        <div class="col-md-6" ng-bind="user.firstName"></div>\n      </div>\n      <hr/>\n      <div class="row">\n        <div class="col-md-3"><strong>Last Name</strong></div>\n        <div class="col-md-6" ng-bind="user.lastName"></div>\n      </div>\n      <hr/>\n      <div class="row">\n        <div class="col-md-3"><strong>Email</strong></div>\n        <div class="col-md-6" ng-bind="user.email"></div>\n      </div>\n      <hr/>\n      <div class="row">\n        <div class="col-md-3"><strong>Provider</strong></div>\n        <div class="col-md-6" ng-bind="user.provider"></div>\n      </div>\n      <hr/>\n      <div class="row">\n        <div class="col-md-3"><strong>Created</strong></div>\n        <div class="col-md-6" ng-bind="user.created"></div>\n      </div>\n      <hr/>\n      <div class="row">\n        <div class="col-md-3"><strong>Roles</strong></div>\n        <div class="col-md-6" ng-bind="user.roles"></div>\n      </div>\n    </div>\n  </div>\n</section>\n'),$templateCache.put("modules/users/views/authentication/authentication.client.view.html",'<secondary-menu-directive></secondary-menu-directive>\n\n<section class="content background" data-ng-controller="RandomMapController"\n         ng-style="{\'background-image\': \'url(\' + staticMap.mapUrl + \')\', \'background-size\' : \'cover\' }"\n         data-ng-class="{\'page-view-menu-open\': toggleSecondMenu}">\n\n  <section class="container">\n    <a href="/" class="small-main-logo logo-on-page logo-second-page img-responsive"></a>\n\n    <div class="main-content-outer">\n\n\n      <section ng-controller="AuthenticationController" class="main-content-inner">\n\n        <div class="row">\n\n          <h3 class="col-md-12 text-center">Sign in using your social accounts</h3>\n\n          <div class="col-md-12 text-center signin-icons">\n\n            <a data-ng-click="callOauthProvider(\'/api/v1/auth/facebook\')" class="undecorated-link"><i\n              class="fa fa-facebook"></i></a>\n            <a ng-click="callOauthProvider(\'/api/v1/auth/twitter\')" class="undecorated-link"><i\n              class="fa fa-twitter"></i></a>\n          </div>\n          <div ui-view></div>\n        </div>\n      </section>\n\n    </div>\n\n  </section>\n</section>\n'),$templateCache.put("modules/users/views/authentication/signin.client.view.html",'<section data-ng-controller="AuthenticationController">\n  <div class="auth-form">\n    <h3 class="col-md-12 text-center">Or with your account</h3>\n    <div class="col-xs-offset-2 col-xs-8 col-md-offset-3 col-md-5">\n      <form name="userForm" ng-submit="signin(userForm.$valid)" class="signin form-horizontal" autocomplete="off">\n        <fieldset>\n          <div class="form-group" show-errors>\n\n            <div class="row"> <!-- Row #1 -->\n              <div class="col-md-12">\n                      <span class="input input-secondary" data-ng-class="{\'input-filled\': credentials.username }">\n                      <input class="input_field input_field-secondary" placeholder="Username" type="text" id="username"\n                             value="" name="username" data-ng-model="credentials.username"/>\n                      <label class="input_label input_label-secondary" for="username">\n                        <span class="input_label-content input_label-content-secondary">Username</span>\n                      </label>\n                  </span>\n              </div>\n            </div>\n\n            <div ng-messages="userForm.username.$error" role="alert">\n              <p class="help-block error-text" ng-message="required">Username is required.</p>\n            </div>\n          </div>\n          <div class="form-group" show-errors>\n            <div class="row">  <!-- Row #2 -->\n              <div class="col-md-12">\n                  <span class="input input-secondary" data-ng-class="{\'input-filled\': credentials.password }">\n                      <input class="input_field input_field-secondary" type="password" id="password" name="password"\n                             value="" data-ng-model="credentials.password" placeholder="Password" required/>\n                      <label class="input_label input_label-secondary" for="password">\n                        <span class="input_label-content input_label-content-secondary">Password</span>\n                      </label>\n                  </span>\n              </div>\n            </div>\n            <div ng-messages="userForm.password.$error" role="alert">\n              <p class="help-block error-text" ng-message="required">Password is required.</p>\n            </div>\n          </div>\n\n          <div class="row">\n            <div class="col-xs-offset-2 col-xs-8 col-md-offset-2 col-md-10">\n              <div class="form-group">\n                <div>\n                  <button type="submit" class="btn btn-main grow">Sign in</button>\n                  &nbsp; or&nbsp;\n                  <a a ui-sref="authentication.signup">Sign up</a>\n                </div>\n                <div class="forgot-password">\n                  <a ui-sref="password.forgot">Forgot your password?</a>\n                </div>\n                <uib-alert type="danger" data-ng-show="error" class="text-center text-danger">\n                  <span data-ng-bind="error"></span>\n                </uib-alert>\n              </div>\n            </div>\n          </div>\n\n\n        </fieldset>\n      </form>\n    </div>\n  </div>\n</section>\n\n\n<div class="row" data-ng-show="signInBeforeProject && !closeWarning">\n  <div class="col-md-12">\n    <div class="sign-in-warning">\n      <div class="pull-right" data-ng-click="closeWarning = !closeWarning">X</div>\n      <div>\n        <p>You need to sign in before you create a project.</p>\n        <p>If you have not registered yet, it\'s quick. <a href="/signup">Register here</a>.</p>\n      </div>\n    </div>\n  </div>\n</div>\n'),$templateCache.put("modules/users/views/authentication/signup.client.view.html",'<section ng-controller="AuthenticationController" class="main-content-inner">\n<div class="auth-form">\n  <h1 class="page-header text-center">Sign Up</h1>\n\n\n  <div class="row" data-ng-show="signInBeforeProject && !closeWarning">\n    <div class="col-md-12">\n      <div class="sign-in-warning">\n        <div class="pull-right" data-ng-click="closeWarning = !closeWarning">X</div>\n        <div>\n          <p>You need to sign up before you create a project.</p>\n\n          <p>If you\'ve already registered, <a href="//signin">sign in here</a>.</p>\n        </div>\n      </div>\n    </div>\n  </div>\n\n\n  <div class="row">\n\n    <div class="col-md-12">\n\n\n      <form name="userForm" data-ng-submit="signup(userForm.$valid)" class="signin form-horizontal" novalidate\n            autocomplete="off">\n        <div class="row">\n          <div class="col-md-12">\n\n            <fieldset>\n\n\n              <div class="row"> <!-- Row #1 -->\n                <div class="col-md-6">\n                  <!--<div class="form-group" show-errors>-->\n                  <div show-errors>\n                    <span class="input input-secondary" data-ng-class="{\'input-filled\': credentials.firstName}">\n                        <input class="input_field input_field-secondary" type="text" id="firstName" data-ng-model="credentials.firstName"/>\n                        <label class="input_label input_label-secondary" for="firstName">\n                          <span class="input_label-content input_label-content-secondary">First Name</span>\n                        </label>\n                    </span>\n                  </div>\n                </div>\n\n                <div class="col-md-6">\n                  <!--<div class="form-group" show-errors>-->\n                  <div show-errors>\n                  <span class="input input-secondary"\n                        data-ng-class="{\'input-filled\': credentials.lastName}">\n                    <input class="input_field input_field-secondary" type="text"\n                           id="lastName" data-ng-model="credentials.lastName"/>\n                    <label class="input_label input_label-secondary" for="lastName">\n                      <span class="input_label-content input_label-content-secondary">Last Name</span>\n                    </label>\n                </span>\n                  </div>\n                </div>\n              </div>\n\n              <div class="row"> <!-- Row #2 -->\n                <div class="col-md-6">\n                  <!--<div class="form-group" show-errors>-->\n                  <div show-errors>\n                <span class="input input-secondary"\n                      data-ng-class="{\'input-filled\': credentials.email}">\n                    <input class="input_field input_field-secondary" type="text" id="email"\n                           data-ng-model="credentials.email"/>\n                    <label class="input_label input_label-secondary" for="email">\n                      <span\n                        class="input_label-content input_label-content-secondary">E-mail</span>\n                    </label>\n                </span>\n                  </div>\n                </div>\n\n\n                <div class="col-md-6">\n                  <!--<div class="form-group" show-errors>-->\n                  <div show-errors>\n                <span class="input input-secondary"\n                      data-ng-class="{\'input-filled\': credentials.password}">\n                    <input class="input_field input_field-secondary" type="password"\n                           id="password" data-ng-model="credentials.password" popover="{{popoverMsg}}"\n                           popover-trigger="focus"\n                           password-validator/>\n                    <label class="input_label input_label-secondary" for="password">\n                      <span class="input_label-content input_label-content-secondary">Password</span>\n                    </label>\n                </span>\n\n                    <div ng-messages="userForm.password.$error" role="alert">\n                      <p class="help-block error-text" ng-message="required">Password is required.</p>\n                      <div ng-repeat="passwordError in passwordErrors">\n                        <p class="help-block error-text" ng-show="userForm.password.$error.requirements">\n                          {{passwordError}}</p>\n                      </div>\n                    </div>\n\n                  </div>\n                </div>\n              </div>\n\n              <div class="row"> <!-- Row #3 -->\n                <div class="col-md-6">\n                  <!--<div class="form-group" show-errors data-ng-show="!userForm.password.$pristine">-->\n                  <div show-errors data-ng-show="!userForm.password.$pristine">\n                    <span class="input input-secondary" data-ng-class="{\'input-filled\': credentials.passwordVerify}">\n                      <input class="input_field input_field-secondary" type="password" id="passwordVerify"\n                             data-ng-model="credentials.passwordVerify"/>\n                      <label class="input_label input_label-secondary" for="passwordVerify">\n                        <span class="input_label-content input_label-content-secondary">Retype Password</span>\n                      </label>\n                    </span>\n\n                  </div>\n                </div>\n\n                <div class="col-md-6">\n                  <!--<div class="form-group" show-errors ng-show="!userForm.password.$error.required">-->\n                  <div show-errors ng-show="!userForm.password.$error.required">\n                    <label>Password Requirements</label>\n                    <uib-progressbar value="requirementsProgress" type="{{requirementsColor}}">\n                      <span style="color:white; white-space:nowrap;">{{requirementsProgress}}%</span>\n                    </uib-progressbar>\n                  </div>\n                </div>\n              </div>\n\n\n              <div class="row">  <!-- Row #4 -->\n                <div class="col-md-6">\n                  <div id="check-awesome" class="filter first-filter">\n                    <input type="checkbox" name="filters" id="newsletter" value="newsletter"\n                           data-ng-model="credentials.newsletter">\n                    <label for="newsletter">\n                      <span class="check"></span>\n                      <span class="box"></span>\n                      Subscribe to our quarterly e-newsletter\n                    </label>\n                  </div>\n                </div>\n                <div class="col-md-6"></div>\n              </div>\n\n\n              <div class="row">\n                <div class="col-xs-offset-2 col-xs-8 col-md-offset-2 col-md-10">\n                  <div class="form-group">\n                    <div>\n                      <button type="submit" class="btn btn-main grow">Sign up</button>\n                      &nbsp; or&nbsp;\n                      <a ui-sref="authentication.signin" class="show-signup">Sign in</a>\n                    </div>\n                    <div class="forgot-password">\n                      <a ui-sref="authentication.signin">Forgot your password?</a>\n                    </div>\n\n                    <div data-ng-show="error" class="text-center text-danger">\n                      <strong data-ng-bind="error"></strong>\n                    </div>\n\n                  </div>\n                </div>\n              </div>\n\n              <div ng-show="error" class="text-center text-danger">\n                <strong ng-bind="error"></strong>\n              </div>\n\n\n            </fieldset>\n\n          </div>\n        </div>\n\n      </form>\n    </div>\n  </div>\n  </div>\n</section>\n'),$templateCache.put("modules/users/views/contributors/contributors.client.list.html",'<secondary-menu-directive></secondary-menu-directive>\n\n<section class="content background" data-ng-controller="RandomMapController"\n         ng-style="{\'background-image\': \'url(\' + staticMap.mapUrl + \')\', \'background-size\' : \'cover\' }"\n         data-ng-class="{\'page-view-menu-open\': toggleSecondMenu}">\n  <section class="container">\n    <a href="/" class="small-main-logo logo-on-page logo-second-page img-responsive"></a>\n\n    <div class="main-content-outer">\n      <section data-ng-controller="ContributorController" data-ng-init="init()" class="contributors">\n        <div class="contrib">\n          <div class="row">\n            <div class="col-md-12">\n              <div class="main-content-inner">\n\n                <div class="row">\n                  <div><h1 class="col-md-6">Contributors</h1></div>\n\n                  <div class="col-md-6 search-input-div">\n                    <span class="input input-secondary pull-right">\n                        <input class="input_field input_field-secondary" type="text" id="search"\n                               data-ng-model="searchContributors"/>\n                        <label class="input_label input_label-secondary" for="search">\n                          <span class="input_label-content input_label-content-secondary">Search Contributors</span>\n                        </label>\n                    </span>\n                  </div>\n                </div>\n\n                <div class="row">\n\n                  <ul id="grid-view">\n                    <a ng-click="openLightboxModal($index)"\n                       data-ng-repeat="contributor in contributors | filter:searchContributors" class="col-md-3">\n                      <li>\n                        <div>\n                          <img ng-src="{{contributor.profileImageURL}}" class="img-thumbnail">\n                          <p>{{contributor.firstName}} {{contributor.lastName}}</p>\n                        </div>\n                      </li>\n                    </a>\n                  </ul>\n\n\n                </div>\n              </div>\n\n            </div>\n          </div>\n        </div>\n      </section>\n    </div>\n  </section>\n</section>\n'),$templateCache.put("modules/users/views/contributors/contributors.client.view.html",'<secondary-menu-directive></secondary-menu-directive>\n\n<section class="content background" data-ng-controller="RandomMapController"\n         ng-style="{\'background-image\': \'url(\' + staticMap.mapUrl + \')\', \'background-size\' : \'cover\' }"\n         data-ng-class="{\'page-view-menu-open\': toggleSecondMenu}">\n  <section class="container">\n    <a href="/" class="small-main-logo logo-on-page logo-second-page img-responsive"></a>\n\n    <div class="main-content-outer">\n      <section data-ng-controller="ContributorController" data-ng-init="findContributor()" class="contributors">\n        <div class="contrib-view">\n          <div class="row">\n            <div class="col-md-12">\n              <div class="main-content-inner">\n\n                <div class="row">\n                  <div><h1 class="col-md-6">{{contributor.firstName}} {{contributor.lastName}}</h1></div>\n                  <div><img class="col-md-6 pull-right" data-ng-src="{{contributor.profileImageURL}}"/></div>\n                </div>\n\n                <div class="row">\n                  <div><p class="col-md-12">{{contributor.bio}}</p></div>\n                </div>\n\n                <hr/>\n\n                <h4>Other Projects by {{contributor.firstName}}</h4>\n                <div class="row">\n                  <div><p class="col-md-12" data-ng-repeat="contributorProject in contributorProjects"><a\n                    data-ng-href="/projects/{{contributorProject._id}}">\n                    {{contributorProject.title}}\n                  </a>\n                  </p></div>\n                </div>\n\n\n                <!--<div class="row">-->\n\n                <!--<ul id="grid-view">-->\n                <!--<a ng-click="openLightboxModal($index)" data-ng-repeat="contributor in contributors | filter:searchContributors" class="col-md-3">-->\n                <!--<li>-->\n                <!--<div>-->\n                <!--<img ng-src="{{contributor.profileImageURL}}" class="img-thumbnail">-->\n                <!--<p>{{contributor.firstName}} {{contributor.lastName}}</p>-->\n                <!--</div>-->\n                <!--</li>-->\n                <!--</a>-->\n                <!--</ul>-->\n\n\n                <!--</div>-->\n              </div>\n\n            </div>\n          </div>\n        </div>\n      </section>\n    </div>\n  </section>\n</section>\n'),$templateCache.put("modules/users/views/contributors/lightbox.html",'<section data-ng-controller="ContributorController">\n  <div class="modal-body" id="lightbox-modal"\n       ng-swipe-left="Lightbox.nextImage()"\n       ng-swipe-right="Lightbox.prevImage()">\n\n    <div class=lightbox-nav>\n      <button class=close aria-hidden=true ng-click=$dismiss()>×</button>\n      <div class=btn-group>\n        <a class="btn btn-xs btn-default" ng-click=Lightbox.prevImage()><i class="fa fa-chevron-left"></i></a>\n        <a ng-href={{Lightbox.imageUrl}} target=_blank class="btn btn-xs btn-default" title="Open in new tab">Open image\n          in new tab</a>\n        <a class="btn btn-xs btn-default" ng-click=Lightbox.nextImage()><i class="fa fa-chevron-right"></i></a>\n      </div>\n    </div>\n\n    <!-- image -->\n    <div class="lightbox-image-container">\n      <div class="row">\n        <div class="col-md-12">\n\n\n          <div class=lightbox-image-caption>\n            <div><img lightbox-src="{{Lightbox.imageUrl}}"></div>\n\n            <div>{{Lightbox.imageCaption}}</div>\n          </div>\n\n        </div>\n      </div>\n\n    </div>\n  </div>\n</section>\n'),$templateCache.put("modules/users/views/password/forgot-password.client.view.html",'<section class="row" ng-controller="PasswordController">\n  <h3 class="col-md-12 text-center">Restore your password</h3>\n  <p class="small text-center">Enter your account username.</p>\n  <div class="col-xs-offset-2 col-xs-8 col-md-offset-5 col-md-2">\n    <form name="forgotPasswordForm" ng-submit="askForPasswordReset(forgotPasswordForm.$valid)" class="form-horizontal"\n          novalidate autocomplete="off">\n      <fieldset>\n        <div class="form-group" show-errors>\n          <input type="text" id="username" name="username" class="form-control" ng-model="credentials.username"\n                 placeholder="Username" lowercase required>\n          <div ng-messages="forgotPasswordForm.username.$error" role="alert">\n            <p class="help-block error-text" ng-message="required">Enter a username.</p>\n          </div>\n        </div>\n        <div class="text-center form-group">\n          <button type="submit" class="btn btn-primary">Submit</button>\n        </div>\n        <div ng-show="error" class="text-center text-danger">\n          <strong ng-bind="error"></strong>\n        </div>\n        <div ng-show="success" class="text-center text-success">\n          <strong ng-bind="success"></strong>\n        </div>\n      </fieldset>\n    </form>\n  </div>\n</section>\n'),$templateCache.put("modules/users/views/password/reset-password-invalid.client.view.html",'<section class="row text-center">\n  <h3 class="col-md-12">Password reset is invalid</h3>\n  <a ui-sref="password.forgot" class="col-md-12">Ask for a new password reset</a>\n</section>\n'),$templateCache.put("modules/users/views/password/reset-password-success.client.view.html",'<section class="row text-center">\n  <h3 class="col-md-12">Password successfully reset</h3>\n  <a ui-sref="home" class="col-md-12">Continue to home page</a>\n</section>\n'),$templateCache.put("modules/users/views/password/reset-password.client.view.html",'<section class="row" ng-controller="PasswordController">\n  <h3 class="col-md-12 text-center">Reset your password</h3>\n  <div class="col-xs-offset-2 col-xs-8 col-md-offset-4 col-md-4">\n    <form name="resetPasswordForm" ng-submit="resetUserPassword(resetPasswordForm.$valid)"\n          class="signin form-horizontal" novalidate autocomplete="off">\n      <fieldset>\n        <div class="form-group" show-errors>\n          <label for="newPassword">New Password</label>\n          <input type="password" id="newPassword" name="newPassword" class="form-control"\n                 ng-model="passwordDetails.newPassword" placeholder="New Password" autocomplete="new-password"\n                 popover="{{popoverMsg}}" popover-trigger="focus" popover-placement="top" password-validator required>\n          <div ng-messages="resetPasswordForm.newPassword.$error" role="alert">\n            <p class="help-block error-text" ng-message="required">Enter a new password.</p>\n            <div ng-repeat="passwordError in passwordErrors">\n              <p class="help-block error-text" ng-show="resetPasswordForm.newPassword.$error.requirements">\n                {{passwordError}}</p>\n            </div>\n          </div>\n        </div>\n        <div class="form-group" show-errors>\n          <label for="verifyPassword">Verify Password</label>\n          <input type="password" id="verifyPassword" name="verifyPassword" class="form-control"\n                 ng-model="passwordDetails.verifyPassword" placeholder="Verify Password"\n                 password-verify="passwordDetails.newPassword" required>\n          <div ng-messages="resetPasswordForm.verifyPassword.$error" role="alert">\n            <p class="help-block error-text" ng-message="required">Enter the password again to verify.</p>\n            <p class="help-block error-text" ng-show=resetPasswordForm.verifyPassword.$error.passwordVerify>Passwords do\n              not match.</p>\n          </div>\n        </div>\n        <div class="form-group" ng-show="!resetPasswordForm.newPassword.$error.required">\n          <label>Password Requirements</label>\n          <progressbar value="requirementsProgress" type="{{requirementsColor}}"><span\n            style="color:white; white-space:nowrap;">{{requirementsProgress}}%</span></progressbar>\n        </div>\n        <div class="text-center form-group">\n          <button type="submit" class="btn btn-primary">Update Password</button>\n        </div>\n        <div ng-show="error" class="text-center text-danger">\n          <strong ng-bind="error"></strong>\n        </div>\n        <div ng-show="success" class="text-center text-success">\n          <strong ng-bind="success"></strong>\n        </div>\n      </fieldset>\n    </form>\n  </div>\n</section>\n'),$templateCache.put("modules/users/views/settings/change-password.client.view.html",'<section class="row" ng-controller="ChangePasswordController">\n  <div class="col-xs-offset-1 col-xs-10 col-md-offset-4 col-md-4">\n    <form name="passwordForm" ng-submit="changeUserPassword(passwordForm.$valid)" class="signin" novalidate\n          autocomplete="off">\n      <fieldset>\n        <div class="form-group" show-errors>\n          <label for="currentPassword">Current Password</label>\n          <input type="password" id="currentPassword" name="currentPassword" class="form-control"\n                 ng-model="passwordDetails.currentPassword" placeholder="Current Password" required>\n          <div ng-messages="passwordForm.currentPassword.$error" role="alert">\n            <p class="help-block error-text" ng-message="required">Your current password is required.</p>\n          </div>\n        </div>\n        <div class="form-group" show-errors>\n          <label for="newPassword">New Password</label>\n          <input type="password" id="newPassword" name="newPassword" class="form-control"\n                 ng-model="passwordDetails.newPassword" placeholder="New Password" popover="{{popoverMsg}}"\n                 popover-trigger="focus" password-validator required>\n          <div ng-messages="passwordForm.newPassword.$error" role="alert">\n            <p class="help-block error-text" ng-message="required">Enter a new password.</p>\n            <div ng-repeat="passwordError in passwordErrors">\n              <p class="help-block error-text" ng-show="passwordForm.newPassword.$error.requirements">\n                {{passwordError}}</p>\n            </div>\n          </div>\n        </div>\n        <div class="form-group" show-errors>\n          <label for="verifyPassword">Verify Password</label>\n          <input type="password" id="verifyPassword" name="verifyPassword" class="form-control"\n                 ng-model="passwordDetails.verifyPassword" placeholder="Verify Password"\n                 password-verify="passwordDetails.newPassword" required>\n          <div ng-messages="passwordForm.verifyPassword.$error" role="alert">\n            <p class="help-block error-text" ng-message="required">Verify your new password.</p>\n            <p class="help-block error-text" ng-show=passwordForm.verifyPassword.$error.passwordVerify>Passwords do not\n              match.</p>\n          </div>\n        </div>\n        <div class="form-group" ng-show="!passwordForm.newPassword.$error.required">\n          <label>Password Requirements</label>\n          <progressbar value="requirementsProgress" type="{{requirementsColor}}"><span\n            style="color:white; white-space:nowrap;">{{requirementsProgress}}%</span></progressbar>\n        </div>\n        <div class="text-center form-group">\n          <button type="submit" class="btn btn-primary">Save Password</button>\n        </div>\n        <div ng-show="success" class="text-center text-success">\n          <strong>Password Changed Successfully</strong>\n        </div>\n        <div ng-show="error" class="text-center text-danger">\n          <strong ng-bind="error"></strong>\n        </div>\n      </fieldset>\n    </form>\n  </div>\n</section>\n'),
$templateCache.put("modules/users/views/settings/change-profile-picture.client.view.html",'<section class="row" ng-controller="ChangeProfilePictureController" data-ng-init="init();">\n\n  <div class="file-upload">\n\n    <div class="col-xs-offset-1 col-xs-10 col-md-offset-1 col-md-8">\n\n\n\n\n      <a data-ng-repeat="file in listOfImages" data-ng-href="{{file.imagepath}}{{file.imagename}}" class="list-group-item">\n      <img data-ng-src="{{imageURL}}" />\n      </a>\n\n      <img data-ng-src="{{user.profileImageURL}}" class="img-thumbnail user-profile-picture" />\n\n      <div>\n        <button type="file" class="btn btn-main btn-footer-overlay grow" data-ng-hide="uploading" ngf-select\n                ngf-change="onFileSelect($files)">New Profile Photo\n        </button>\n      </div>\n\n\n      <button data-ng-click="abort();" data-ng-hide="!uploading" class="btn btn-main btn-footer-overlay grow">Cancel\n      </button>\n\n      <!--Drop File:-->\n      <div ngf-file-drop ng-model="files" class="drop-box" ngf-select ngf-change="onFileSelect($files)"\n           drag-over-class="dragover" ngf-multiple="true" allow-dir="true" accept=".jpg,.png,.pdf"\n           data-ng-hide="uploading">\n        Drop Images or PDFs Files Here\n      </div>\n\n      <div ngf-no-file-drop data-ng-hide="uploading" class="drag-drop-alert">File Drag/Drop is not supported for this browser\n      </div>\n\n\n\n\n\n\n\n        <span class="progress" ng-show="picFile.progress >= 0">\n          <div style="width:{{picFile.progress}}%" ng-bind="picFile.progress + \'%\'"></div>\n        </span>\n\n\n\n\n\n      <span ng-show="picFile.result">Upload Successful</span>\n      <span class="err" ng-show="errorMsg">{{errorMsg}}</span>\n\n      <div ng-show="success" class="text-center text-success">\n      <strong>Profile Picture Changed Successfully</strong>\n      </div>\n\n      <div ng-show="error" class="text-center text-danger">\n      <strong ng-bind="error"></strong>\n      </div>\n\n\n\n\n\n    </div>\n\n  </div>\n</section>\n'),$templateCache.put("modules/users/views/settings/edit-profile.client.view.html",'<section data-ng-controller="EditProfileController" class="row">\n  <div class="col-xs-offset-1 col-xs-10 col-md-offset-4 col-md-4">\n    <form name="userForm" ng-submit="updateUserProfile(userForm.$valid)" class="signin" novalidate autocomplete="off">\n\n      <fieldset>\n        <div class="form-group" show-errors>\n          <label for="firstName">First Name</label>\n          <input type="text" id="firstName" name="firstName" class="form-control" ng-model="user.firstName"\n                 placeholder="First Name" required>\n          <div ng-messages="userForm.firstName.$error" role="alert">\n            <p class="help-block error-text" ng-message="required">First name is required.</p>\n          </div>\n        </div>\n        <div class="form-group" show-errors>\n          <label for="lastName">Last Name</label>\n          <input type="text" id="lastName" name="lastName" class="form-control" ng-model="user.lastName"\n                 placeholder="Last Name" required>\n          <div ng-messages="userForm.lastName.$error" role="alert">\n            <p class="help-block error-text" ng-message="required">Last name is required.</p>\n          </div>\n        </div>\n        <div class="form-group" show-errors>\n          <label for="email">Email</label>\n          <input type="email" id="email" name="email" class="form-control" ng-model="user.email" placeholder="Email"\n                 required>\n          <div ng-messages="userForm.email.$error" role="alert">\n            <p class="help-block error-text" ng-message="required">Email address is required.</p>\n            <p class="help-block error-text" ng-message="email">Email address is invalid.</p>\n          </div>\n        </div>\n        <div class="form-group" show-errors>\n          <label for="username">Username</label>\n          <input type="text" id="username" name="username" class="form-control" ng-model="user.username"\n                 placeholder="Username" required>\n          <div ng-messages="userForm.username.$error" role="alert">\n            <p class="help-block error-text" ng-message="required">Username is required.</p>\n          </div>\n        </div>\n        <div class="text-center form-group">\n          <button type="submit" class="btn btn-primary">Save Profile</button>\n        </div>\n        <div ng-show="success" class="text-center text-success">\n          <strong>Profile Saved Successfully</strong>\n        </div>\n        <div ng-show="error" class="text-center text-danger">\n          <strong ng-bind="error"></strong>\n        </div>\n      </fieldset>\n    </form>\n  </div>\n</section>\n'),$templateCache.put("modules/users/views/settings/favorites.client.view.html",'<section data-ng-controller="UserController" class="row" style="height: 600px;" data-ng-init="getFavorites()">\n\n  <div class="user-favorites">\n\n    <div class="list-group">\n\n\n      <div data-ng-repeat="userFavorite in userFavorites" class="admin-list row" data-ng-show="!isFavorite">\n\n        <a ui-sref="viewProject({projectId: userFavorite.id})" class="admin-list col-md-11">\n          <div class="row">\n            <div class="col-md-4">\n              <img data-ng-src="{{userFavorite.mainImgThumbnail}}"/>\n            </div>\n\n            <div class="col-md-8">\n              <div>\n                <p data-ng-bind="userFavorite.title"></p>\n                <small>\n                  <span>{{userFavorite.user.firstName}} {{userFavorite.user.lastName}}</span>\n                </small>\n                <!--<span><i class="fa fa-times pull-right" data-ng-click="removeFavProject(userFavorite.id)"></i></span>-->\n              </div>\n            </div>\n          </div>\n        </a>\n\n        <div class="col-md-1">\n          <i class="fa fa-times pull-right" data-ng-click="removeFavProject(userFavorite.id)"\n             uib-tooltip="Remove from favorites"></i>\n        </div>\n\n      </div>\n\n\n    </div>\n  </div>\n\n\n  <!--<div>-->\n    <!--<div ng-show="!userFavorites">-->\n      <!--<p>You haven\'t favorited any projects yet. Want to check out some favorites from the Mapping SLC team and from-->\n        <!--other folks?</p>-->\n      <!--<featured-projects></featured-projects>-->\n    <!--</div>-->\n  <!--</div>-->\n\n\n</section>\n'),$templateCache.put("modules/users/views/settings/manage-social-accounts.client.view.html",'<section class="row" ng-controller="SocialAccountsController">\n  <h3 class="col-md-12 text-center" ng-show="hasConnectedAdditionalSocialAccounts()">Connected social accounts:</h3>\n  <div class="col-md-12 text-center">\n    <div ng-repeat="(providerName, providerData) in user.additionalProvidersData" class="social-account-container">\n      <img ng-src="/modules/users/client/img/buttons/{{providerName}}.png">\n      <a class="btn btn-danger btn-remove-account" ng-click="removeUserSocialAccount(providerName)">\n        <i class="glyphicon glyphicon-trash"></i>\n      </a>\n    </div>\n  </div>\n  <h3 class="col-md-12 text-center" ng-show="hasConnectedAdditionalSocialAccounts()">Unconnected social accounts:</h3>\n  <div class="col-md-12 text-center">\n    <div class="social-account-container" ng-hide="isConnectedSocialAccount(\'facebook\')">\n      <img ng-src="/modules/users/client/img/buttons/facebook.png">\n      <a class="btn btn-success btn-remove-account" href="/api/v1/auth/facebook" target="_self">\n        <i class="glyphicon glyphicon-plus"></i>\n      </a>\n    </div>\n    <div class="social-account-container" ng-hide="isConnectedSocialAccount(\'twitter\')">\n      <img ng-src="/modules/users/client/img/buttons/twitter.png">\n      <a class="btn btn-success btn-remove-account" href="/api/v1/auth/twitter" target="_self">\n        <i class="glyphicon glyphicon-plus"></i>\n      </a>\n    </div>\n  </div>\n</section>\n'),$templateCache.put("modules/users/views/settings/settings.client.view.html",'<secondary-menu-directive></secondary-menu-directive>\n<section class="content background" data-ng-controller="RandomMapController"\n         ng-style="{\'background-image\': \'url(\' + staticMap.mapUrl + \')\', \'background-size\' : \'cover\' }"\n         data-ng-class="{\'page-view-menu-open\': toggleSecondMenu}">\n\n  <section class="container">\n    <a href="/" class="small-main-logo logo-on-page logo-second-page img-responsive"></a>\n\n    <div class="main-content-outer">\n\n      <section ng-controller="UserController" class="main-content-inner">\n        <div class="page-header">\n          <h1>Settings</h1>\n        </div>\n        <div class="row user-settings">\n          <nav class="col-sm-3 col-md-3">\n            <ul class="nav nav-pills nav-stacked">\n              <li ui-sref-active="active">\n                <a ui-sref="settings.profile">Edit Profile</a>\n              </li>\n              <li ui-sref-active="active">\n                <a ui-sref="settings.picture">Change Profile Picture</a>\n              </li>\n              <li ui-sref-active="active" ng-show="user.provider === \'local\'">\n                <a ui-sref="settings.password">Change Password</a>\n              </li>\n              <li ui-sref-active="active">\n                <a ui-sref="settings.accounts">Manage Social Accounts</a>\n              </li>\n              <li ui-sref-active="active">\n                <a ui-sref="settings.favorites">Favorite Projects</a>\n              </li>\n              <li ui-sref-active="active">\n                <a ui-sref="settings.submissions">Current Submissions</a>\n              </li>\n            </ul>\n          </nav>\n          <div class="col-sm-9 col-md-8 settings-view">\n            <div ui-view></div>\n          </div>\n        </div>\n      </section>\n    </div>\n  </section>\n</section>\n'),$templateCache.put("modules/users/views/settings/submissions-list.client.view.html",'<section data-ng-controller="UserController" class="row" style="height: 600px;"\n         data-ng-init="findCurrentUserSubmissions()">\n\n  <div class="user-submissions">\n\n    <div class="list-group">\n      <div class="row">\n\n        <a data-ng-repeat="userProject in userProjects" ui-sref="settings.submissionsView({projectId: userProject.id})" class="col-md-12 md-whiteframe-8dp admin-list">\n\n          <div class="row">\n\n            <div class="col-md-3">\n              <img data-ng-src="{{userProject.mainImgThumbnail}}"/>\n            </div>\n\n            <div class="col-md-8">\n              <h4 class="list-group-item-heading" data-ng-bind="userProject.title"></h4>\n              <small>\n                Submitted on <span data-ng-bind="userProject.createdOn | date:\'short\'"></span>\n              </small>\n\n            </div>\n\n          </div>\n        </a>\n\n      </div>\n    </div>\n\n  </div>\n\n</section>\n'),$templateCache.put("modules/users/views/settings/submissions-view.client.view.html",'<section class="row" style="height: 600px;">\n\n  <user-submissions-view></user-submissions-view>\n\n</section>\n')}angular.module("core").run(templates),templates.$inject=["$templateCache"]}();